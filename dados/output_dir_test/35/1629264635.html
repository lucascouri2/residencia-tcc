<!doctype html>
<html lang='en'>
<head>
    <!-- Google fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,600i,700,800" rel="stylesheet">
            <!-- used for header text on Flipp ads -->
        <link href="https://fonts.googleapis.com/css?family=Lilita+One" rel="stylesheet">
            <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.2.0/css/all.css"
          crossorigin="anonymous" >

            <meta property="og:title" content="US Soccer may repeal the ban on players kneeling"/>
        <meta property="og:description" content="By Alaa Elassar and Jabari Jackson, CNN (CNN) -- The US Soccer Federation is considering a repeal of a policy requiring national team players to stand during the National Anthem, according to an ESPN repo"/>
        <meta property="og:type" content="website"/>
        <meta property="og:url" content="https://cbs58.com/news/us-soccer-may-repeal-the-ban-on-players-kneeling"/>
                <meta property="og:image" content="https://newscdn2.weigelbroadcasting.com/FipeY-1591641928-166372-blog-hypatia-h_a9c4ae8d20e88115d15600e7dd706e2b-h_63b308641a5d864557a92d951aad2fb2-300.JPG"/>
        <meta property="og:image:width" content=""/>
        <meta property="og:image:height" content=""/>
        <link rel="image_src" href="https://newscdn2.weigelbroadcasting.com/FipeY-1591641928-166372-blog-hypatia-h_a9c4ae8d20e88115d15600e7dd706e2b-h_63b308641a5d864557a92d951aad2fb2-300.JPG" />
                <meta property="og:site_name" content="CBS58"/>
        <meta property="fb:admins" content="567665230"/>        
                <meta name="Description" content="CBS 58 is your local source for the Milwaukee news, Milwaukee weather, and Milwaukee sports.">
        <meta name="KEYWORDS" content="Racine News; Kenosha News; Washington News; Sheboygan News; Waukesha News; Ozaukee News; Walworth News; Milwaukee news;  Milwaukee weather; sports; traffic; Brewers;  Bucks; Packers; Telemundo">
        <meta name="news_keywords" content="Racine News; Kenosha News; Washington News; Sheboygan News; Waukesha News; Ozaukee News; Walworth News; Milwaukee news;  Milwaukee weather; sports; traffic; Brewers;  Bucks; Packers; Telemundo"><meta name="ROBOTS" content="index,follow,noarchive">
        <meta name="owner" content="WDJT">
                    <link rel="canonical" href="https://cbs58.com/news/us-soccer-may-repeal-the-ban-on-players-kneeling">
                <meta property="fb:app_id" content="808704082583441"/>
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="US Soccer may repeal the ban on players kneeling">
        <meta name="twitter:description" content="By Alaa Elassar and Jabari Jackson, CNN (CNN) -- The US Soccer Federation is considering a repeal of a policy requiring national team players to stand during the National Anthem, according to an ESPN repo">
        <meta name="twitter:image" content="https://newscdn2.weigelbroadcasting.com/FipeY-1591641928-166372-blog-hypatia-h_a9c4ae8d20e88115d15600e7dd706e2b-h_63b308641a5d864557a92d951aad2fb2-300.JPG">     
        <meta property="fb:pages" content="11952527906">
    


    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">
    <link rel="stylesheet" type="text/css" href="/css/rrssb.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css?v103.ver1.2">
    <link rel="stylesheet" type="text/css" href="/css/style_cbs58.css?ver1.2">
    <!-- remove time cache-breaker -->
    <link rel="stylesheet" type="text/css" href="/css/video_player.css?v=101">

    <!-- <link rel="stylesheet" type="text/css" href="/css/extras.css"> -->
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">
            <link href="/js/videojs7/video-js.css?v1" rel="stylesheet">
    <link rel="stylesheet" href="/js/videojs7/videojs.ads.css?v1" />
    <link rel="stylesheet" href="/js/videojs7/videojs.ima.css?v1" />
    <script src="/js/imagesloaded.pkgd.min.js"></script>
        
   
    <script src="/js/countDown.min.js"></script>
    <link rel="stylesheet" href="/css/countdown_timer_style.css">
       

    <title>US Soccer may repeal the ban on players kneeling</title>

    <!--[if lt IE 9]>
    <script>
        document.createElement('header');
        document.createElement('nav');
        document.createElement('section');
        document.createElement('article');
        document.createElement('aside');
        document.createElement('footer');
        document.createElement('hgroup');
    </script>
    <![endif]-->

    <script
			  src="https://code.jquery.com/jquery-3.6.1.js"
			  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
			  crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <script src="/js/rrssb.min.js"></script>
    <script src="/js/jquery.marquee.min.js"></script>
    <script src="/js/jquery.bxslider.min.js?v11"></script>
    <script src="/js/jquery.sticky.js?v3.1"></script>
    <script src="/js/webview_helper.js?v1.41.2"></script>    
    <script src="/js/scripts.js?v481.2"></script>
    <script src="/js/viewability.js?v22"></script>
    <script src="/js/toggleswitch/on-off-switch.js?x"></script>
    <script src="/js/toggleswitch/on-off-switch-onload.js?y"></script>
    <link rel="stylesheet" href="/js/toggleswitch/on-off-switch.css">    
            <link rel="stylesheet" href="/css/twemoji-awesome.css" />
        <script src="https://www.google.com/recaptcha/api.js?onload=CaptchaCallback&render=explicit" async defer></script>
        
       <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"></script>
    </script>
           <script async src="/js/prebid3.25.0.js?v3"></script>  
<!--        <script async src="/js/prebid1.16.0.js"></script>  -->
        <script>
      var googletag = googletag || {};
      googletag.cmd = googletag.cmd || [];
    </script>
                <script src='https://tagan.adlightning.com/metv/op.js'></script>            
            <script>
        googletag.cmd.push(function() {
            //googletag.pubads().set("adsense_background_color", "FFFFFF");
            googletag.pubads().setTargeting("page", "index.php");
                            googletag.pubads().setTargeting("site", "cbs58.com");
            
            googletag.pubads().setTargeting("page_type", "story");

            
            
                            googletag.pubads().setTargeting("page_url", "story");                
            
                                                googletag.pubads().setTargeting("tag", ["sports","news","national-news","more sports"]);
                                    });
    </script>          
            <script>
                //amazon script
     
        //load the apstag.js library
        !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");
        apstag.init({
             pubID: 'c5284f18-82aa-4599-abba-7e1a65c7b555', //enter your pub ID here as shown above, it must within quotes
             adServer: 'googletag'
        });        
                    
                var sovrnPlacements = new Array();
                sovrnPlacements['cbs58_float_160x600'] = '574564';
        sovrnPlacements['cbs58_side_300x250'] = '574565';
        sovrnPlacements['cbs58_float_300x600'] = '574566';
        sovrnPlacements['cbs58_float_320x50'] = '574567';
        sovrnPlacements['cbs58_top_320x50'] = '574568';
        sovrnPlacements['cbs58_side_320x50'] = '574569';
        sovrnPlacements['cbs58_float_468x60'] = '574570';
        sovrnPlacements['cbs58_top_468x60'] = '574571';
        sovrnPlacements['cbs58_side_468x60'] = '574572';
        sovrnPlacements['cbs58_top_728x90'] = '574573';
        

        var appnexusPlacements = new Array();
                appnexusPlacements['cbs58_float_160x600'] = '13659575';
        appnexusPlacements['cbs58_side_300x250'] = '13659576';
        appnexusPlacements['cbs58_float_300x600'] = '13659577';
        appnexusPlacements['cbs58_float_320x50'] = '13659578';
        appnexusPlacements['cbs58_top_320x50'] = '13659579';
        appnexusPlacements['cbs58_side_320x50'] = '13659580';
        appnexusPlacements['cbs58_float_468x60'] = '13659581';
        appnexusPlacements['cbs58_top_468x60'] = '13659582';
        appnexusPlacements['cbs58_side_468x60'] = '13659583';
        appnexusPlacements['cbs58_top_728x90'] = '13659585';
        
        var rubiconPlacements = new Array();

                rubiconPlacements['cbs58_side_300x250'] = '884094';
        rubiconPlacements['cbs58_float_728x90'] = '884218';
        rubiconPlacements['cbs58_float_300x600'] = '884100';
        rubiconPlacements['cbs58_float_160x600'] = '884098';
        rubiconPlacements['cbs58_top_728x90'] = '884222';
        rubiconPlacements['cbs58_side_728x90'] = '884226';
        rubiconPlacements['cbs58_top_320x50'] = '884270';
        rubiconPlacements['cbs58_side_320x50'] = '884272';
        rubiconPlacements['cbs58_float_320x50'] = '884268';
                
                                    var ADS_SITE_NAME = 'cbs58';
                    var AD_TOPLEVEL = 'CBS_58';                    
                                //weigel ads
                var WADS = WADS || {}; ;
                var TOP_AD = null;
                var MIDDLE_CONTENT_AD = null;
                var MIDDLE_SIDE_AD = null;
                var FLOAT_AD = null;
                var TAKEOVER_AD = null;
                var TWO_COLUMN_MIN_PIXELS = 700;   
                var ALL_SLOTS = new Array();
                                var AD_REFRESH_TIME = 30000;
                                var TOP_AD_VIEW_TIME = 4000;
                var TOP_AD_VIEWED = false;
                var TOP_AD_RENDERED = false;
                var mappingBanner;
                var mappingMiddle;
                var mappingFloat;
                var mappingSide;
                var LOGO_AD = null;
                var WEATHER_AD = null;
                var SPONSOR_AD = null;
                
                WADS.AMAZON_BIDDER_ARR = new Array();
                var pbjs = pbjs || {};
                pbjs.que = pbjs.que || [];
                
                WADS.MIDDLE_AD_SHOULD_RENDER = false;
                WADS.FLOAT_AD_SHOULD_RENDER = false;
                WADS.SIDE_AD_SHOULD_RENDER = false;
                WADS.MIDDLE_AD_RENDERED = false;
                WADS.FLOAT_AD_RENDERED = false;                
                WADS.SIDE_AD_RENDERED = false;
                
                var TAKEOVER_ACTIVE = false;
                WADS.IS_STICKING = false;
                var STICK_TRANSITIONING = false;
                
                var BIDDING_INDEX = 0;
                var BIDDING_AMAZON_READY = new Array();
                var BIDDING_AD_UNITS = new Array();
                var BIDDING_AD_NAMES = new Array();
                var BIDDING_AMAZON_READY = new Array();
                WADS.IS_MOBILE = false;
                
                WADS.loadScript = function( url, callback ) {

                };                
                var screenwidth = window.innerWidth || document.documentElement.clientWidth;
                
                if(screenwidth < 1000){
                    WADS.IS_MOBILE = true;                    
                    var removeInterval = setInterval(function(){
                        if($('.header-nav-mobile').length > 0){
                            console.log("clear interval");
                            $('.header-nav-mobile').css('display', 'flex');
                            $('.header-nav').css('display', 'none');  
                            clearInterval(removeInterval);
                            $('#static_takeover_background').removeClass('static_background_desktop');
                            $('#static_takeover_background').removeClass('static_background_mobile');                            
                        }                       
                    }, 100);
                }else{
                    $('.header-nav-mobile').css('display', 'none');
                    $('.header-nav').css('display', 'block');                    
                    $('.mobile-social-search').css('display', 'none');
                    
                }
                
                //worst hack ever... don't know why on mobile safari header disappears after going from fixed to static
                //tried repainting multiple ways, only this works
                setInterval(function(){
                    if(WADS.IS_MOBILE){
                         $('.mobile-floating-nav').hide().show(0);
                    }
                }, 200);
                 
                
                
                var AD_ELEMENTS = [ADS_SITE_NAME + '_top'];          
                var allSlots = new Array();
                
                googletag.cmd.push(function() {
                    var width = window.innerWidth || document.documentElement.clientWidth;            
                    
                    if(WEBVIEW.is_webview || WEBVIEW.only_content){
                        var sizeArray = [[300, 250], [320, 50]];
                                                    sizeArray = [300, 250];
                        
                        var topAdSlot = googletag.defineSlot('/7089059/' + ADS_SITE_NAME + '/APP_TOP', sizeArray, 'cbs58_app_top').addService(googletag.pubads());       
                        allSlots.push(topAdSlot);
                        var middleAdSlot = googletag.defineSlot('/7089059/' + ADS_SITE_NAME + '/APP_MIDDLE', sizeArray, 'cbs58_app_middle').addService(googletag.pubads());
                        var bottomAdSlot = googletag.defineSlot('/7089059/' + ADS_SITE_NAME + '/APP_BOTTOM', sizeArray, 'cbs58_app_bottom').addService(googletag.pubads());                         
                        allSlots.push(middleAdSlot);
                        allSlots.push(bottomAdSlot);
                        
                        googletag.pubads().enableSingleRequest();
                        googletag.pubads().enableVideoAds();                           
                        googletag.pubads().collapseEmptyDivs();                        
                        googletag.enableServices();                                  
                        googletag.pubads().addEventListener('slotRenderEnded', function(event) {      
                            console.log("refresh app adsizes");
                            console.log(event);
                            refreshAppAdSizes();
                        });    
                        
                        return;
                    }                      
                    
                    //120x50,90x35
                //googletag.defineSlot('/7089059/MeTV/Top', [[320, 100], [728, 90], [330, 50], [980, 250], [320, 50], [468, 60], [980, 90], [330, 250]], 'div-gpt-ad-1593712551901-0').addService(googletag.pubads());                    
                                                                
                        
                    //top ad is serving 980 google adx
                    TOP_AD = googletag.defineSlot('/7089059/' + AD_TOPLEVEL + '/Top', [[980,250], [980,90], [330,250], [728, 90],[468, 60],[330,50],[320,50]], ADS_SITE_NAME + '_top').addService(googletag.pubads());                  

                   
                    ALL_SLOTS.push(TOP_AD);         
                    
                                        //console.log("has side ad");
                    MIDDLE_SIDE_AD = googletag.defineSlot('/7089059/' + AD_TOPLEVEL + '/Middle', [300, 250], ADS_SITE_NAME + '_side').addService(googletag.pubads());
                    ALL_SLOTS.push(MIDDLE_SIDE_AD);                    
                    AD_ELEMENTS.push(ADS_SITE_NAME + '_side');
                                        
                                        //console.log("has middle ad");                        
                    MIDDLE_CONTENT_AD = googletag.defineSlot('/7089059/' + AD_TOPLEVEL + '/Middle', [[728, 90],[468, 60],[320,50],[320,100],[300,250]], ADS_SITE_NAME + '_middle').addService(googletag.pubads());   
                    ALL_SLOTS.push(MIDDLE_CONTENT_AD);
                    AD_ELEMENTS.push(ADS_SITE_NAME + '_middle');
                                                            

                    WADS.mappingBanner = googletag.sizeMapping()
                      .addSize([980, 100], [[980, 250], [728, 90]])
                      .addSize([730, 100], [[330,250],[728,90]])
                      .addSize([470, 100], [[330,250],[468,60]])
                      .addSize([0, 0], [[330,250],[320,50]])
                      .build();

                    TOP_AD.defineSizeMapping(WADS.mappingBanner);

                                        WADS.mappingMiddle = googletag.sizeMapping()
                      .addSize([1160, 200], [[728, 90],[320,50],[320,100]])                    
                      .addSize([900, 200], [[468, 60], [320,50],[320,100]])
                      .addSize([800, 180], [[728, 90],[468, 60],[320,50],[320,100]])
                      .addSize([500, 180], [[468, 60],[320,50],[320,100]])
                      .addSize([0, 0], [[300,250], [320,50],[320,100]])
                      .build();                        
                    MIDDLE_CONTENT_AD.defineSizeMapping(WADS.mappingMiddle);
                                        
                                        WADS.mappingSide = googletag.sizeMapping()
                      .addSize([900, 400], [[300, 250]])
                      .addSize([800, 480], [[728, 90], [300, 250]])
                      .addSize([500, 180], [[468, 60], [300, 250]])
                      .addSize([0, 0], [[300,250], [320,50]])
                      .build();                    
                    MIDDLE_SIDE_AD.defineSizeMapping(WADS.mappingSide);
                                        
                    var theTime = new Date().getTime();
                    WADS.HIDE_FLOATER_FOR_NM = false;
                    if(width < 768){
                        WADS.HIDE_FLOATER_FOR_NM = true;  
                        //if(theTime % 2 == 0){
                        //    WADS.HIDE_FLOATER_FOR_NM = true;
                        //    console.log("using next millennium");
                        //}
                        if (window.ga) {
                        //console.log("sending action: " + action + " val: " + value + " label " + eventLabel);
                          ga('send', 'event', {
                            'eventCategory': "Ads",
                            'eventAction': "NextMillenniumLoaded",
                            'eventLabel': "NextMillenniumLoaded",
                            'eventValue': 1,
                            'nonInteraction': false
                           });
                        }                                                  
                    }
                    
                    AD_ELEMENTS.push(ADS_SITE_NAME + '_float');    
                    FLOAT_AD = googletag.defineSlot('/7089059/' + AD_TOPLEVEL + '/Float', [[300, 600], [300,250], [320, 50], [160,600]], ADS_SITE_NAME + '_float').addService(googletag.pubads());
                    ALL_SLOTS.push(FLOAT_AD);

                    WADS.mappingFloat = googletag.sizeMapping()
                      .addSize([900, 400], [[300, 600], [300,250], [160,600]])
                      .addSize([730, 200], [[728, 90]])
                      .addSize([470, 100], [[468, 60]])
                      .addSize([0, 0], [[320,50]])
                      .build();        
                    FLOAT_AD.defineSizeMapping(WADS.mappingFloat);
                   
                    
                    if(WADS.HIDE_FLOATER_FOR_NM || width > 900){
                        /*
                        var nextScript = "https://powerad.ai/script.js";
                        var sElem = document.createElement( "script" )
                        sElem.type = "text/javascript";
                        sElem.src = nextScript;
                        document.getElementsByTagName( "head" )[0].appendChild( sElem );                        
                        
                        if($('#debug_prebid').length > 0){                         
                            $('#debug_prebid').after('<h4>NEXTMILLENNIUM SCRIPT ADDED</h4>');
                        }*/
                    }
                    
                    ///7089059/MeTV/Middle
                    ///7089059/MeTV/Float
                                                 
                    
                    googletag.pubads().addEventListener('slotRenderEnded', function(event) {  
                        refreshAdSizes();
                        var window_top = $(window).scrollTop();
                        var width = window.innerWidth || document.documentElement.clientWidth;
                        var ad_top = 500;
                        var adWidth = 980;                        
                        var fullAdUnit = event.slot.getAdUnitPath();
                        console.log("rendered " + fullAdUnit);
                        console.log(event);
                        console.log(event.size);
                        if(fullAdUnit == '/7089059/' + AD_TOPLEVEL + '/Top'){
                            //console.log("here here here here");
                            setTimeout(function(){
                                 //failsafe since viewability library isn't working
                                TOP_AD_VIEWED = true;
                            }, 25000);                            
                            if(event.size == null){
                                $('#static_takeover_background').css('display', 'none');
                                /*
                                $('#' + ADS_SITE_NAME + '_top').css('left', leftPos + "px"); 
                                $('#' + ADS_SITE_NAME + '_top').css('top', "0px"); 
                                $('#' + ADS_SITE_NAME + '_top').css('position', "fixed"); 
                                $('#' + ADS_SITE_NAME + '_top').css('margin', '0px');
                                $('#' + ADS_SITE_NAME + '_top').css('padding-top', '0px');
                                $('#' + ADS_SITE_NAME + '_top').css('min-height', '100px');
                                */
                                $('#' + ADS_SITE_NAME + '_top').remove();                                
                                TOP_AD_VIEWED = true;
                                return null;
                            }
                            
                            TOP_AD_RENDERED = true;
                            
                            if(event.size[0] == 980 || event.size[0] == 330){
                                TAKEOVER_ACTIVE = true;
                            }
                            
                            if(!TAKEOVER_ACTIVE){                          
                                //change ad to have promo next to it
                                $("#" + ADS_SITE_NAME + "_promo").appendTo(".header-outer-container");
                                $('.header-outer-container').css('display', 'flex');
                                $('.header-outer-container').css('justify-content', 'space-bewteen');                                
                                $('.header-outer-container').css('width', '100%');
                                $('.header-outer-container').css('max-width', '1200px');
                                $('.header-outer-container').css('margin', '0px auto');                                
                                $("#" + ADS_SITE_NAME + "_promo").css('padding-top', '8px');
                                
                            }else{
                                $('.header-ads').remove();
                            }
                            
                            if(STICK_TRANSITIONING && TAKEOVER_ACTIVE){
                                if(event.size[1] == 90 || event.size[1] == 50 || event.size[1] == 52){    
                                    if(event.size[1] == 50){
                                        adWidth = 330;
                                    }

                                    var leftPos = parseInt((width - adWidth) / 2);

                                    //alert("render event");
                                    if(event.size[1] == 90){
                                        $('#static_takeover_background').addClass('static_background_desktop');
                                        //$(".header-nav-mobile").css('top', '90px');  
                                    }else{
                                        $('#static_takeover_background').addClass('static_background_mobile');                                        
                                        //$(".header-nav-mobile").css('top', '60px');  
                                    }                                    
                                    $('#static_takeover_background').css('top', '0px');
                                    $('#' + ADS_SITE_NAME + '_top').css('left', leftPos + "px"); 
                                    $('#' + ADS_SITE_NAME + '_top').css('top', "0px"); 
                                    $('#' + ADS_SITE_NAME + '_top').css('margin', '0px');
                                    $('#' + ADS_SITE_NAME + '_top').css('padding-top', '0px');                            
                                }
                                else if(event.size[1] == 250 && TAKEOVER_ACTIVE){
                                    if(event.size[0] == 330){
                                        //alert("sticking");
                                    }
                                    $('#' + ADS_SITE_NAME + '_top').css('position', 'static');
                                    $('#' + ADS_SITE_NAME + '_top').css('padding-top', '1rem');    
                                    $('#' + ADS_SITE_NAME + '_top').css('margin', '0px auto');   
                                    $('#static_takeover_background').css('position', 'fixed');
                                    $('#static_takeover_background').css('top', '-90px');       
                                }
                                
                            }
                            STICK_TRANSITIONING = false;
                        }
                        //console.log('Creative with id: ' + event.creativeId +
                        // ' is rendered to slot of size: ' + event.size[0] + 'x' + event.size[1]);                            
                    });      
                    //googletag.pubads().collapseEmptyDivs();
                    //googletag.pubads().enableSingleRequest();
                    googletag.pubads().disableInitialLoad();
                    googletag.pubads().enableVideoAds();                    
                    googletag.enableServices();
                                        
                    
                                            WADS.handleNewBid(['' + ADS_SITE_NAME + '_top']);
                                                                                        $(window).scroll(lazyload_middle_float);
                    lazyload_middle_float();

                    //alert("enabling");
                    //googletag.openConsole();
                });
                                
                
                
                WADS.renderBid = function(theIndex, adUnitNames){
                    var allSlots = new Array();
                    var targetingValues = new Array();
                    for(var x = 0; x < adUnitNames.length; x++){
                        var aName = adUnitNames[x];
                        if(aName == ADS_SITE_NAME + '_top'){
                            allSlots.push(TOP_AD);
                            targetingValues.push("/7089059/" + AD_TOPLEVEL + "/Top");
                        }
                        else if(aName == ADS_SITE_NAME + '_side'){
                            allSlots.push(MIDDLE_SIDE_AD);
                            targetingValues.push("/7089059/" + AD_TOPLEVEL + "/MiddleSide");                            
                        }
                        else if(aName == ADS_SITE_NAME + '_middle'){
                            allSlots.push(MIDDLE_CONTENT_AD);
                            targetingValues.push("/7089059/" + AD_TOPLEVEL + "/MiddleContent");                                                        
                        }
                        else if(aName == ADS_SITE_NAME + '_float'){
                            allSlots.push(FLOAT_AD);
                            targetingValues.push("/7089059/" + AD_TOPLEVEL + "/Float");                                                        
                        }                                                
                    }

                    if(googletag.pubadsReady && BIDDING_AMAZON_READY[theIndex]){
                        pbjs.setTargetingForGPTAsync(targetingValues);          
                        
                        console.log("rendering " + allSlots.length + " ads");
                        console.log(allSlots);                        
                        googletag.pubads().refresh(allSlots, {
                            changeCorrelator: true
                        });
                    }else{
                        console.log("waiting for bids");
                        
                        setTimeout(function(){
                            WADS.renderBid(theIndex, adUnitNames);
                        }, 100);
                    }                       
                }
                
                WADS.getMappingSize = function(adName){
                    var width = window.innerWidth || document.documentElement.clientWidth;
                    if(adName == ADS_SITE_NAME + '_top'){
                        /*
                    var mappingBanner = googletag.sizeMapping()
                      .addSize([970, 100], [[970, 250], [728, 90]])
                      .addSize([730, 100], [[330,250],[728,90]])
                      .addSize([470, 100], [[330,250],[468,60]])
                      .addSize([0, 0], [[330,250],[320,50]])
                      .build();                         
                         */
                        if(width >= 980){
                            return "728x90";
                        }
                        else if(width >= 730){
                            return "728x90";
                        }
                        else if(width >= 470){
                            return "468x60";
                        }
                        else{
                            return "330x50";
                        }                        
                    }
                    if(adName == ADS_SITE_NAME + '_middle'){
                        /*
                         *                     var mappingMiddle = googletag.sizeMapping()
                      .addSize([1160, 200], [[728, 90],[300,250], [320,50]])                    
                      .addSize([900, 200], [[468, 60],[300,250], [320,50]])
                      .addSize([800, 180], [[728, 90],[468, 60],[320,50]])
                      .addSize([500, 180], [[468, 60],[320,50]])
                      .addSize([0, 0], [[300,250], [320,50]])
                      .build();                        
                    
                         */
                        if(width >= 1160){
                            return "728x90";
                        }
                        else if(width >= 900){
                            return "468x60";
                        }
                        else if(width >= 800){
                            return "728x90";
                        }
                        else if(width > 500){
                            return "468x60";
                        }   
                        else{
                            return "320x50";
                        }                         
                    }
                    
                    if(adName == ADS_SITE_NAME + '_side'){
                        /*
                          
                        var mappingSide = googletag.sizeMapping()
                      .addSize([900, 400], [[300, 250]])
                      .addSize([800, 480], [[728, 90], [300, 250]])
                      .addSize([500, 180], [[468, 60], [300, 250]])
                      .addSize([0, 0], [[300,250], [320,50]])
                      .build();
                    
                         */
                        if(width >= 900){
                            return "300x250";
                        }
                        else if(width >= 800){
                            return "728x90";
                        }
                        else if(width > 500){
                            return "468x60";
                        }   
                        else{
                            return "320x50";
                        }                         
                    }         
                    
                    if(adName == ADS_SITE_NAME + '_float'){
                        /*
                          
                    var mappingFloat  = googletag.sizeMapping()
                      .addSize([900, 400], [[300, 600], [300,250]])
                      .addSize([730, 200], [[728, 90]])
                      .addSize([470, 100], [[468, 60]])
                      .addSize([0, 0], [[320,50]])
                      .build();   
                         */
                        if(width >= 900){
                            return "300x250";
                        }
                        else if(width >= 800){
                            return "728x90";
                        }
                        else if(width > 500){
                            return "468x60";
                        }   
                        else{
                            return "320x50";
                        }                         
                    }        
                    console.log("unknown ad size " + adName + " at screen width " + width);
                    return null;
                };
                
                WADS.getPlacementId = function(adName, provider){
                    var adSize = WADS.getMappingSize(adName);
                    var nameAndSize = adName + "_" + adSize;
                    var theArray = new Array();
                    if(provider == 'sovrn'){
                        theArray = sovrnPlacements;
                    }
                    else if(provider == 'appnexus'){
                        theArray = appnexusPlacements;
                    }
                    else if(provider == 'rubicon'){
                        theArray = rubiconPlacements;
                    }
                    if(nameAndSize in theArray){
                        return theArray[nameAndSize];
                    }                   
                    return null;
                }
                
                WADS.getPrebidUnits = function(adUnitNames){
                    
                    var allAdUnits = new Array();
                    
                    var getAdObject = function(sName, theSizes, someBids){
                        var myAdUnit = {
                            code: "/7089059/" + sName,
                            mediaTypes: { banner: { sizes: theSizes } },
                            bids: someBids
                        };  
                        return myAdUnit;
                    };
                    
                    for(var x = 0; x < adUnitNames.length; x++){
                        
                        var allBids = new Array();
                        var aName = adUnitNames[x];
                        if(aName != ADS_SITE_NAME + '_top'){
                            continue;
                        }
                        var mappingSize = WADS.getMappingSize(aName);
                        var mappingPartsArr = mappingSize.split('x');
                        var sizeWidth = parseInt(mappingPartsArr[0]);
                        var sizeHeight = parseInt(mappingPartsArr[1]);
                        
                        var sizeArr = [sizeWidth, sizeHeight];
                        var my_sizes = [
                            sizeArr
                        ];                        
                        
                        //console.log("first ad unit name " + aName);
                        var sovrnId = WADS.getPlacementId(aName, 'sovrn');
                        var appnexusId = WADS.getPlacementId(aName, 'appnexus');
                        var rubiconId = WADS.getPlacementId(aName, 'rubicon');  
                        //console.log("placment sovrn " + sovrnId);
                        //console.log("placment appnexusId " + appnexusId);
                        //console.log("placment rubiconId " + rubiconId);

                        if(rubiconId != null){
                            var rubiconSite = '181692';
                            if(WADS.getMappingSize(aName).indexOf('320x50') !== -1){
                                //site id is different for mobile
                                rubiconSite = '181694';
                            }                        
                            allBids.push({
                                bidder: 'rubicon',
                                params: {
                                    accountId: '17798',
                                    siteId: rubiconSite,
                                    zoneId: rubiconId
                                }
                            });                    
                        }else{
                            console.log("RUBICON= " + aName + "_" + WADS.getMappingSize(aName) + " ---- was not found to be a bidding unit");
                        }
                        
                        if(sovrnId != null){
                            allBids.push({
                                    bidder: 'sovrn',
                                    params: {
                                        tagid: sovrnId
                                    }
                                });                        
                        }else{
                            console.log("SOVRN= " + aName + "_" + WADS.getMappingSize(aName) + " ---- was not found to be a bidding unit");
                        }
                        
                        if(appnexusId != null){
                            allBids.push({
                                    bidder: 'appnexusAst',
                                    params: {
                                        placementId : appnexusId
                                    }
                                });                        
                        }else{
                            console.log("APPNEXUS= " + aName + "_" + WADS.getMappingSize(aName) + " ---- was not found to be a bidding unit");
                        }
                        var fullSizeName = "";
                        if(aName == ADS_SITE_NAME + '_top'){
                            //fullSizeName = "metvcom_728x90_header";
                            fullSizeName = AD_TOPLEVEL + "/Top";
                        }
                        if(aName == ADS_SITE_NAME + '_side'){
                            fullSizeName = AD_TOPLEVEL + "/MiddleSide";
                        }
                        if(aName == ADS_SITE_NAME + '_middle'){
                            fullSizeName = AD_TOPLEVEL + "/MiddleContent";
                        }
                        if(aName == ADS_SITE_NAME + '_float'){
                            fullSizeName = AD_TOPLEVEL + "/Float";
                        }      
                        console.log("size array ");
                        console.log( my_sizes);
                        console.log(fullSizeName);
                        console.log(allBids);
                                              
                        var adObject = getAdObject(fullSizeName, my_sizes, allBids);
                        console.log("adding ad unit");
                        console.log(adObject);
                        allAdUnits.push(adObject);
                        
                    }

                    return allAdUnits;                   
                };
                
                WADS.getAmazonSlots = function(adUnitNames){
                    var retSlots = new Array();
                    for(var x = 0; x < adUnitNames.length; x++){
                        var adName = adUnitNames[x];
                        var fullName = "/7089059/" + AD_TOPLEVEL + "/Top";
                        var mappingSize = WADS.getMappingSize(adName);
                        var mappingPartsArr = mappingSize.split('x');
                        var sizeWidth = parseInt(mappingPartsArr[0]);
                        var sizeHeight = parseInt(mappingPartsArr[1]);
                        
                        var sizeArr = [sizeWidth, sizeHeight];
                        if(adName == ADS_SITE_NAME + '_top'){
                            fullName = "/7089059/" + AD_TOPLEVEL + "/Top";
                        }
                        if(adName == ADS_SITE_NAME + '_side'){
                            fullName = "/7089059/" + AD_TOPLEVEL + "/Middle";
                        }
                        if(adName == ADS_SITE_NAME + '_middle'){
                            fullName = "/7089059/" + AD_TOPLEVEL + "/Middle";
                        }
                        if(adName == ADS_SITE_NAME + '_float'){
                            fullName = "/7089059/" + AD_TOPLEVEL + "/Float";
                        }
                        
                        var amazonObject = {
                            slotID: adName,
                            slotName: fullName,
                            sizes: [sizeArr]
                        };   
                        retSlots.push(amazonObject);
                    }
                    return retSlots;
                };
                
                function initAdserver(bidIndex){
                    if (pbjs.initAdserverSet) return;
                    pbjs.initAdserverSet = true;
                    //alert("initadserver");
                    googletag.cmd.push(function() {
                        pbjs.que.push(function() {
                            //alert("set targeting");
                            pbjs.setTargetingForGPTAsync();
                        });
                    });                           
                }
                
                WADS.handleNewBid = function(adUnitNames){
                    
                    BIDDING_AMAZON_READY.push(false);
                    var arrIndex = BIDDING_INDEX;
                    BIDDING_INDEX++;
                    
                    var AMAZON_SLOTS = WADS.getAmazonSlots(adUnitNames);
                    //console.log("DOING BID " + BIDDING_INDEX);
                    //console.log("amazon slots");
                    //console.log(AMAZON_SLOTS);
                    
                    apstag.fetchBids({
                         slots: AMAZON_SLOTS,
                         timeout: 2000
                    }, function(bids) {
                        //console.log("amazon bids");
                        //console.log(bids);
                        // set apstag targeting on googletag, then trigger the first DFP request in googletag's disableInitialLoad integration
                        googletag.cmd.push(function(){
                             //console.log("amazon bids received")
                             apstag.setDisplayBids();
                             BIDDING_AMAZON_READY[arrIndex] = true;
                             //googletag.pubads().refresh();
                        });
                    });     
                    
                    var renderReady = function(){
                        //alert("render is ready")
                        
                        //debug prebid... remove after debugging
                        var responses = pbjs.getBidResponses();
                        //console.log("prebid responses bid " + arrIndex);
                        //console.log(responses);                        
                        WADS.renderBid(arrIndex, adUnitNames);
                    };
                                
                    initAdserver(BIDDING_INDEX);                    
                    pbjs.que.push(function() {
                        //console.log("now get current units");
                        //console.log(adUnitNames);
                        var currentUnits = WADS.getPrebidUnits(adUnitNames);
                        //console.log("prebid units");
                        //console.log(currentUnits);
                        pbjs.setConfig({ priceGranularity: "dense" });
                        pbjs.addAdUnits(currentUnits);
                        pbjs.requestBids({
                            bidsBackHandler: renderReady
                        });
                    });                                                       
                }
                
                function lazyload_middle_float(){
                    var scrollBottom = parseInt($(window).scrollTop() + window.innerHeight);
                    var scrollTop = $(window).scrollTop();
                    
                    if($('#float_anchor').length > 0){
                        var float_top = parseInt($('#float_anchor').offset().top);
                        var float_bottom = parseInt($('#float_anchor').offset().top) + 600;
                        var topDiff = Math.abs(float_top - scrollTop);
                        var bottomDiff = Math.abs(float_bottom - scrollBottom);
                        var width = window.innerWidth || document.documentElement.clientWidth;                            

                        if(topDiff < 500 || bottomDiff < 200 || (float_top > scrollTop && float_top < scrollBottom) || width < 900){
                            if(!WADS.FLOAT_AD_SHOULD_RENDER){
                                WADS.FLOAT_AD_SHOULD_RENDER = true;
                                                                    WADS.handleNewBid([ ADS_SITE_NAME + '_float']);                                                    
                                                            }                        
                        }
                    }
                    
                    if($('#' + ADS_SITE_NAME + '_middle').length > 0){
                        var middle_top = parseInt($('#' + ADS_SITE_NAME + '_middle').offset().top);
                        var middle_bottom = parseInt($('#' + ADS_SITE_NAME + '_middle').offset().top) + 90;
                        var middleTopDiff = Math.abs(middle_top - scrollTop);
                        var middleBottomDiff = Math.abs(middle_bottom - scrollBottom);                    
                        if(middleTopDiff < 1000 || middleBottomDiff < 200 || (middle_top > scrollTop && middle_top < scrollBottom)){
                            if(!WADS.MIDDLE_AD_SHOULD_RENDER){
                                //alert("render middle ad");
                                WADS.MIDDLE_AD_SHOULD_RENDER = true;
                                                                    WADS.handleNewBid(['' + ADS_SITE_NAME + '_middle']);                                                    
                                                            }                        
                        }                    
                    }
                    if($('#' + ADS_SITE_NAME + '_side').length > 0){
                        var middle_top = parseInt($('#' + ADS_SITE_NAME + '_side').offset().top);
                        var middle_bottom = parseInt($('#' + ADS_SITE_NAME + '_side').offset().top) + 90;
                        var middleTopDiff = Math.abs(middle_top - scrollTop);
                        var middleBottomDiff = Math.abs(middle_bottom - scrollBottom);                    
                        if(middleTopDiff < 1000 || middleBottomDiff < 200 || (middle_top > scrollTop && middle_top < scrollBottom)){
                            if(!WADS.SIDE_AD_SHOULD_RENDER){
                                WADS.SIDE_AD_SHOULD_RENDER = true;
                                                                    WADS.handleNewBid([ADS_SITE_NAME + '_side']);                                                    
                                                            }                        
                        }                    
                    }                    
                    
                    
                }
            
            $(document).ready(function(){
                if(WEBVIEW.is_webview || WEBVIEW.only_content){
                    return;
                }
                oav = new OpenAdViewability();
                oav.DEBUG_MODE = true;
                
                
                for(var x = 0; x < AD_ELEMENTS.length; x++){
                    var adDiv = AD_ELEMENTS[x];
                    //console.log("setting up slot " + adDiv);
                    var ad_elem = document.getElementById(adDiv);
                    
                    if($('#' + adDiv).length <= 0){
                        continue;
                    }
                    
                    oav.checkViewability(ad_elem, function(check) {
                        //console.log("for ad ");
                        //console.log(ad_elem);
                        //console.log("Status: " + check.viewabiltyStatus)
                        //console.log("Percent: " + check.percentViewable);
                        //console.log("Duration: " + check.duration);
                        //console.log("ad id " + check.ad_id);
                        if(check.ad_id == ADS_SITE_NAME + '_top'){
                            if(!TOP_AD_RENDERED){
                                //console.log("resetting duration");
                                check.duration = 0;
                            }
                            //console.log("Status: " + check.viewabiltyStatus)
                            //console.log("Percent: " + check.percentViewable);
                            //console.log("Duration: " + check.duration);
                            //console.log("ad id " + check.ad_id);                            
                            if(check.duration > TOP_AD_VIEW_TIME && !TOP_AD_VIEWED){
                                //console.log("setting TOP_AD_VIEWED true");
                                TOP_AD_VIEWED = true;
                                //setTimeout(function(){                                                                        
                                //}, 3000);
                                //console.log("remove - we will never be viewed");
                            }
                        }
                        
                        if(check.ad_id == ADS_SITE_NAME + '_side'){
                                
                            //console.log("Status: " + check.viewabiltyStatus)
                            //console.log("Percent: " + check.percentViewable);
                            //console.log("Duration: " + check.duration);
                            //console.log("ad id " + check.ad_id);                           
                            
                        }
                        
                        
                        
                        if(check.duration > 0 && (check.duration % AD_REFRESH_TIME) == 0){
                            console.log("refreshing ad " + check.ad_id);
                            var adSlot = null;
                            if(check.ad_id == ADS_SITE_NAME + '_top'){
                                //only refresh if not a sticky 
                                if(!TAKEOVER_ACTIVE){
                                    googletag.cmd.push(function() {
                                        
                                      TOP_AD.defineSizeMapping(WADS.mappingBanner);
                                                                                WADS.handleNewBid([ADS_SITE_NAME + '_top']);                     
                                                                          });                                                            
                                }
                            }
                            if(check.ad_id == ADS_SITE_NAME + '_side'){
                                googletag.cmd.push(function() {
                                  MIDDLE_SIDE_AD.defineSizeMapping(WADS.mappingSide);                                    
                                  //
                                    
                                                                                WADS.handleNewBid([ADS_SITE_NAME + '_side']);                     
                                                                        
                                    
                                });                                                            
                            }
                            if(check.ad_id == ADS_SITE_NAME + '_middle'){
                                googletag.cmd.push(function() {
                                  MIDDLE_CONTENT_AD.defineSizeMapping(WADS.mappingMiddle);
                                                                                WADS.handleNewBid([ADS_SITE_NAME + '_middle']);                 
                                                                        
                                                    

                                    //
                                });                                                            
                            }
                            if(check.ad_id == ADS_SITE_NAME + '_float'){
                                googletag.cmd.push(function() {
                                    //console.log("float mapping");
                                    //console.log(WADS.mappingFloat);
                                  FLOAT_AD.defineSizeMapping(WADS.mappingFloat);
                                                                                WADS.handleNewBid([ADS_SITE_NAME + '_float']);                 
                                                                        
                                                                               
                                  
                                });                                                            
                            }
                            
                        }
                        
                        //if(check.viewabiltyStatus){
                        //    document.getElementById('viewability_status').innerHTML = 'Viewability Achieved: Yes';
                        //    document.getElementById('viewability_status').className = "green"
                        //}
                        //document.getElementById('viewability_percentage').innerHTML = 'Percentage Viewable: ' + (check.percentViewable >=0 ? check.percentViewable : 0);
                        //document.getElementById('duration').innerHTML = 'Viewable Duraration: ' + (check.duration <=1000 ? check.duration : 1000) + 'ms';
                    });                
                    
                }
                
            });
            
            </script>
            
                
                <script>
                    var STATIC_SWITCH_TIME = 0;
                    $(document).ready(function(){      
                        if(!WEBVIEW.is_webview && !WEBVIEW.only_content){
                            $(window).scroll(floating_fixed_takeover);
                            floating_fixed_takeover();                
                            refreshAdSizes();     

                            setInterval(function(){
                                refreshAdSizes();
                                floating_fixed_takeover();                                            
                            }, 1000);
                        }
                    });
                    
                    function floating_fixed_takeover(){
                        var window_top = $(window).scrollTop();
                        var width = window.innerWidth || document.documentElement.clientWidth;
                        var ad_top = 500;
                        var adWidth = 728;
                        var floatStartHeight = 300;
                        var windowTopLimit = 100;                        
                        if(TAKEOVER_ACTIVE){
                            floatStartHeight = 257;
                            adWidth = 980;
                            windowTopLimit = 100;
                        }else{                            
                            if(width < 730){
                                adWidth = 468;
                            }
                            if(width < 470){
                                adWidth = 330;
                            }
                            if(WADS.IS_MOBILE){
                                floatStartHeight = 160;
                            }
                        }
                        if($('#static_anchor').length <= 0){
                            return;
                        }
                        
                        if(window_top > 100 && !TAKEOVER_ACTIVE && TOP_AD_VIEWED){          
                            if(!STICK_TRANSITIONING){ 
                                $('#sticky-wrapper').addClass('is-sticky');        
                                $(".header-nav-mobile").css('top', '0px');
                                $('#main-nav-floating').css('top', '0px');                                       
                
                                if((width > 970 && TAKEOVER_ACTIVE) || width >= 730){
                                    $('#static_takeover_background').css('position', 'fixed');
                                    $('#static_takeover_background').css('top', '-90px');
                                    $('#' + ADS_SITE_NAME + '_top').css('top', '-90px');   
                                }else{
                                    $('#static_takeover_background').css('top', '-60px');
                                    $('#' + ADS_SITE_NAME + '_top').css('top', '-60px');                                       
                                }
                                if(WADS.IS_MOBILE){
                                    $(".header-nav").css('display', 'none');                                                                      
                                    $(".header-nav-mobile").css('position', 'fixed');                                      
                                    $(".header-nav-mobile").css('top', '0px');  
                                    $(".header-nav-mobile").addClass('nav-transition');
                                }else{
                                    $("#main-nav-floating").css('position', 'fixed');
                                    $("#main-nav-floating").css('display', 'block');
                                    $("#main-nav-floating").css('top', '0px');
                                    $("#main-nav-floating").addClass('nav-transition');
                                    
                                }        
                                
                                    
                                setTimeout(function(){
                                    $('#static_takeover_background').removeClass('static_background_desktop');
                                    $('#static_takeover_background').removeClass('static_background_mobile');
                                    if(WADS.IS_MOBILE){
                                        $('#static_spacer').css('height', "0px");   
                                    }else{
                                        if(!TAKEOVER_ACTIVE){
                                            $('#static_spacer').css('height', "90px");                                          
                                        }else{                                            
                                            $('#static_spacer').css('height', "250px");                                          
                                        }
                                    }
                                    $('#' + ADS_SITE_NAME + '_top').css('margin', '0px auto');   
                                    $('#' + ADS_SITE_NAME + '_top').css('padding-top', '1rem');    
                                    $('#' + ADS_SITE_NAME + '_top').css('position', 'static');                                                                        
                                }, 1000);
                                WADS.IS_STICKING = true;
                                //STICK_TRANSITIONING = false;   
                                //WADS.IS_STICKING = false;
                                
                                /*
                                $('.mobile-floating-nav').css('display', 'block');
                                $("#main-nav-floating").removeClass('nav-transition');
                                $(".header-nav-mobile").removeClass('nav-transition');     
                                $('#main-nav-floating').css('top', '0px');
                                if((width > 980 && TAKEOVER_ACTIVE) || width >= 730){
                                    $('#' + ADS_SITE_NAME + '_top').css('top', '-90px');
                                }else{
                                    $('#' + ADS_SITE_NAME + '_top').css('top', '-60px');
                                }
                                
                                $("#main-nav-floating").css('position', 'static');
                                $(".header-nav-mobile").css('position', 'static');                                   
                                $('#static_takeover_background').removeClass('static_background_desktop');
                                $('#static_takeover_background').removeClass('static_background_mobile');
                                $('.header-nav-search').css('color', '#0e256b');
                                $('#main-nav-floating').css('margin-top', '0px');
                                
                                $('#sticky-wrapper').removeClass('is-sticky');

                                //$('.header-nav-mobile').removeClass('.header-nav-mobile');
                                $('.mobile-floating-nav').css('position', 'static');
                                $('.mobile-floating-nav').css('display', 'flex');
                                $('.mobile-floating-nav').removeClass('.sticky-mobile-nav');
                                
                                setTimeout(function(){
                                    if(TAKEOVER_ACTIVE){
                                           googletag.cmd.push(function() {
                                               googletag.pubads().clear([TOP_AD]);

                                               var mappingBanner = googletag.sizeMapping()
                                                 .addSize([980, 100], [[980, 250]])
                                                 .addSize([730, 100], [[330,250]])
                                                 .addSize([470, 100], [[330,250]])
                                                 .addSize([0, 0], [[330,250]])
                                                 .build();

                                               TOP_AD.defineSizeMapping(mappingBanner);
                                               googletag.pubads().refresh([TOP_AD]);
                                               $('#static_spacer').css('height', "0px");

                                           });
                                       }else{
                                           $('#' + ADS_SITE_NAME + '_top').css('top', '0px');
                                           $('#' + ADS_SITE_NAME + '_top').css('position', 'static');
                                           $('#' + ADS_SITE_NAME + '_top').css('padding-top', '1rem');    
                                           $('#' + ADS_SITE_NAME + '_top').css('margin', '0px auto');   
                                           $('#static_takeover_background').css('position', 'fixed');
                                           if((width > 980 && TAKEOVER_ACTIVE) || width >= 730){
                                               $('#static_takeover_background').css('top', '-90px');
                                           }else{
                                               $('#static_takeover_background').css('top', '-60px');
                                           }
                                           STICK_TRANSITIONING = false;   
                                           $('.mobile-floating-nav').css('position', 'static');
                                           $('.mobile-floating-nav').css('display', 'flex');
                                           $('.mobile-floating-nav').removeClass('.sticky-mobile-nav');        
                                           $('#static_spacer').css('height', "0px");
                                       }                                                      
                                       
                                }, 10);
                                WADS.IS_STICKING = false;
                                */
                            }
                        }                                                               
                        else if(window_top > floatStartHeight){
                            //console.log("should float");
                            //smaller height ad is sticking    
                            //this is needed because it's coming here before ad is rendered
                            if(!TOP_AD_RENDERED){
                                
                                //console.log("force render");                                
                                //$('#metv_top').css('top', '-250px');
                                                                  
                                setTimeout(function(){
                                    //$('#' + ADS_SITE_NAME + '_top').css('position', 'fixed'); 
                                    floating_fixed_takeover();
                                }, 1000);
                                return;
                            }
                            else if(!WADS.IS_STICKING && !STICK_TRANSITIONING){ 
                                //$('#main-nav-floating').css('background', 'white');
                                if(!TOP_AD_VIEWED || TAKEOVER_ACTIVE){   
                                    
                                    STICK_TRANSITIONING = true;             
                                    if(WADS.IS_MOBILE){
                                       
                                        $(".header-nav").css('display', 'none');                                                                      
                                        $(".header-nav-mobile").css('position', 'fixed');                                      
                                        $(".header-nav-mobile").css('top', '0px');  
                                        $(".header-nav-mobile").addClass('nav-transition');
                                    }else{
                                        $("#main-nav-floating").css('position', 'fixed');
                                        $("#main-nav-floating").css('display', 'block');
                                        $("#main-nav-floating").css('top', '0px');
                                        $("#main-nav-floating").addClass('nav-transition');
                                    }
                                    $('#static_takeover_background').css('display', 'block');                                     
                                    
                                    if(WADS.IS_MOBILE){
                                        $('#static_spacer').css('height', "0px");   
                                    }else{
                                        if(TAKEOVER_ACTIVE){
                                            $('#static_spacer').css('height', "250px");                                          
                                        }else{
                                            $('#static_spacer').css('height', "90px"); 
                                        }
                                    }
                                    
                                    if((width > 980 && TAKEOVER_ACTIVE) || width >= 730){
                                        $('#' + ADS_SITE_NAME + '_top').css('top', '-90px');
                                        $('#' + ADS_SITE_NAME + '_top').css('position', 'fixed');
                                        //alert("ADSSITE NAME " + ADS_SITE_NAME);
                                        if(!WADS.IS_MOBILE){
                                          $('#main-nav-floating').css('width', '100%');  
                                          $('#main-nav-floating').css('margin-top', '0px');                                          
                                        }
                                    }else{
                                        $('#sticky-wrapper').addClass('is-sticky');            
                                        if(!WADS.IS_MOBILE){                                     
                                            $('#main-nav-floating').css('margin-top', '0px');                                            
                                            $('#' + ADS_SITE_NAME + '_top').css('top', '-90px');
                                           $('#' + ADS_SITE_NAME + '_top').css('position', 'fixed');                                            
                                            $('#static_takeover_background').css('top', "-90px");
                                            $('#static_takeover_background').css('height', "90px");                                                                            
                                            $('.header-nav-search').css('color', 'white');
                                            $('#static_spacer').css('height', "260px");
                                        }else{                                            
                                            $('#' + ADS_SITE_NAME + '_top').css('top', '-60px');
                                          $('#' + ADS_SITE_NAME + '_top').css('position', 'fixed');                                            
                                            $('#static_takeover_background').css('top', "-60px");
                                            $('#static_takeover_background').css('height', "60px");
                                            if(TAKEOVER_ACTIVE){
                                                $('#static_spacer').css('height', "320px");
                                            }else{
                                                $('#static_spacer').css('height', "120px");                                                
                                            }
                                        }
                                    }
                                    //$('#metv_top').addClass('stick');
                                    $('#' + ADS_SITE_NAME + '_top').css('display', 'none');                                    
                                }else if(TOP_AD_VIEWED && !TAKEOVER_ACTIVE){
                                    if(WADS.IS_MOBILE){
                                        $(".header-nav").css('display', 'none');                                                                      
                                        $(".header-nav-mobile").css('position', 'fixed');                                      
                                        $(".header-nav-mobile").css('top', '0px');  
                                        $(".header-nav-mobile").addClass('nav-transition');
                                    }else{
                                        $("#main-nav-floating").css('position', 'fixed');
                                        $("#main-nav-floating").css('display', 'block');
                                        $("#main-nav-floating").css('top', '0px');
                                        $("#main-nav-floating").addClass('nav-transition');
                                    }                                    
                                }
                                
                                //let logo transition occur
                                var transTime = 100;
                                if(TAKEOVER_ACTIVE){
                                    transTime = 10;
                                }
                                setTimeout(function(){
                                    if(TAKEOVER_ACTIVE){
                                        setTimeout(function(){
                                            googletag.cmd.push(function() { 
                                                //console.log("requesting top takeover")
                                                googletag.pubads().clear([TOP_AD]);
                                                $('#' + ADS_SITE_NAME + '_top').css('display', 'block');
                                                WADS.IS_STICKING = true;      
                                                if(!WADS.IS_MOBILE){
                                                    $('.mobile-floating-navdesktop').hide();
                                                    $('.header-nav .header-social-search').hide();
                                                }
                                                $('#sticky-wrapper').addClass('is-sticky');
                                                var mappingSmallTakeover = googletag.sizeMapping()
                                                  .addSize([980, 100], [[980, 90]])
                                                  .addSize([730, 100], [[330,50]])
                                                  .addSize([470, 100], [[330,50]])
                                                  .addSize([0, 0], [[330,50]])
                                                  .build();                

                                              TOP_AD.defineSizeMapping(mappingSmallTakeover);                                              
                                              googletag.pubads().refresh([TOP_AD]);

                                            });  
                                            setTimeout(function(){
                                                if(!WADS.IS_MOBILE){
                                                   $('#main-nav-floating').css('top', '90px');                                               
                                                }else{
                                                   $(".header-nav-mobile").css('top', '60px');  
                                                }
                                            }, 150);                                            
                                            
                                        }, 10);
                                    }else{
                                        if(STICK_TRANSITIONING){
                                            //console.log("not takeover");
                                            var leftPos = parseInt((width - adWidth) / 2);
                                             $('#' + ADS_SITE_NAME + '_top').css('display', 'block');
                                             if(!TOP_AD_VIEWED){
                                                 setTimeout(function(){
                                                    $('#' + ADS_SITE_NAME + '_top').css('top', '0px');   
                                                    $('#' + ADS_SITE_NAME + '_top').css('left', leftPos + "px");                                      
                                                    $('#' + ADS_SITE_NAME + '_top').css('margin', '0px');
                                                    $('#' + ADS_SITE_NAME + '_top').css('padding-top', '0px');                                                                                                       
                                                 }, 50);
                                             }
                                             WADS.IS_STICKING = true;   
                                             $('#sticky-wrapper').addClass('is-sticky');
                                             if(width < 730){
                                                $('#static_takeover_background').addClass('static_background_mobile');
                                             }
                                             else{
                                                 $('#static_takeover_background').addClass('static_background_desktop');
                                             }
                                            


                                            $(".header-nav-mobile").css('position', 'fixed');                                              
                                            
                                            STICK_TRANSITIONING = false;                
                                            //' + ADS_SITE_NAME + '_top needs timeout for some reason to transition
                                            setTimeout(function(){
                                                setTimeout(function(){
                                                     if(!WADS.IS_MOBILE){
                                                        $('#main-nav-floating').css('top', '90px');                                               
                                                     }else{
                                                        $(".header-nav-mobile").css('top', '60px');  
                                                     }
                                                 }, 10);                                                       
                                                if(((width > 980 && TAKEOVER_ACTIVE) || width >= 730) && !TOP_AD_VIEWED){
                                                    $("#main-nav-floating").css('top', '90px'); 
                                                    //setInterval(function(){
                                                    //    $("#main-nav-floating").css('top', '90px');                                                         
                                                    //}, 1000);
                                                }else{
                                                    if(!TOP_AD_VIEWED){                                                    
                                                        $("#main-nav-floating").css('top', '60px'); 
                                                    }else{                                                    
                                                        $("#main-nav-floating").css('top', '0px'); 
                                                    }
                                                }
                                                $('#static_takeover_background').css('top', '0px');
                                                                                                
                                            }, 100);                                               
                                        }
                                    }
                                    //$('.mobile-floating-nav').css('z-index', '2147483647'); 

                                }, transTime);
                            }
                        }                        
                        else if((window_top < windowTopLimit && !WADS.IS_MOBILE) || (window_top < 150 && WADS.IS_MOBILE)){
                            //console.log("less than 100");
                            if(WADS.IS_STICKING && !STICK_TRANSITIONING){   
                                //console.log("IS TRANSITIONING");
                                if(!TAKEOVER_ACTIVE){
                                    $('#static_spacer').css('height', "0px");
                                }else{
                                    $('#static_spacer').css('height', "150px");                                    
                                }
                                STICK_TRANSITIONING = true;
                                $("#main-nav-floating").removeClass('nav-transition');
                                $(".header-nav-mobile").removeClass('nav-transition');     
                                $(".header-nav-mobile").css('top', '0px');
                                $('#main-nav-floating').css('top', '0px');
                                if((width > 980 && TAKEOVER_ACTIVE) || width >= 730){
                                    $('#' + ADS_SITE_NAME + '_top').css('top', '-90px');
                                }else{
                                    $('#' + ADS_SITE_NAME + '_top').css('top', '-60px');
                                }
                                if(!WADS.IS_MOBILE){
                                    $('.mobile-floating-navdesktop').show();
                                    $('.header-nav .header-social-search').show();
                                }
                                
                                $("#main-nav-floating").css('position', 'static');
                                $(".header-nav-mobile").css('position', 'static');                                   
                                $('#static_takeover_background').removeClass('static_background_desktop');
                                $('#static_takeover_background').removeClass('static_background_mobile');
                                                               
                                $('.header-nav-search').css('color', '#0e256b');
                                $('#main-nav-floating').css('margin-top', '0px');
                                $('#static_spacer').css('height', "0px");
                                $('#sticky-wrapper').removeClass('is-sticky');
                                
                                $('.mobile-floating-nav').css('position', 'static');
                                $('.mobile-floating-nav').css('display', 'flex');
                                $('.mobile-floating-nav').removeClass('.sticky-mobile-nav');   
                                

                                //$('.header-nav-mobile').removeClass('.header-nav-mobile');
                                //$('.header-nav-mobile').css('top', '0px');
                                
                                //$('#static_takeover_background').css('display', 'none');
                                //$('#' + ADS_SITE_NAME + '_top').css('position', 'static');
                                //$('#' + ADS_SITE_NAME + '_top').css('padding-top', '1rem');    
                                //$('#' + ADS_SITE_NAME + '_top').css('margin', '0px auto');    
                                if(TAKEOVER_ACTIVE){
                                    googletag.cmd.push(function() {

                                        WADS.IS_STICKING = false;
                                        googletag.pubads().clear([TOP_AD]);

                                        var mappingBanner = googletag.sizeMapping()
                                          .addSize([980, 100], [[980, 250]])
                                          .addSize([730, 100], [[330,250]])
                                          .addSize([470, 100], [[330,250]])
                                          .addSize([0, 0], [[330,250]])
                                          .build();

                                        TOP_AD.defineSizeMapping(mappingBanner);
                                        googletag.pubads().refresh([TOP_AD]);

                                    });
                                }else{
                                    if(WADS.IS_MOBILE){
                                        $('#' + ADS_SITE_NAME + '_top').css('top', '-60px');
                                    }else{
                                        $('#' + ADS_SITE_NAME + '_top').css('top', '-90px');                                        
                                    }
                                    $('#' + ADS_SITE_NAME + '_top').css('position', 'static');
                                    $('#' + ADS_SITE_NAME + '_top').css('padding-top', '1rem');    
                                    $('#' + ADS_SITE_NAME + '_top').css('margin', '0px auto');   
                                    $('#static_takeover_background').css('position', 'fixed');
                                    if((width > 980 && TAKEOVER_ACTIVE) || width >= 730){
                                        $('#static_takeover_background').css('top', '-90px');
                                    }else{
                                        $('#static_takeover_background').css('top', '-60px');
                                    }
                                    STICK_TRANSITIONING = false;   
                                    WADS.IS_STICKING = false;
                                }
                                setTimeout(function(){
                                    $('#static_takeover_background').css('display', 'none');  
                                    $('.mobile-floating-nav').css('position', 'static');    
                                    //$('.mobile-floating-nav').css('z-index', '2147483646'); 

                                }, 100);
                                
                            }                                                        
                        }
                                 
                    }

                </script>
                <script>
                function DEBUG_PREBID(){
                    console.log("debugging prebid");
                    var responses = pbjs.getBidResponses();
                    var winners = pbjs.getAllWinningBids();
                    var output = [];
                    Object.keys(responses).forEach(function(adUnitCode) {
                      var response = responses[adUnitCode];
                      response.bids.forEach(function(bid) {
                        output.push({
                          bid: bid,
                          adunit: adUnitCode,
                          adId: bid.adId,
                          bidder: bid.bidder,
                          time: bid.timeToRespond,
                          cpm: bid.cpm,
                          msg: bid.statusMessage,
                          rendered: !!winners.find(function(winner) {
                              if(winner.adId==bid.adId){
                                  alert("bid was won!" + adUnitCode);
                              }
                            return winner.adId==bid.adId;
                          })
                        });
                      });
                    });
                    if (output.length) {
                      if (console.table) {
                        console.table(output);
                      } else {
                        for (var j = 0; j < output.length; j++) {
                          console.log(output[j]);
                        }
                      }
                    } else {
                      console.warn('NO prebid responses');
                    }            
                };
                </script>
                
                

    
            <!-- Google Analytics -->
                                    
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-37566084-1', 'auto');
            ga('send', 'pageview');
        </script>
        



        <!-- Begin comScore Tag -->
        <script>
            var _comscore = _comscore || [];
            _comscore.push({ c1: "2", c2: "23481286" });
            (function() {
                var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
                s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
                el.parentNode.insertBefore(s, el);
            })();
        </script>
        <noscript>
            <img src="http://b.scorecardresearch.com/p?c1=2&c2=23481286&cv=2.0&cj=1" />
        </noscript>
        <!-- End comScore Tag -->    
        

                             
                        
            <script>
            !function(n){if(!window.cnxps){window.cnxps={},window.cnxps.cmd=[];var t=n.createElement('iframe');t.display='none',t.onload=function(){var n=t.contentWindow.document,c=n.createElement('script');c.src='//cd.connatix.com/connatix.playspace.js',c.setAttribute('async','1'),c.setAttribute('type','text/javascript'),n.body.appendChild(c)},n.head.appendChild(t)}}(document);
            </script>
            
                        

    <!-- Traffic Widget -->
    
    <!-- Nativo ads -->
                        <script src="//s.ntv.io/serve/load.js" async></script>
                            <!-- log errors - only if flag set -->
        
    
        <!-- connatix video player ads -->
<script>
!function(n){if(!window.cnxps){window.cnxps={},window.cnxps.cmd=[];var t=n.createElement('iframe');t.display='none',t.onload=function(){var n=t.contentWindow.document,c=n.createElement('script');c.src='//cd.connatix.com/connatix.playspace.js',c.setAttribute('async','1'),c.setAttribute('type','text/javascript'),n.body.appendChild(c)},n.head.appendChild(t)}}(document);
</script>
    
         
        
        <script>
            var WEBVIEW = WEBVIEW || {};
            WEBVIEW.is_webview = false;
            WEBVIEW.log_stats = function(){
            
            };
            WEBVIEW.full_url = '';
            WEBVIEW.only_content = false;
            WEBVIEW.access_token = '';
            WEBVIEW.market_id = '';
            WEBVIEW.app_location_enabled = false;
            WEBVIEW.version = 1;     
            WEBVIEW.site_name = 'cbs58';
            WEBVIEW.HEIGHT = 0;
            WEBVIEW.REMOVE_FOLLOW_TAG = false;
            WEBVIEW.SERVICES_URL = 'https://services.weigelbroadcasting.com/';
            
            if(WEBVIEW.only_content){
                WEBVIEW.heightChangeHandler();                
            }

            var WCS = WCS || {};
            WCS.isHomepage = false;
            WCS.CAPTCHA_SITE_KEY = '6LfwBUQUAAAAALPuABuclB4DSrMCClNMTn6204M7';
            var WVM = WVM || {};
            var WADS = WADS || {};       
            WADS.DISABLED = false;
        </script>    
</head>
<body>
	<div id="fb-root"></div>
	<script>
            var theAppId = "808704082583441";
            
		(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=" + theAppId;
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
    </script>

    <!-- Twitter -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

            <style>
.market-alert-container {
	background-color: #009ec6;
	background-position: 50%;
	text-align: center;
}

.market-alert-container .market-alert-text {
	display: flex;
	flex-direction: column;
	color: white;
	font-size: 1.8rem;
	line-height: 2.2rem;
	width: 95%;
	margin: 0 auto;
	letter-spacing: 0.3px;
}

.market-alert-container .market-alert-text a {
	color: #000000;
	font-weight: bold;
}

.market-alert-text p {
	margin: 1.5rem 0 1.5rem;
}

i.market-alert-close {
	color: white;
	cursor: pointer;
	position: relative;
	font-size: 2rem;
	padding: 0.2rem 0.45rem;
	float: right;
	top: 1rem;
	right: 1rem;
}

i.market-alert-close:hover,
i.market-alert-close:focus {
	color: black;
}

.market-alert-container + .market-alert-container {
	border-top: 1px solid;
}

.market-alert-container	.btn-primary {
	display: inline-block;
	font-size: 1.6rem;
	text-transform: uppercase;
	padding: 1.1rem 5.7rem;
}

.lg-col-wrapper .market-alert-container {
	margin: -3rem 0 5rem;
}

.btn-primary.text-brand-black, .form-wrap input[type="submit"].text-brand-black, .form-wrap button.text-brand-black {
    color: #252525;
}
.btn-primary.white, .form-wrap input[type="submit"].white, .form-wrap button.white {
    background-color: #fff;
}
.btn-primary, .form-wrap input[type="submit"], .form-wrap button {
    color: #fff;
    font-size: 2rem;
    font-weight: 600;
    text-decoration: none;
    text-align: center;
    border: 2px solid transparent;
    border-radius: 50px;
    white-space: nowrap;
    padding: 1.3rem 2.8rem;
    margin-bottom: 1rem;
    opacity: 1;
}

.btn-primary.inverted-white:hover, .form-wrap input[type="submit"].inverted-white:hover, .form-wrap button.inverted-white:hover {
    color: #fff;
    border: 2px solid #fff;
    -webkit-filter: none;
    filter: none;
    background: transparent;
}

.btn-primary:hover, .form-wrap input[type="submit"]:hover, .form-wrap button:hover, .btn-primary:focus, .form-wrap input[type="submit"]:focus, .form-wrap button:focus, .btn-primary:active, .form-wrap input[type="submit"]:active, .form-wrap button:active {
    -webkit-filter: brightness(115%);
    filter: brightness(115%);
    text-decoration: none;
}

@media screen and (max-width: 900px) {
	.market-alert-container .rescan-alert-text {
		font-size: 2rem;
	}
}
</style>

<script>
    $(document).ready(function(){
        $('.market-alert-close').on('click', function(e){
            if(e.target) targ = e.target;
            else if (e.srcElement) targ = e.srcElement;
            if(targ.nodeType==3) targ = targ.parentNode;

            var alt_box = $(targ.parentNode);

            alt_box.fadeOut();

        });        
    });
</script>



            <header>
                <div class="header-outer-container lg-col-wrapper-no-space header-ads-container clearfix">
                                            <div id="static_anchor"></div>
                        <div id="cbs58_top" class="leaderboard-wrap">
                            <script type="text/javascript">
                                googletag.cmd.push(function() { googletag.display('cbs58_top'); });
                            </script>
                        </div>                    
                        <div id="static_spacer"></div>
                        <style>
                            .leaderboard-wrap{
                                margin: 0 auto;
                                text-align: center;
                                padding-top: 1rem;
                            }
                            #static_takeover_background{
                                position: fixed;
                                top:-100px;                        
                            }

                            .static_background_desktop{
                                height: 105px;
                                width: 100%;
                                position: fixed;                                 
                                top:-100px;
                                left:0px;
                                z-index: 5000;
                                transition:top 0.6s ease;       
                                                            }
                            .static_background_mobile{
                                height: 60px;
                                width: 100%;
                                top:-60px;
                                left:0px;
                                background: linear-gradient(to right, #0d246f 0%,#134596 10%,#0d246f 100%);
                                position: fixed;
                                z-index: 999999999;
                                transition:top 0.6s ease;    
                            }              
                            
                            .nav-transition{
                                transition:top 1.0s ease; 
                                width: 100%;
                            }

                            #cbs58_top{
                                z-index: 2147483620;
                                top:-90px;    
                                transition:top 1s ease;                               
                            }

                            .header-nav{
                                top: 0;     
                                transition:top 1s ease;                           
                            }

                            .float-transition {
                              transition: bottom 1s ease;
                              bottom: 0px !important;
                            }           
                            
                            .header-nav-mobile{
                                top:0px;
                                width: 100%;                              
                                display:none;
                                z-index: 999999999999;
                            }
                            
                            .header-mobile-inner{
                                display:flex;
                                justify-content: space-between;                                
                            }
                            @media only screen and (max-width: 900px) {
                                .header-ads-container{
                                    flex-direction: column;                                
                                    background: linear-gradient(to right, #0d246f 0%,#134596 10%,#0d246f 100%);
                                }
                                #managed_ad{
                                     text-align: center;   
                                }
                            }
                            
                            .header-ads{
                                display:none;
                            }
                           

                            @keyframes repaint {

                                from {
                                    left: 0px;
                                }
                                to {
                                    left: 1px;
                                }

                            }

                            .repaint {
                                background: linear-gradient(to right, #0E2671 0%,#134596 10%,#0D246F 100%);                                
                                /*
                                -webkit-animation: repaint 1000ms;
                                   -moz-animation: repaint 1000ms;
                                    -ms-animation: repaint 1000ms;
                                        animation: repaint 1000ms;
                                        */
                            }       
                            
                            @media only screen and (max-width: 1000px) {
                                .mobile-floating-navdesktop2{
                                    display:none;
                                }
                            }

                        </style>
                        <div id='static_takeover_background' class="static_background_desktop">                        
                        </div>  
                                   
                    <div class="header-row-wrapper">
                    </div>
                </div>
                <nav class="header-nav-mobile main-nav">
                    <div class="section-inner lg-col-wrapper clearfix">
                    <div class="mobile-floating-nav mobile-floating-navdesktop2">
                        <span class="main-nav-menu-btn"><i class="fa fa-bars" aria-hidden="true"></i></span>
                        <a href="/">
                            <img class="logo-stacked logo-stacked-cbs58" src="/images/logo_cbs58_small.png">
                        </a>
                                            <ul>
                                                                                    <li class="submenu-wrap">
                            <a href="/news">News</a>
                                                            <ul class="submenu">
                                    <!-- <li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li> -->
                                    <li><a href="/news">News Home</a></li>
                                                                            <li><a href="/local-news">Local News</a></li>
                                                                            <li><a href="/national-news">National News</a></li>
                                                                            <li><a href="/crime-stoppers">Crime Stoppers</a></li>
                                                                            <li><a href="/everyday-heroes">Natalie’s Everyday Heroes</a></li>
                                                                            <li><a href="/racine-and-me">Racine and Me</a></li>
                                                                            <li><a href="/sunday-morning">Sunday Morning </a></li>
                                                                            <li><a href="/special-report">Special Report</a></li>
                                                                            <li><a href="https://cbs58.com/hometown-hiring">Hometown Hiring</a></li>
                                                                            <li><a href="/capitol-connection">Capitol Connection</a></li>
                                                                    </ul>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/weather">Weather</a>
                                                            <ul class="submenu">
                                    <!-- <li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li> -->
                                    <li><a href="/weather">Weather Home</a></li>
                                                                            <li><a href="/weather-blog">Weather blog </a></li>
                                                                            <li><a href="https://www.cbs58.com/weather/se-wisconsin-radar">Radar</a></li>
                                                                            <li><a href="/traffic">Traffic                                                                             </a></li>
                                                                            <li><a href="https://cbs58.com/school-closings">closings</a></li>
                                                                            <li><a href="/tornado-ready">Tornado Ready                                                                            </a></li>
                                                                    </ul>
                                                    </li>
                                            <li>
                            <a href="/sports">Sports</a>
                                                    </li>
                                            <li>
                            <a href="/hometowns">Hometowns</a>
                                                    </li>
                                            <li>
                            <a href="/quickcast">Quickcast</a>
                                                    </li>
                                            <li>
                            <a href="/contests">Contests</a>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/about-us">About Us</a>
                                                            <ul class="submenu">
                                    <!-- <li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li> -->
                                    <li><a href="/about-us">About Us Home</a></li>
                                                                            <li><a href="https://workforcenow.adp.com/mascsr/default/mdf/recruitment/recruitment.html?cid=fb92ee88-e8da-4eaf-9355-7b5bcea11a21&ccId=9200183024011_2&lang=en_US">Job Openings at Weigel Broadcasting Milwaukee</a></li>
                                                                            <li><a href="/download-our-apps">Download Our Apps                                                                      </a></li>
                                                                            <li><a href="/bios">Meet the Team</a></li>
                                                                            <li><a href="/contact">Contact Us</a></li>
                                                                            <li><a href="https://cbs58.com/programming">TV schedule</a></li>
                                                                            <li><a href="https://cbs58.com/contact">Advertise with us</a></li>
                                                                    </ul>
                                                    </li>
                                             <li>
                        <a href="http://metv.com/setmarket.php?marketID=3" target="_blank" rel="noopener">M<span class="lowercase-text">e</span>TV</a>
                        </li>
                        <li>
                            <a class="" href="/contact/">Send a tip</a>
                        </li>
                                                <li>
                            <a class="" style="margin-right: 2rem;" href="/news-links/">News Links</a>
                        </li>
                        <li>
                            <a class="" style="margin-right: 0;" href="https://newscdn2.weigelbroadcasting.com/JoEjF-1648569906-milwaukee_station_positions.pdf">Where To Watch</a>
                        </li>

                                                <div class="header-nav-icons">
                            <li class="header-nav-search">
                                <i class="fa fa-search"></i>
                            </li>
                            <li class="social-nav">
                                <a href="https://www.facebook.com/CBS58" target="_blank" rel="noopener"><i class="fab fa-facebook-f"></i></a>
                            </li>
                            <li class="social-nav">
                               <a href="https://twitter.com/CBS58" target="_blank" rel="noopener"><i class="fab fa-twitter"></i></a>
                            </li>
                                                        <li class="social-nav">
                                <a href="https://www.instagram.com/cbs58news" target="_blank" rel="noopener"><i class="fab fa-instagram"></i>
                                </a>
                                <li class="social-nav">
                                <a href="https://www.youtube.com/c/cbs58tv" target="_blank" rel="noopener"><i class="fab fa-youtube"></i>
                                </a>
                            </li>
                            </li>
                                                                                </div>
                    </ul>
                                                    
                        
                    </div>

                        <div class="header-social-search">
                                                        <a class="header-tips-links-btn" href="/contact/">Send a tip</a>

                                                        <a class="header-news-links-btn" style="margin-right: 2rem;" href="/news-links/">News Links</a>

                            <a class="header-tips-links-btn" style="margin-right: 0;" href="https://newscdn2.weigelbroadcasting.com/JoEjF-1648569906-milwaukee_station_positions.pdf">Where To Watch</a>
                            
                                                    </div>
                </nav>                        
                <nav class="header-nav">
                    <div class="section-inner lg-col-wrapper clearfix">
                        <div class="mobile-floating-nav mobile-floating-navdesktop">
                            <a href="/">
                                <img class="logo logo-cbs58" src="/images/logo_cbs58.png?v4" alt="CBS58 WDJT - Milwaukee">
                                <img class="logo-stacked logo-stacked-cbs58" src="/images/logo_cbs58_stacked.png?v5">
                            </a>
                            <button class="main-nav-menu-btn"><i class="fa fa-bars" aria-hidden="true"></i></button>
                                                                                              
                        </div>
                        <!-- <div class="header-contact">
                            <span><span>Tip Line:</span>
                                414-777-5808</span> <span class="header-contact-spacer">|</span>
                                <a href="mailto:newsdesk@cbs58.com">newsdesk@cbs58.com</a>
                                                        </div> -->
                        <div class="header-social-search">
                                                                                        <a class="header-tips-links-btn" href="/contact/">Send a tip</a>

                                                                <a class="header-news-links-btn" style="margin-right: 2rem;" href="/news-links/">News Links</a>

                                <a class="header-tips-links-btn" style="margin-right: 0;" href="https://newscdn2.weigelbroadcasting.com/JoEjF-1648569906-milwaukee_station_positions.pdf">Where To Watch</a>

                                                                <div class="user-notifications">
                                                                    </div>       
                                                                                        <button class="main-nav-search-btn"><i class="fa fa-search" aria-hidden="true"></i></button>                          
                        </div>              
                     </div><!-- .lg-col-wrapper -->
                                     </nav>
            </div><!-- .header-wrapper -->            
            <div class="alert-container"></div>
            <style>
.market-alert-container {
	background-color: #009ec6;
	background-position: 50%;
	text-align: center;
}

.market-alert-container .market-alert-text {
	display: flex;
	flex-direction: column;
	color: white;
	font-size: 1.8rem;
	line-height: 2.2rem;
	width: 95%;
	margin: 0 auto;
	letter-spacing: 0.3px;
}

.market-alert-container .market-alert-text a {
	color: #000000;
	font-weight: bold;
}

.market-alert-text p {
	margin: 1.5rem 0 1.5rem;
}

i.market-alert-close {
	color: white;
	cursor: pointer;
	position: relative;
	font-size: 2rem;
	padding: 0.2rem 0.45rem;
	float: right;
	top: 1rem;
	right: 1rem;
}

i.market-alert-close:hover,
i.market-alert-close:focus {
	color: black;
}

.market-alert-container + .market-alert-container {
	border-top: 1px solid;
}

.market-alert-container	.btn-primary {
	display: inline-block;
	font-size: 1.6rem;
	text-transform: uppercase;
	padding: 1.1rem 5.7rem;
}

.lg-col-wrapper .market-alert-container {
	margin: -3rem 0 5rem;
}

.btn-primary.text-brand-black, .form-wrap input[type="submit"].text-brand-black, .form-wrap button.text-brand-black {
    color: #252525;
}
.btn-primary.white, .form-wrap input[type="submit"].white, .form-wrap button.white {
    background-color: #fff;
}
.btn-primary, .form-wrap input[type="submit"], .form-wrap button {
    color: #fff;
    font-size: 2rem;
    font-weight: 600;
    text-decoration: none;
    text-align: center;
    border: 2px solid transparent;
    border-radius: 50px;
    white-space: nowrap;
    padding: 1.3rem 2.8rem;
    margin-bottom: 1rem;
    opacity: 1;
}

.btn-primary.inverted-white:hover, .form-wrap input[type="submit"].inverted-white:hover, .form-wrap button.inverted-white:hover {
    color: #fff;
    border: 2px solid #fff;
    -webkit-filter: none;
    filter: none;
    background: transparent;
}

.btn-primary:hover, .form-wrap input[type="submit"]:hover, .form-wrap button:hover, .btn-primary:focus, .form-wrap input[type="submit"]:focus, .form-wrap button:focus, .btn-primary:active, .form-wrap input[type="submit"]:active, .form-wrap button:active {
    -webkit-filter: brightness(115%);
    filter: brightness(115%);
    text-decoration: none;
}

@media screen and (max-width: 900px) {
	.market-alert-container .rescan-alert-text {
		font-size: 2rem;
	}
}
</style>

<script>
    $(document).ready(function(){
        $('.market-alert-close').on('click', function(e){
            if(e.target) targ = e.target;
            else if (e.srcElement) targ = e.srcElement;
            if(targ.nodeType==3) targ = targ.parentNode;

            var alt_box = $(targ.parentNode);

            alt_box.fadeOut();

        });        
    });
</script>


        </header> 
        <header>
        <div id="main-nav" class="main-nav">
                 <div id="main-nav-floating" class="main-nav cbs58_nav">
        	<div class="section-inner lg-col-wrapper clearfix">
                <!-- <span class="main-nav-close-btn"><i class="fa fa-chevron-left" aria-hidden="true"></i> Close</span> -->
                <div class="sticky-header-logo">
                    <a href="/">
                        <img class="logo" src="/images/logo_cbs58_small.png">
                    </a>
                </div>
                <ul>
                                                                                    <li class="submenu-wrap">
                            <a href="/news">News</a>
                                                            <ul class="submenu">
                                	<!-- <li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li> -->
                                    <li><a href="/news">News Home</a></li>
                                                                            <li><a href="/local-news">Local News</a></li>
                                                                            <li><a href="/national-news">National News</a></li>
                                                                            <li><a href="/crime-stoppers">Crime Stoppers</a></li>
                                                                            <li><a href="/everyday-heroes">Natalie’s Everyday Heroes</a></li>
                                                                            <li><a href="/racine-and-me">Racine and Me</a></li>
                                                                            <li><a href="/sunday-morning">Sunday Morning </a></li>
                                                                            <li><a href="/special-report">Special Report</a></li>
                                                                            <li><a href="https://cbs58.com/hometown-hiring">Hometown Hiring</a></li>
                                                                            <li><a href="/capitol-connection">Capitol Connection</a></li>
                                                                    </ul>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/weather">Weather</a>
                                                            <ul class="submenu">
                                	<!-- <li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li> -->
                                    <li><a href="/weather">Weather Home</a></li>
                                                                            <li><a href="/weather-blog">Weather blog </a></li>
                                                                            <li><a href="https://www.cbs58.com/weather/se-wisconsin-radar">Radar</a></li>
                                                                            <li><a href="/traffic">Traffic                                                                             </a></li>
                                                                            <li><a href="https://cbs58.com/school-closings">closings</a></li>
                                                                            <li><a href="/tornado-ready">Tornado Ready                                                                            </a></li>
                                                                    </ul>
                                                    </li>
                                            <li>
                            <a href="/sports">Sports</a>
                                                    </li>
                                            <li>
                            <a href="/hometowns">Hometowns</a>
                                                    </li>
                                            <li>
                            <a href="/quickcast">Quickcast</a>
                                                    </li>
                                            <li>
                            <a href="/contests">Contests</a>
                                                    </li>
                                            <li class="submenu-wrap">
                            <a href="/about-us">About Us</a>
                                                            <ul class="submenu">
                                	<!-- <li class="submenu-back-btn"><span><i class="fa fa-chevron-left" aria-hidden="true"></i> Back</span></li> -->
                                    <li><a href="/about-us">About Us Home</a></li>
                                                                            <li><a href="https://workforcenow.adp.com/mascsr/default/mdf/recruitment/recruitment.html?cid=fb92ee88-e8da-4eaf-9355-7b5bcea11a21&ccId=9200183024011_2&lang=en_US">Job Openings at Weigel Broadcasting Milwaukee</a></li>
                                                                            <li><a href="/download-our-apps">Download Our Apps                                                                      </a></li>
                                                                            <li><a href="/bios">Meet the Team</a></li>
                                                                            <li><a href="/contact">Contact Us</a></li>
                                                                            <li><a href="https://cbs58.com/programming">TV schedule</a></li>
                                                                            <li><a href="https://cbs58.com/contact">Advertise with us</a></li>
                                                                    </ul>
                                                    </li>
                                        <li><a href="http://metv.com/setmarket.php?marketID=3" target="_blank" rel="noopener">M<span class="lowercase-text">e</span>TV</a></li>
                     <div class="header-nav-icons">
                        <li class="header-nav-search">
                            <i class="fa fa-search"></i>
                        </li>
                        <li class="social-nav">
                            <a href="https://www.facebook.com/CBS58" target="_blank" rel="noopener"><i class="fab fa-facebook-f"></i></a>
                        </li>
                        <li class="social-nav">
                           <a href="https://twitter.com/CBS58" target="_blank" rel="noopener"><i class="fab fa-twitter"></i></a>
                        </li>
                                                <li class="social-nav">
                            <a href="https://www.instagram.com/cbs58news" target="_blank" rel="noopener"><i class="fab fa-instagram"></i>
                            </a>
                        </li>
                        <li class="social-nav">
                            <a href="https://www.youtube.com/c/cbs58tv" target="_blank" rel="noopener"><i class="fab fa-youtube"></i>
                            </a>
                        </li>
                                                                    </div>
                </ul>
            </nav>
        </div>
        <div class="search-bar closed">
            <div class="lg-col-wrapper-no-space">
                <form class="search-form clearfix" action="/search/" method="get" enctype="multipart/form-data">
                    <div class="search-bar-input-wrap">
                        <input type="text" name="q" placeholder="Search...">
                    </div>
                    <button type="submit" name="submit"><i class="fa fa-chevron-right"></i></button>
                </form>
            </div>
        </div> 
    </header>
    

        <div id="wrapper" class="clearfix">
    	<!-- HIDE TOP ADS FOR TAKEOVERS -->
                <div class="header-ads">
            <div id="header-ad-leaderboard" class="header-ad-leaderboard">
            </div>
                        <div class="header-ad-promo">
                <div id="cbs58_promo">
                    <div id="managed_ad" >
                        <a id="managed_ad_link" href="https://www.cbs58.com/bios/mike-strehlow">
                        </a>
                    </div>
                    <script>

                        var promoLabel = "Promo";
                                                    promoLabel = "mike-hometowns";
                                                function trackPromoClick(url){
                          var eventCategory = 'PromoAd';
                          if (window.ga) {

                                var tracker = ga.getAll()[0];
                                if (tracker)
                                    tracker.send("event", {
                                  'eventCategory': eventCategory,
                                  'eventAction': "promoclick",
                                  'eventLabel': promoLabel,
                                  'eventValue': 1,
                                  'nonInteraction': true,
                                  'hitCallback' : function(){
                                      window.location = url;
                                  }
                                });
                          } else{
                              window.location = url;
                          }
                        }

                        var width = window.innerWidth || document.documentElement.clientWidth;
                        if(width > 1250 || width <= 550){
                                                           var image = new Image();
                                image.onload = function() {

                                  $('#managed_ad_link').append(image);
                                };
                               if(width > 1250){
                                   image.width = 452;
                                   image.height = 90;
                                   image.src = "https://newscdn2.weigelbroadcasting.com/Da6pB-1651258910-264-promo_ads-Mike-Hometowns-web-banner.jpg";

                               }else if(width <= 550){
                                   image.width = 320;
                                   image.height = 50;
                                   image.src = "https://newscdn2.weigelbroadcasting.com/Da6pB-1651258910-264-promo_ads-Mike-Hometowns-web-banner.jpg";
                               }

                               $('#managed_ad_link').on('click', function(e){
                                   e.preventDefault();
                                   trackPromoClick(this.href);
                                   return false;
                               });
                                                    }
                    </script>
                </div>
            </div>
                    </div>
                               <div id="main-content">
            <div class="content-header">
                                <h1>US Soccer may repeal the ban on players kneeling</h1>
                <div class="content-byline">
                                             <span>By: CNN</span>
                                    </div>
                <div class="content-date-posted">

                    <span>Posted:</span>                         Jun  8, 2020  1:45 PM CDT                                                                                </br><span>Updated:</span> Jun  8, 2020  2:20 PM CDT                                    </div>
            </div>
            <div class="content-wrap clearfix">
                            	<div class="content-share-wrap">
                	                    <div class="content-share">
                        <ul class="rrssb-buttons">
                            <li class="rrssb-facebook">
                                <!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header:
                                https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
                                <a href="https://www.facebook.com/sharer/sharer.php?u=https://cbs58.com/news/us-soccer-may-repeal-the-ban-on-players-kneeling" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="29" height="29" viewBox="0 0 29 29">
                                            <path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z" class="cls-2" fill-rule="evenodd" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">facebook</span>
                                </a>
                            </li>
                            <li class="rrssb-twitter">
                                <!-- Replace href with your Meta and URL information  -->
                                <a href="https://twitter.com/intent/tweet?text=US+Soccer+may+repeal+the+ban+on+players+kneeling+https%3A%2F%2Fcbs58.com%2Fnews%2Fus-soccer-may-repeal-the-ban-on-players-kneeling%2F" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">twitter</span>
                                </a>
                            </li>
                            <!--<li class="rrssb-pinterest">
                                <a href="http://pinterest.com/pin/create/button/?url=">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.02 1.57c-7.06 0-12.784 5.723-12.784 12.785S6.96 27.14 14.02 27.14c7.062 0 12.786-5.725 12.786-12.785 0-7.06-5.724-12.785-12.785-12.785zm1.24 17.085c-1.16-.09-1.648-.666-2.558-1.22-.5 2.627-1.113 5.146-2.925 6.46-.56-3.972.822-6.952 1.462-10.117-1.094-1.84.13-5.545 2.437-4.632 2.837 1.123-2.458 6.842 1.1 7.557 3.71.744 5.226-6.44 2.924-8.775-3.324-3.374-9.677-.077-8.896 4.754.19 1.178 1.408 1.538.49 3.168-2.13-.472-2.764-2.15-2.683-4.388.132-3.662 3.292-6.227 6.46-6.582 4.008-.448 7.772 1.474 8.29 5.24.58 4.254-1.815 8.864-6.1 8.532v.003z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">pinterest</span>
                                </a>
                            </li>
                            <li class="rrssb-googleplus">
                                <a href="https://plus.google.com/share?url=" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.703 15.854l-1.22-.948c-.37-.308-.88-.715-.88-1.46 0-.747.51-1.222.95-1.662 1.42-1.12 2.84-2.31 2.84-4.817 0-2.58-1.62-3.937-2.4-4.58h2.098l2.203-1.384h-6.67c-1.83 0-4.467.433-6.398 2.027C3.768 4.287 3.06 6.018 3.06 7.576c0 2.634 2.02 5.328 5.603 5.328.34 0 .71-.033 1.083-.068-.167.408-.336.748-.336 1.324 0 1.04.55 1.685 1.01 2.297-1.523.104-4.37.273-6.466 1.562-1.998 1.187-2.605 2.915-2.605 4.136 0 2.512 2.357 4.84 7.288 4.84 5.822 0 8.904-3.223 8.904-6.41.008-2.327-1.36-3.49-2.83-4.73h-.01zM10.27 11.95c-2.913 0-4.232-3.764-4.232-6.036 0-.884.168-1.797.744-2.51.543-.68 1.49-1.12 2.372-1.12 2.807 0 4.256 3.797 4.256 6.24 0 .613-.067 1.695-.845 2.48-.537.55-1.438.947-2.295.95v-.003zm.032 13.66c-3.62 0-5.957-1.733-5.957-4.143 0-2.408 2.165-3.223 2.91-3.492 1.422-.48 3.25-.545 3.556-.545.34 0 .52 0 .767.034 2.574 1.838 3.706 2.757 3.706 4.48-.002 2.072-1.736 3.664-4.982 3.648l.002.017zM23.254 11.89V8.52H21.57v3.37H18.2v1.714h3.367v3.4h1.684v-3.4h3.4V11.89" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">google+</span>
                                </a>
                            </li>-->
                            <li class="rrssb-email">
                                <!-- Replace subject with your message using URL Endocding: http://meyerweb.com/eric/tools/dencoder/ -->
                                <a id="mail_link" href="/cdn-cgi/l/email-protection#526d212730383731266f070172013d31313720723f332b7220372237333e72263a377230333c723d3c72223e332b37202172393c37373e3b3c3574303d362b6f3a26262221776113776014776014313021676a7c313d3f7760143c37252177601427217f213d313137207f3f332b7f20372237333e7f263a377f30333c7f3d3c7f223e332b3720217f393c37373e3b3c35">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">email</span>
                                </a>
                            </li>
                        </ul>
					</div><!-- .content-share-wrap -->                </div>
                                
                                                            <img class="content-header-img" src="https://newscdn2.weigelbroadcasting.com/mRz7V-1591641929-166372-blog-hypatia-h_a9c4ae8d20e88115d15600e7dd706e2b-h_63b308641a5d864557a92d951aad2fb2-300.JPG" />
                        <span class="content-header-img-caption">
          Megan Rapinoe of the US Women's National Team kneels during the playing of the US National Anthem before a match against Thailand on September 15, 2016, at MAPFRE Stadium in Columbus, Ohio.
          
          
        </span>                                                    <paragraph>By Alaa Elassar and Jabari Jackson, CNN</paragraph><p> (CNN) -- The US Soccer Federation is considering a repeal of a policy requiring national team players to stand during the National Anthem, according to an <a href="https://www.espn.com/soccer/united-states-usa/story/4107737/sources-us-soccer-to-consider-repealing-ban-on-players-kneeling" target="_blank">ESPN</a> report.</p><p>The federation's board of directors plans to discuss the new policy Tuesday and a formal vote is expected Friday. If approved, the policy would take immediate effect, but will also need to be approved at the next annual general meeting next year.</p><p>CNN has reached out to US Soccer but has not received a response.</p><p>The policy banning players from kneeling during the anthem was <a href="https://www.ussoccer.com/governance/bylaws" target="_blank">passed</a> in response to US women's national team midfielder Megan Rapinoe's kneeling for the National Anthem before a 2016 match against Thailand.</p><p>"All persons representing a Federation national team shall stand respectfully during the playing of national anthems at any event in which the Federation is represented," policy 604-1 states.</p><p>Rapinoe first <a href="https://www.cnn.com/2016/09/05/sport/megan-rapinoe-colin-kaepernick-anthem-kneel/index.html" target="_blank">knelt</a> during the National Anthem before her team's clash with the Chicago Red Stars in a show of solidarity with San Francisco 49ers' quarterback Colin Kaepernick.</p><p>Kaepernick, the quarterback who took the 49ers to the Super Bowl in 2012, ignited a firestorm of criticism when he sat in protest during the National Anthem for a preseason game, saying he would not honor a song nor "show pride in a flag for a country that oppresses black people and people of color."</p><p>The killing of unarmed black man George Floyd in May has <a href="https://www.cnn.com/2020/06/06/world/gallery/intl-george-floyd-protests/index.html" target="_blank">reignited</a> Black Lives Matter protests across the United States and around the world. As people continue to take to the streets to express the need for police reform and racial equality, protesters are holding signs and kneeling with their fists in the air.</p><p>The-CNN-Wire™ & © 2018 Cable News Network, Inc., a Time Warner Company. All rights reserved.</p>
                                                                <div class="content-share-wrap">
                    <span class="content-share-wrap-title">Share this article:</span> 
                                        <div class="content-share">
                        <ul class="rrssb-buttons">
                            <li class="rrssb-facebook">
                                <!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header:
                                https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
                                <a href="https://www.facebook.com/sharer/sharer.php?u=https://cbs58.com/news/us-soccer-may-repeal-the-ban-on-players-kneeling" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid" width="29" height="29" viewBox="0 0 29 29">
                                            <path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z" class="cls-2" fill-rule="evenodd" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">facebook</span>
                                </a>
                            </li>
                            <li class="rrssb-twitter">
                                <!-- Replace href with your Meta and URL information  -->
                                <a href="https://twitter.com/intent/tweet?text=US+Soccer+may+repeal+the+ban+on+players+kneeling+https%3A%2F%2Fcbs58.com%2Fnews%2Fus-soccer-may-repeal-the-ban-on-players-kneeling%2F" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">twitter</span>
                                </a>
                            </li>
                            <!--<li class="rrssb-pinterest">
                                <a href="http://pinterest.com/pin/create/button/?url=">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.02 1.57c-7.06 0-12.784 5.723-12.784 12.785S6.96 27.14 14.02 27.14c7.062 0 12.786-5.725 12.786-12.785 0-7.06-5.724-12.785-12.785-12.785zm1.24 17.085c-1.16-.09-1.648-.666-2.558-1.22-.5 2.627-1.113 5.146-2.925 6.46-.56-3.972.822-6.952 1.462-10.117-1.094-1.84.13-5.545 2.437-4.632 2.837 1.123-2.458 6.842 1.1 7.557 3.71.744 5.226-6.44 2.924-8.775-3.324-3.374-9.677-.077-8.896 4.754.19 1.178 1.408 1.538.49 3.168-2.13-.472-2.764-2.15-2.683-4.388.132-3.662 3.292-6.227 6.46-6.582 4.008-.448 7.772 1.474 8.29 5.24.58 4.254-1.815 8.864-6.1 8.532v.003z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">pinterest</span>
                                </a>
                            </li>
                            <li class="rrssb-googleplus">
                                <a href="https://plus.google.com/share?url=" class="popup">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M14.703 15.854l-1.22-.948c-.37-.308-.88-.715-.88-1.46 0-.747.51-1.222.95-1.662 1.42-1.12 2.84-2.31 2.84-4.817 0-2.58-1.62-3.937-2.4-4.58h2.098l2.203-1.384h-6.67c-1.83 0-4.467.433-6.398 2.027C3.768 4.287 3.06 6.018 3.06 7.576c0 2.634 2.02 5.328 5.603 5.328.34 0 .71-.033 1.083-.068-.167.408-.336.748-.336 1.324 0 1.04.55 1.685 1.01 2.297-1.523.104-4.37.273-6.466 1.562-1.998 1.187-2.605 2.915-2.605 4.136 0 2.512 2.357 4.84 7.288 4.84 5.822 0 8.904-3.223 8.904-6.41.008-2.327-1.36-3.49-2.83-4.73h-.01zM10.27 11.95c-2.913 0-4.232-3.764-4.232-6.036 0-.884.168-1.797.744-2.51.543-.68 1.49-1.12 2.372-1.12 2.807 0 4.256 3.797 4.256 6.24 0 .613-.067 1.695-.845 2.48-.537.55-1.438.947-2.295.95v-.003zm.032 13.66c-3.62 0-5.957-1.733-5.957-4.143 0-2.408 2.165-3.223 2.91-3.492 1.422-.48 3.25-.545 3.556-.545.34 0 .52 0 .767.034 2.574 1.838 3.706 2.757 3.706 4.48-.002 2.072-1.736 3.664-4.982 3.648l.002.017zM23.254 11.89V8.52H21.57v3.37H18.2v1.714h3.367v3.4h1.684v-3.4h3.4V11.89" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">google+</span>
                                </a>
                            </li>-->
                            <li class="rrssb-email">
                                <!-- Replace subject with your message using URL Endocding: http://meyerweb.com/eric/tools/dencoder/ -->
                                <a id="mail_link" href="/cdn-cgi/l/email-protection#d9e6aaacbbb3bcbaade48c8af98ab6bababcabf9b4b8a0f9abbca9bcb8b5f9adb1bcf9bbb8b7f9b6b7f9a9b5b8a0bcabaaf9b2b7bcbcb5b0b7beffbbb6bda0e4b1adada9aafcea98fceb9ffceb9fbabbaaece1f7bab6b4fceb9fb7bcaeaafceb9facaaf4aab6bababcabf4b4b8a0f4abbca9bcb8b5f4adb1bcf4bbb8b7f4b6b7f4a9b5b8a0bcabaaf4b2b7bcbcb5b0b7be">
                                    <span class="rrssb-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                                            <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z" />
                                        </svg>
                                    </span>
                                    <span class="rrssb-text">email</span>
                                </a>
                            </li>
                        </ul>
					</div><!-- .content-share-wrap -->                </div>
                            </div>

            
                        <div id="rc-widget-11eceb" style="margin-bottom: 3rem;" data-rc-widget data-widget-host="habitat" data-endpoint="//trends.revcontent.com" data-widget-id="257878"></div>
            <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript" src="https://assets.revcontent.com/master/delivery.js" defer="defer"></script>
             
                <!-- connatix video player -->  
                        <!-- temp spacer, will change if goes live -->
            <style>
                    .connatix-spacer {
                        margin-bottom: 5rem;
                        height:1px;
                    }                                
                @media screen and (max-width: 850px), handheld and (max-device-width: 850px){
                    .connatix-spacer {
                        margin-bottom: 4rem;
                    }                
                }              
                
            </style>
            <div id='minutemedia_placeholder'></div>
                            
                <!-- minute media player -->                      
                <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PL4PD49",m.parentNode.insertBefore(r,m)}(window.parent,window.parent.document,"script","dataLayer");</script><script>var iframe=window.parent.document.createElement("iframe");iframe.src="https://www.googletagmanager.com/ns.html?id=GTM-PL4PD49";iframe.height="0";iframe.width="0";iframe.style="display:none;visibility:hidden";window.parent.document.body.appendChild(iframe);</script><script>window.parent['$$mm-analytics'] = window.parent['$$mm-analytics'] || {};if (typeof window.parent['$$mm-analytics'].firstEmbed === 'undefined') {window.parent['$$mm-analytics'].firstEmbed = Date.now();}</script>
                <script async type='text/javascript' src="https://bucket1.mm-syringe.com/prod/configs/aa6baf74-d581-1a57-f3cc-3052cdd680d7.js"></script>
                <script async type='text/javascript' src="https://bucket1.mm-syringe.com/prod/injector/injector.1.5.3.js"></script>            
                
            
                        <div id="cbs58_middle" class="stories-ad-middle">
                                    <script type='text/javascript'>
                        googletag.cmd.push(function() { googletag.display('cbs58_middle'); });
                    </script>
                            </div>            
                        

            
                            <div id="rc-widget-09442b" data-rc-widget data-widget-host="habitat" data-endpoint="//trends.revcontent.com" data-widget-id="182620"></div>
                <script type="text/javascript" src="https://assets.revcontent.com/master/delivery.js" defer="defer"></script>

            <!-- START ZergNet ad code -->
                                        <!-- END ZergNet ad code -->
            
                        

        </div><!-- #main-content -->
        <aside>
   
	<ul>
        
                                                                                                                                                                                                                                    <h2>Top Stories</h2>
    <ul class="aside-sidebar-three-item-list">
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/jury-finds-darrell-brooks-guilty-of-first-degree-intentional-homicide-in-waukesha-christmas-parade-trial"><img src="https://newscdn2.weigelbroadcasting.com/gT27u-1666813980-239982-blog-1200P_BROOKS%20DECISION_S_WDJTCQJ7.JPG" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/jury-finds-darrell-brooks-guilty-of-first-degree-intentional-homicide-in-waukesha-christmas-parade-trial">Jury finds Darrell Brooks guilty on all counts in Waukesha Christmas parade trial</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/community-members-local-leaders-react-to-darrell-brooks-guilty-verdict"><img src="https://newscdn2.weigelbroadcasting.com/dRG5m-1666818729-240012-blog-0400P_BROOKS%20VERDICT%20AN_WDJTCQJU_00-00-58%2C11.JPG" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/community-members-local-leaders-react-to-darrell-brooks-guilty-verdict">Community members, local leaders react to Darrell Brooks' guilty verdict</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/visit-touts-milwaukees-new-status-at-one-of-natgeos-top-25-places-in-the-world"><img src="https://newscdn2.weigelbroadcasting.com/zRp1U-1666817426-240021-blog-0500P_NATL%20GEOGRAPHIC%20M_WDJTCQKB.JPG" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/visit-touts-milwaukees-new-status-at-one-of-natgeos-top-25-places-in-the-world">VISIT Milwaukee touts city's new status as one of NatGeo's top 25 places in the world</a>
        </li>
            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
                    
                        <div class="weather-app primary-content-box">
        <div class="weather-app-logo">
            <!-- weather logos -->
            <a href="/weather" title="Weather">
                                <img src="/images/ready-weather-logo.png">
                            </a>
        </div>
                <!-- weather location and sponsor -->
        <div class="weather-forecast-container">
            <div class="weather-content-top-wrapper">
                <div class="weather-col-left">
                    <span class="weather-location">
                                            Milwaukee, WI
                                        </span>
                </div>
                <div class="weather-col-right">
                                        
                </div>
            </div>
            <!-- weather forecast -->
            <div class="weather-view-row forecast-row">
                <div class="weather-view-forecast-column">
                    <div class="weather-view-forecast-left">
                       <a href="/weather" title="weather"><img src="/images/weather_icons/66.png" width="40" height="20">
                       </a>
                    </div>
                    <div class="weather-view-forecast-right">
                        <a href="/weather" title="weather">
                            <span class="weather-view-time-text">
                                                            Today
                                                         </span>
                            <span class="weather-view-temperature-text">53°</span>
                            <span class="weather-view-description-text">Partly Cloudy</span>
                        </a>
                    </div>
                </div>

                <div class="weather-view-divider"></div>
                <div class="weather-view-forecast-column">
                    <div class="weather-view-forecast-left">
                        <a href="/weather" title="weather"><img src="/images/weather_icons/30.png" width="40" height="20">
                        </a>
                    </div>
                    <div class="weather-view-forecast-right">
                        <a href="/weather" title="weather">
                            <span class="weather-view-time-text">
                                                            Tomorrow
                                                        </span>
                            <span class="weather-view-temperature-text">56°</span>
                            <span class="weather-view-description-text">Partly Cloudy</span>
                        </a>
                    </div>
                </div>
            </div>
                        <div class="secondary-tags"><a href="/weather/#feeditem_24">7 Day Forecast</a></div>    
                    </div>
                            <div class="weather-view-video internal-page" href="/news/heaviest-rainfall-in-six-weeks-will-be-our-last-for-a-while">
                    <a href="/videos/daily-forecast" class="video-thumbnail">
                <div class="weather-view-play"><i class="fa fa-play-circle" aria-hidden="true"></i></div>
                <img width="360" src="https://videopostercdn.weigelbroadcasting.com/cbs58news/wednesday afternoon forecast_1666806972-CBS58 980x551.jpg?1666807040" class="video-thumb">
            </a>
                        <div class="callout-item-title-link"><a href="/videos/daily-forecast">CBS 58 Ready Weather Forecast&nbsp;<i class="fa fa-play-circle" aria-hidden="true"></i></a></div>
                    </div>
                                        <div class="weather-forecast-container">
                <div class="weather-view-row internal-page">
                                    <div class="weather-view-column">
                                                    <a href="/weather/#feeditem_16" class="weather-links">
                            <a href="/weather/#feeditem_16" class="weather-links secondary-tags">                                                                        
                                                <span>Radar</span>
                        </a>
                    </div>
                    <div class="weather-view-column">
                                                <a href="/weather/#feeditem_14" class="weather-links">
                        <a href="/weather/#feeditem_14" class="weather-links secondary-tags">                        
                        
                                                    <span>Maps</span>
                                                </a>
                    </div>
                    <div class="weather-view-column">
                                                <a href="/weather/#feeditem_38" class="weather-links">
                        <a href="/weather/#feeditem_38" class="weather-link secondary-tags">
                                                
                        
                                                        <span>Cameras</span>
                                                    </a>
                    </div>
                </div>
                                                    </div>    </div>        
                    <li style="margin-bottom: 3rem;">
                <div id="cbs58_side">                    
                    <script type='text/javascript'>
                        googletag.cmd.push(function() { googletag.display('cbs58_side'); });
                    </script>                    
                                    </div>
            </li>
        
        
                        
                                                                                                                                                                                                                                                                                            
                        
            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                        
            
                                                                                                             
                                              
                                                            <h2>COVID vaccine resources</h2>
    <ul class="aside-sidebar-three-item-list">
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/mke-health-officials-push-for-people-to-get-latest-covid-boosters"><img src="https://newscdn2.weigelbroadcasting.com/b973n-1666730726-239936-blog-0400P_GET%20YOUR%20BOOSTER%20_WDJTCQCL.JPG" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/mke-health-officials-push-for-people-to-get-latest-covid-boosters">Milwaukee health officials push for people to get latest COVID boosters</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/fda-cdc-sign-off-on-novavax-covid-19-vaccine-as-a-first-booster-shot"><img src="https://newscdn2.weigelbroadcasting.com/z4Rnj-1666218191-239509-blog-hypatia-h_1bc42553b6e7005a778a63b67ce32f24-h_aa65d36564b8b2fe7da0821f74ca0793.jpg" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/fda-cdc-sign-off-on-novavax-covid-19-vaccine-as-a-first-booster-shot">FDA, CDC sign off on Novavax Covid-19 vaccine as a first booster shot</a>
        </li>
            </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                        
            
                                                                                            <li>
            <h2><span class="title-alert"></span>Latest</h2>
            <ul class="aside-sidebar-list-title-only">
                                <li class="callout-item-title-link"><a  href="/news/ash-carter-former-defense-secretary-under-obama-dies-at-68">Ash Carter, former defense secretary under Obama, dies at 68</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-alert"> 29m ago
                </li>
                                <li class="callout-item-title-link"><a  href="/news/visit-touts-milwaukees-new-status-at-one-of-natgeos-top-25-places-in-the-world">VISIT Milwaukee touts city's new status as one of NatGeo's top 25 places in the world</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 1h ago
                </li>
                                <li class="callout-item-title-link"><a  href="/news/watch-out-for-leakage-these-are-some-of-the-clues-students-can-look-out-for-to-help-prevent-school-violence">Watch out for 'leakage': These are some of the clues students can look out for to help prevent school violence</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 1h ago
                </li>
                                <li class="callout-item-title-link"><a  href="/news/community-leaders-in-wisconsin-discuss-importance-of-the-latino-vote">Community leaders in Wisconsin discuss importance of the Latino vote</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 1h ago
                </li>
                                <li class="callout-item-title-link"><a  href="/news/jury-finds-darrell-brooks-guilty-of-first-degree-intentional-homicide-in-waukesha-christmas-parade-trial">Jury finds Darrell Brooks guilty on all counts in Waukesha Christmas parade trial</a>
                	<div><span class="meta-text-subheading-small meta-text-timestamp-default"> 1h ago
                </li>
                            </ul>
        </li>                                                                                                                                                                                                                                                                                                                                                
                        
            
                                                                                        <h2>On CBS 58</h2>
    <ul class="aside-sidebar-three-item-list">
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/cbs-58-hometowns-bay-view"><img src="https://newscdn2.weigelbroadcasting.com/MOLkN-1666706346-239887-blog-BayView.png" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/cbs-58-hometowns-bay-view">CBS 58 Hometowns: Bay View</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/moment-in-wisconsin-mckinley-marina"><img src="https://newscdn2.weigelbroadcasting.com/ktzhq-1666540572-239759-blog-videoimage-MDs8Ul.jpg" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/moment-in-wisconsin-mckinley-marina">Moment in Wisconsin: McKinley Marina</a>
        </li>
                <li class="aside-sidebar-three-item-list-item primary-content-box callout-item-title-link">
            <a  class="image-wrapper" href="/news/pewaukee-dog-forms-friendship-with-veteran-neighbor"><img src="https://newscdn2.weigelbroadcasting.com/4eWz6-1666540037-239758-blog-videoimage-QZRij9.jpg" width="166" height="93"></a>
            <a  class="aside-sidebar-three-item-list-title" href="/news/pewaukee-dog-forms-friendship-with-veteran-neighbor">Pewaukee dog forms friendship with veteran neighbor</a>
        </li>
            </ul>
                                                                                                                                                                                                                                                                                                                                    <li>
                            <script src="https://www.metv.com/js/iframeheight.js"></script>
                <iframe id="affiliated-widget-iframe" src="https://www.metv.com/affiliatedwidget?market=3" width="100%" frameborder="0" scrolling="no"  seamless="seamless" marginwidth="0" marginheight="0" scrolling="no" frameborder="0"> </iframe>
                    </li>
                                        <li>
                                <div class="aside-ad-2" style="background-color:#f9f9f9;">            
                    <div id="float_anchor"></div>
                    <div id="cbs58_float" class="sidebar-ad-wrap sidebar-ad-wrap-content">
                        <script type="text/javascript">
                            googletag.cmd.push(function() { googletag.display('cbs58_float'); });
                        </script>
                    </div>
                    <div id="float_spacer">                                
                    </div>                                
                </div>             
                                            </li>
                        
    </ul>



</aside>
        </div><!-- #wrapper -->
            <footer>
    	<div class="section-inner">
        	<nav id="footer-nav">
            	<ul>
                                            <li><a href="/social">Social</a></li>
                                            <li><a href="http://www.cbs58.com/stream/live-stream-1">Live Stream</a></li>
                                            <li><a href="/contact">Contact</a></li>
                                            <li><a href="/privacy-policy">Privacy Policy</a></li>
                                            <li><a href="/terms-of-use">Terms of Use</a></li>
                                        <!---
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Use</a></li>
                    -->
                </ul>
            </nav>
            <div class="footer-apps">
                                                                                        <span>Download the cbs58 app:</span>
                <a href="https://itunes.apple.com/us/app/cbs-58-news/id973140859?mt=8"><img class="footer-app-ios" src="https://wnewsstatic.b-cdn.net/images/app_badge_ios.png" width="135" height="40" alt="iOS App Store"></a>
                <a href="https://play.google.com/store/apps/details?id=com.weigel.wdjtcbs58"><img src="https://wnewsstatic.b-cdn.net/images/app_badge_android.png" width="135" height="40" alt="Google Play"></a>
            </div>
            <img class="footer-logo footer-logo-cbs58" src="/images/logo_cbs58_stacked.png?v4" alt="site logo">
            <div class="footer-contact-info">
                                    809 S. 60th St, Milwaukee, WI 53214<br />
                    <span>News tip hotline:</span> <a class="clicktocall" href="tel:+1-414-777-5808">(414) 777-5808</a><br />
                    <span>General info:</span> <a class="clicktocall" href="tel:+1-414-777-5800">(414) 777-5800</a><br />
                    <span>Fax:</span> (414) 777-5802
                            </div>
            <ul class="footer-station-logos">
                                        <li><a href="https://metv.com/setmarket.php?marketID=3" target="_blank" rel="noopener"><img src="https://wnewsstatic.b-cdn.net/images/metv_logo_footer.png" alt="MeTV" width="124" height="82"></a>MeTV 41.1/58.2</li>
                                                             <li><a href="https://wmlw.com/" target="_blank" rel="noopener"><img src="https://wnewsstatic.b-cdn.net/images/them_logo_footer.png" alt="WMLW - The M" width="124" height="82"></a>WMLW 49.1/58.3</li>
                        <li><a href="https://telemundowi.com/" target="_blank" rel="noopener"><img src="https://wnewsstatic.b-cdn.net/images/telemundowi_logo_footer.png" alt="Telemundo Wisconsin" width="124" height="82"></a>Telemundo 63.1/58.4</li>
                        <li><a href="https://starttv.com/" target="_blank" rel="noopener"><img src="https://wnewsstatic.b-cdn.net/images/start_logo_footer.png" alt="StartTV" width="124" height="82"></a>Start 58.5/63.2</li>
                        <li><a href="https://moviestvnetwork.com/" target="_blank" rel="noopener"><img src="https://wnewsstatic.b-cdn.net/images/movies_logo_footer.png" alt="Movies!" width="124" height="82"></a>Movies! 49.2/63.3</li>
                        <li><a href="https://handitv.com/" target="_blank" rel="noopener"><img src="https://wnewsstatic.b-cdn.net/images/handi_logo_footer.png" alt="H&I" width="124" height="82"></a>H&I 49.3</li>
                                                                                                     <li><a href="https://decades.com/" target="_blank" rel="noopener"><img src="https://wnewsstatic.b-cdn.net/images/decades_logo_footer.png" alt="Decades" width="124" height="82"></a>Decades 49.4</li>
                                </ul>
            <div class="copyright">                
            	All content &copy; Copyright 2022 WDJT. All Rights Reserved. <br><a href="https://publicfiles.fcc.gov/tv-profile/wdjt-tv">WDJT FCC Public File</a>&nbsp;&nbsp;&nbsp;<a href=" https://publicfiles.fcc.gov/tv-profile/wdjt-tv/applications-and-related-materials/#renewals">FCC License Renewal</a>&nbsp;&nbsp;<a href="https://publicfiles.fcc.gov/tv-profile/wdjt-tv/equal-employment-opportunity-records/additional-documents/eeo-public-file-reports/d1a9e131-e548-b6bf-265c-300972305e75/">EEO Report</a>&nbsp;&nbsp;&nbsp;<a href="https://publicfiles.fcc.gov/tv-profile/wdjt-tv/programs-list/">Children's Programming Report</a>&nbsp;&nbsp;&nbsp;<a href="https://www.aboutads.info/choices">Ad Choices</a>                
            </div>
        </div><!-- .section-inner -->
    </footer>
    
        
                    <link rel="stylesheet" type="text/css" href="/css/wcs/wcs-style-cbs58.css?v54">
<section id="wcs-main-wrapper">
	<div id="wcs-overlay-modal" class="wcs-overlay">
	<!-- FLAGGING COMMENTS -->
	<!-- <div class="wcs-modal-wrap wcs-modal-flagging">
		Are you sure you want to flag this comment?
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn">Cancel</button> <button class="wcs-submit-btn">Submit</button>
		</div>
	</div> -->

	<!-- DELETING COMMENTS -->
	<div class="wcs-modal-wrap wcs-modal-deleting">
        <span class="wcs-modal-innertext">Are you sure you want to delete this comment?</span>
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn wcs-modal-btns-cancel">Cancel</button> <button class="wcs-submit-btn wcs-modal-btns-submit">Delete</button>
		</div>
	</div>
</div>	<div id="wcs-overlay-sidebar" class="wcs-overlay">
	<span class="wcs-slideout-close-btn">
		<span>Close</span>
		<i class="fas fa-times"></i>
	</span>
	<div id="wcs-slideout-wrapper">
			</div>
</div>
        
<script type="text/html" id="template_registration_header_email">
	<div id="wcs-email-registration-header">
        <h1>Create a new account</h1>
        <p>Already have an account? <a href="#!" id="wcs-signin-link">Click here to sign in.</a></p>
    </div>    
</script>
<script type="text/html" id="template_registration_header_social">
	<div id="wcs-email-registration-social">    
        <h1>You're almost there!</h1>
        <p>Fill out the form fields below to complete your registration.</p>
    </div>
</script>

<script type="text/html" id="template_registration_header_success">
	<div id="wcs-email-registration-social">    
        <h1>Thank You for Registering!</h1>
        <p>
            You will receive an email confirmation with a link to activate your account.  
        </p>
    </div>
</script>
<style>
    .wcs-profile-settings-other-provider{
        display:none;
    }
</style>

<script type="text/html" id="template_profile_form">
	<form class="wcs-profile-settings-form">
		<div class="wcs-profile-settings-form-section">
			<label for="fullName">First name <span>*</span></label>
			<input type="text" name="fullName">
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-full-name"></span>
		</div>

		<div class="wcs-profile-settings-form-section">
			<label for="wcs_email">Email <span>*</span></label>
			<input type="email" name="wcs_email" id="wcs_email">
			<!-- READ-ONLY HTML BELOW -->
			<!-- <input class="wcs-profile-settings-form-readonly" type="email" name="email" readonly>
			<span class="wcs-settings-form-disclaimer">This email address is tied to your google account and can't be edited</span> -->
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-email"></span>
		</div>
        

		<!-- USERNAME ONLY -->
		<!-- <div class="wcs-profile-settings-form-section">
			<label for="username">Username <span>*</span></label>
			<input type="text" name="username">
			<span class="wcs-settings-form-err-msg">Please enter a username</span>
		</div> -->

        <div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
            <div class="wcs-profile-settings-form-section-inner wcs-profile-settings-form-section-inner-multi">
                <div>
                    <label for="dobYear">Year of Birth</label>
                    <select name="dobYear">
                                                <option value=""></option>
                                                    <option value="2004">2004</option>
                            2004
                                                    <option value="2003">2003</option>
                            2003
                                                    <option value="2002">2002</option>
                            2002
                                                    <option value="2001">2001</option>
                            2001
                                                    <option value="2000">2000</option>
                            2000
                                                    <option value="1999">1999</option>
                            1999
                                                    <option value="1998">1998</option>
                            1998
                                                    <option value="1997">1997</option>
                            1997
                                                    <option value="1996">1996</option>
                            1996
                                                    <option value="1995">1995</option>
                            1995
                                                    <option value="1994">1994</option>
                            1994
                                                    <option value="1993">1993</option>
                            1993
                                                    <option value="1992">1992</option>
                            1992
                                                    <option value="1991">1991</option>
                            1991
                                                    <option value="1990">1990</option>
                            1990
                                                    <option value="1989">1989</option>
                            1989
                                                    <option value="1988">1988</option>
                            1988
                                                    <option value="1987">1987</option>
                            1987
                                                    <option value="1986">1986</option>
                            1986
                                                    <option value="1985">1985</option>
                            1985
                                                    <option value="1984">1984</option>
                            1984
                                                    <option value="1983">1983</option>
                            1983
                                                    <option value="1982">1982</option>
                            1982
                                                    <option value="1981">1981</option>
                            1981
                                                    <option value="1980">1980</option>
                            1980
                                                    <option value="1979">1979</option>
                            1979
                                                    <option value="1978">1978</option>
                            1978
                                                    <option value="1977">1977</option>
                            1977
                                                    <option value="1976">1976</option>
                            1976
                                                    <option value="1975">1975</option>
                            1975
                                                    <option value="1974">1974</option>
                            1974
                                                    <option value="1973">1973</option>
                            1973
                                                    <option value="1972">1972</option>
                            1972
                                                    <option value="1971">1971</option>
                            1971
                                                    <option value="1970">1970</option>
                            1970
                                                    <option value="1969">1969</option>
                            1969
                                                    <option value="1968">1968</option>
                            1968
                                                    <option value="1967">1967</option>
                            1967
                                                    <option value="1966">1966</option>
                            1966
                                                    <option value="1965">1965</option>
                            1965
                                                    <option value="1964">1964</option>
                            1964
                                                    <option value="1963">1963</option>
                            1963
                                                    <option value="1962">1962</option>
                            1962
                                                    <option value="1961">1961</option>
                            1961
                                                    <option value="1960">1960</option>
                            1960
                                                    <option value="1959">1959</option>
                            1959
                                                    <option value="1958">1958</option>
                            1958
                                                    <option value="1957">1957</option>
                            1957
                                                    <option value="1956">1956</option>
                            1956
                                                    <option value="1955">1955</option>
                            1955
                                                    <option value="1954">1954</option>
                            1954
                                                    <option value="1953">1953</option>
                            1953
                                                    <option value="1952">1952</option>
                            1952
                                                    <option value="1951">1951</option>
                            1951
                                                    <option value="1950">1950</option>
                            1950
                                                    <option value="1949">1949</option>
                            1949
                                                    <option value="1948">1948</option>
                            1948
                                                    <option value="1947">1947</option>
                            1947
                                                    <option value="1946">1946</option>
                            1946
                                                    <option value="1945">1945</option>
                            1945
                                                    <option value="1944">1944</option>
                            1944
                                                    <option value="1943">1943</option>
                            1943
                                                    <option value="1942">1942</option>
                            1942
                                                    <option value="1941">1941</option>
                            1941
                                                    <option value="1940">1940</option>
                            1940
                                                    <option value="1939">1939</option>
                            1939
                                                    <option value="1938">1938</option>
                            1938
                                                    <option value="1937">1937</option>
                            1937
                                                    <option value="1936">1936</option>
                            1936
                                                    <option value="1935">1935</option>
                            1935
                                                    <option value="1934">1934</option>
                            1934
                                                    <option value="1933">1933</option>
                            1933
                                                    <option value="1932">1932</option>
                            1932
                                                    <option value="1931">1931</option>
                            1931
                                                    <option value="1930">1930</option>
                            1930
                                                    <option value="1929">1929</option>
                            1929
                                                    <option value="1928">1928</option>
                            1928
                                                    <option value="1927">1927</option>
                            1927
                                                    <option value="1926">1926</option>
                            1926
                                                    <option value="1925">1925</option>
                            1925
                                                    <option value="1924">1924</option>
                            1924
                                                    <option value="1923">1923</option>
                            1923
                                                    <option value="1922">1922</option>
                            1922
                                                    <option value="1921">1921</option>
                            1921
                                                    <option value="1920">1920</option>
                            1920
                                                    <option value="1919">1919</option>
                            1919
                                                    <option value="1918">1918</option>
                            1918
                                                    <option value="1917">1917</option>
                            1917
                                                    <option value="1916">1916</option>
                            1916
                                                    <option value="1915">1915</option>
                            1915
                                                    <option value="1914">1914</option>
                            1914
                                                    <option value="1913">1913</option>
                            1913
                                                    <option value="1912">1912</option>
                            1912
                                                    <option value="1911">1911</option>
                            1911
                                                    <option value="1910">1910</option>
                            1910
                                                    <option value="1909">1909</option>
                            1909
                                                    <option value="1908">1908</option>
                            1908
                                                    <option value="1907">1907</option>
                            1907
                                                    <option value="1906">1906</option>
                            1906
                                                    <option value="1905">1905</option>
                            1905
                                                    <option value="1904">1904</option>
                            1904
                                                    <option value="1903">1903</option>
                            1903
                                                    <option value="1902">1902</option>
                            1902
                                                    <option value="1901">1901</option>
                            1901
                                                    <option value="1900">1900</option>
                            1900
                        
                    </select>
                </div>
            </div>
        </div>

		<div class="wcs-profile-settings-form-section">
			<div class="wcs-profile-settings-form-checkbox-wrap wcs-profile-settings-newsletter-container">
				<input type="checkbox" name="newsletter_signup" value="newsletter_signup" id="newsletter_signup" checked>
				<label class="wcs-checkbox-label" for="newsletter_signup">Sign up for the cbs58 newsletter</label>
			</div>
		</div>

        <div class="wcs-profile-settings-form-section">
			<div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
			<span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
        </div>

        <div class="wcs-profile-settings-form-section wcs-profile-registration-terms">
			<b>By submitting this form you are accepting the <a href="/terms-of-use/" target="_blank">Terms of Service</a> and agreeing that you are 18 years of age or older.</b>
        </div>
		
		<div class="wcs-profile-settings-edit-message"></div>

        <input type="hidden" name="is_social" value="0"/>
        <input type="hidden" name="is_update" value="0"/>
		<div class="wcs-profile-settings-form-submit">
			<button class="wcs-cancel-btn" type="button">Cancel</button>
			<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
		</div>
	</form>
</script>


<script type="text/html" id="template_notifications">
	<div class="wcs-profile-settings-form-section manage-notifications">
		<div class="notifications-small-text">
			Your personal CBS58 notifications are always available by clicking the bell at the top of the site and CBS58 apps. You can also personalize if you receive notifications through the methods below.
		</div>
		<h3>Enable Notification Types</h3>
		<table id="wcs-profile-alerts-table">
			<tr>
                				<td class="wcs-profile-alerts-td">
			        <div class="alert-info-container">
						<div class="wcs-profile-tooltip">
							<span>Receive alerts right on your computer and click directly to MeTV.com</span>
			            	<i class="fas fa-info-circle"></i>
						</div>
						<label>Browser alerts</label>
						<div class="toggle-wrapper">
			            	<input type="checkbox" name="enable_browser_alerts" class="custom-switch showinplaylist-switch enable_browser_alerts-switch" id="enable_browser_alerts" />
						</div>
					</div>
			     </td>
                 				 <td class="wcs-profile-alerts-td">
		            <div class="alert-info-container-email">
						<div class="wcs-profile-tooltip">
							<span>Enable and verify your email to receive alerts in your mail inbox</span>
		                 	<i class="fas fa-info-circle"></i>
						</div>
						<label>Email alerts</label>
						 <div class="toggle-wrapper">
		                	<input type="checkbox" name="enable_email_alerts" class="custom-switch nosponsor-switch enable_email_alerts-switch" id="enable_email_alerts" />
						</div>
					</div>
	        	</td>
	    	</tr>
		</table>
		<div id="wcs_notifications_settings">
			<h3>News Topic Notifications</h3>
			<ul class="wcs-profile-settings-form">
				<li>
					<label>News topics that you follow</label>
					                    <span class="disabled_check"><input data-name="content_browser_alerts" type="checkbox" id="content_browser_alerts" disabled/> <label class="notify_check" for="content_browser_alerts">Browser alerts</label></span>
                                                            
                    <span class="disabled_check"><input data-name="content_email_alerts" type="checkbox" id="content_email_alerts" disabled/> <label class="notify_check" for="content_email_alerts">Email alerts</label></span>
				</li>
				<li>
					<label class="label-top-margin">Likes on your comments</label>
					                    <span class="disabled_check"><input data-name="likes_browser_alerts" type="checkbox" id="likes_browser_alerts" disabled/> <label class="notify_check" for="likes_browser_alerts">Browser alerts</label></span>
                                        
                    
                    <span class="disabled_check"><input data-name="likes_email_alerts" type="checkbox" id="likes_email_alerts" disabled/> <label class="notify_check" for="likes_email_alerts"> Email alerts</label></span>
				</li>
				<li>
					<label class="label-top-margin">Replies to your comments</label>
										<span class="disabled_check"><input data-name="replies_browser_alerts" type="checkbox" id="replies_browser_alerts" disabled/> <label class="notify_check" for="replies_browser_alerts">Browser alerts</label></span>
                                        
                    
					<span class="disabled_check"><input data-name="replies_email_alerts" type="checkbox" id="replies_email_alerts" disabled/> <label class="notify_check" for="replies_email_alerts">Email alerts</label></span>
				</li>
			</ul>
		</div>
	</div>
</script>
<script type="text/html" id="template_profile_header">
	<div class="wcs-profile-header">
		<div class="wcs-profile-header-logout">
			<a href="/social_auth/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
		</div>
		<div class="wcs-profile-header-user">
			<div class="wcs-profile-header-user-avatar">
				<img class="wcs-avatar" src="">
				<span class="wcs-popout-wrapper">
					<a class="wcs-update-avatar-trigger" href="#!">Update Image</a>
					<div class="wcs-popout">
						<ul class="wcs-popout-avatar">
	<li class="wcs-popout-avatar-upload">
		<label for="image-uploader">Upload a file: &nbsp;<span id="avatar_upload_notice"></span></label>
	    <input id="avatar_uploader" name="image-uploader" style="" type="file" value=""/>
        <!--
	    <div class="wcs-popout-file-upload-dropzone">
	        Or drag a file here to upload
	    </div>
        -->
	</li>     

</ul>					</div>
				</span>
			</div>
			<div class="wcs-profile-header-user-meta">
				<h1 class="wcs-profile-header-fullname wcs-verified-user"></h1>
				<span class="wcs-profile-header-username"></span>
	            <span class="wcs-profile-header-likes"><i class="fas fa-heart"></i> <span class="wcs-user-karma-number"></span> likes</span>
			</div>
		</div>
		<nav class="wcs-profile-nav">
			<ul>
	            <li class="wcs-profile-nav-tab wcs-profile-nav-active" style="display:none;"><a href="#!">Comments (<span class="wcs-comment-count"></span>)</a></li>
				<li class="wcs-profile-nav-tab wcs-profile-nav-active"><a href="#!">Settings</a></li>
				<li class="wcs-profile-nav-tab"><a href="#!">Notifications</a></li>
			</ul>
		</nav>
	</div>
</script>

<script type="text/html" id="template_profile_display_wrapper">
	<div class="wcs-profile-body">
	    <div class="wcs-profile-comments-wrap">
            <div class="wcs-profile-comments-load-more" style="display:none;">
                <button class="view-more-btn view-more-profilecomment" name="view-more-comments" type="button">Load more comments <i class="fas fa-angle-down"></i></button>
            </div>
	    </div>
	    <div class="wcs-profile-settings-wrap">
	    </div>
		<div class="wcs-profile-notifications-wrap">
	   </div>
	</div>
</script>

<script type="text/html" id="template_profile_loggedin_header">
    <div class="wcs-profile-settings-loggedin">
        <h2></h2>
        <p></p>
    </div>
</script>
       
<script type="text/html" id="template_login_header">
	<h1>Log in</h1>
	<p>Don't have an account? <a id="wcs-register-link" href="#!">Click here to register.</a></p>
</script>


<script type="text/html" id="template_login_form">
	<div class="wcs-login-wrapper">
	    <div class="wcs-login-type-heading">
			<span>Login with your email address</span>
		</div>
		<form class="wcs-profile-settings-form">
			<div class="wcs-profile-settings-form-section wcs-profile-settings-form-section-multi">
				<div class="wcs-profile-settings-form-section-inner">
					<label for="email">Email <span>*</span></label>
					<input type="text" name="email">
					<span class="wcs-settings-form-err-msg wcs-settings-form-err-email"></span>
				</div>
			</div>
            <div class="wcs-profile-settings-login-message">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-generic"></span>
            </div>

			<div class="wcs-profile-settings-form-submit">
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>            
		</form>
	</div>
</script>

<script type="text/html" id="template_forgotpass_success">
	<div id="wcs-email-registration-social">    
        <h1>Instructions on how to login have been emailed to you.</h1>        
        <p>
            Please allow a few minutes for the email to be sent and then follow the instructions in the email. 
        </p>
    </div>
</script>

<script type="text/html" id="template_forgotpass_form">    
	<div class="wcs-profile-settings-wrap">
        <h1>Forgot Username/Password</h1>
		<p>Enter your email address to retrieve your username and/or reset your password. <a id="wcs-login-link" href="#!">Click here to return to the login page.</a></p>
		<form class="wcs-profile-settings-form">
            <div class="wcs-profile-settings-form-section">
                <label for="wcs_email">Email <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-email"></span>
                <input type="email" name="wcs_email">
            </div>
            <div class="wcs-profile-settings-form-section">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
                <div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
            </div>
			<div class="wcs-profile-settings-form-submit">
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_update_password">
	<div class="wcs-profile-settings-wrap">
		<h1>Update password</h1>
		<p>Update your password below. <a href="#!" class='wcs-update-password-settings-link'>Click here to return to your profile.</a></p>
		<form class="wcs-profile-settings-form">
            <div class="wcs-profile-settings-form-section">
                <label for="password">Current password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password"></span>
				<input type="password" name="password" id="password">
            </div>

            <div class="wcs-profile-settings-form-section">
                <label for="password1">New password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password1"></span>
				<input type="password" name="password1" id="password1">
            </div>

            <div class="wcs-profile-settings-form-section">
                <label for="email">Confirm new password <span>*</span></label>
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-password2"></span>
				<input type="password" name="password2" id="password2">
            </div>

            <div class="wcs-profile-settings-form-section">
                <span class="wcs-settings-form-err-msg wcs-settings-form-err-captcha"></span>
                <div id="recaptcha_site" class="g-recaptcha" data-sitekey="6Ld4mkkUAAAAAJFe_lkejOM7du9YdGoOCalXgNsi"></div>                         
            </div>
			<div class="wcs-profile-settings-form-submit">
				<button class="wcs-cancel-btn" type="button">Cancel</button>
				<input class="wcs-submit-btn" type="submit" name="submit" value="Submit">
			</div>
		</form>
	</div>
</script>

<script type="text/html" id="template_updatepass_success">
	<div id="wcs-email-registration-social">    
        <h1>Your password has been updated!</h1>        
        <p>
            The next time you login you'll need to use your new password. 
        </p>
    </div>
</script>  	<div id="wcs-comments-wrapper">
    </div>
    <style>
        .disabled_check{
            color: #ccc;
        }
        
        #wcs_notifications_settings label.notify_check {
            display: inline-block;
            font-weight: 400;
            margin-right: 15px;
            vertical-align: middle;
        }
        #notifications_reminder_type{
            max-width: 150px !important;
            display: inline-block;
            padding-right: 10px;
            margin-right: 20px;
        }
        
        ul.reminders-list{
            margin-left:5px;
        }
        ul li.wcs-profile-settings-noteworthy-reminder-wrap{
            padding-top: 0px;
            margin-bottom: 20px;           
        }
        li.wcs-profile-settings-noteworthy-episodes-wrap{
            margin-bottom:20px;
        }
        
        table#wcs-profile-alerts-table {
            margin-bottom: 20px;
            max-width: 500px;
        }        
        button.reminder-remove{
            margin-right: 20px;
        }

        ul.reminders-list li {
            position: relative;
            display: flex;
            align-items: center;
            margin-left: 20px;
        }
@media (max-width:500px) { 
    ul.reminders-list li {
        margin-left: 0px;
        padding-left: 0px;
    }
}        

#wcs-main-wrapper {
    margin: 0 !important;
}

        
</style>        
<div id="wcs-overlay-modal" class="wcs-overlay">
	<!-- FLAGGING COMMENTS -->
	<!-- <div class="wcs-modal-wrap wcs-modal-flagging">
		Are you sure you want to flag this comment?
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn">Cancel</button> <button class="wcs-submit-btn">Submit</button>
		</div>
	</div> -->

	<!-- DELETING COMMENTS -->
	<div class="wcs-modal-wrap wcs-modal-deleting">
        <span class="wcs-modal-innertext">Are you sure you want to delete this comment?</span>
		<div class="wcs-modal-btns">
			<button class="wcs-cancel-btn wcs-modal-btns-cancel">Cancel</button> <button class="wcs-submit-btn wcs-modal-btns-submit">Delete</button>
		</div>
	</div>
</div>
<!-- TEMPLATES -->
<script type="text/html" id="template_reply_container">
    <div class="wcs-reply-container">
        <h4>Reply to <a class="wcs-reply-username wcs-user-trigger wcs-verified-user" href="#!"></a></h4>
        <textarea id="subcomment_text" class="subcomment_text wcs-reply-textarea" placeholder="Leave a comment"></textarea>
        <div class="wcs-post-comment-logged-in-btns">
            <div class="wcs-post-comment-media-btns">
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-emoji" href="#!"><i class="far fa-smile"></i></a>
                    <div class="wcs-popout">
                        <ul class="wcs-popout-emojis">
    </ul>                    </div>
                </span>
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-video" href="#!"><i class="fab fa-youtube"></i></a>
                    <div class="wcs-popout">
                        <div class="wcs-popout-youtube">
    <input class="youtube_url" style="" type="text" placeholder="Paste youtube url here..." value=""/>
    <button type="button" class="wcs-submit-btn youtube-add btn btn-link">Add</button>
</div>                    </div>
                </span>
                <span class="wcs-popout-wrapper">
                    <a class="wcs-post-comment-media-image" href="#!"><i class="far fa-image"></i></a>
                    <div class="wcs-popout">
                        <div class="wcs-popout-image">
    <label for="image-uploader">Upload a file:</label>
    <input class="image_uploader" name="image-uploader" style="" type="file" value=""/>
    <div class="wcs-popout-file-upload-dropzone">
        Or drag a file here to upload
    </div>
</div>                    </div>
                </span>
            </div>
            <div class="wcs-post-comment-submit">
                <input class="wcs-submit-btn wcs-post-comment-button" type="submit" value="Post">
            </div>
        </div>
    </div>
</script>
<script type="text/html" id="template_reply_popup">
	<div class="wcs-popup-overlay" data-container-type="reply">
	    <div class="wcs-reply-container">
	    	<span class="wcs-reply-close-btn"><i class="fas fa-times"></i></span>
	        <textarea placeholder="Leave a reply"></textarea>
	        <div class="wcs-post-comment-logged-in-btns">
	            <div class="wcs-post-comment-media-btns">
	                <a class="wcs-post-comment-media-emoji" href="#!"><i class="far fa-smile"></i></a>
	                <a class="wcs-post-comment-media-video" href="#!"><i class="fab fa-youtube"></i></a>
	                <a class="wcs-post-comment-media-image" href="#!"><i class="far fa-image"></i></a>
	            </div>
	            <div class="wcs-post-comment-submit">
	                <input class="wcs-submit-btn wcs-post-comment-button" type="submit" value="Post">
	            </div>
	        </div>
	    </div>
	</div>
</script>

<script type="text/html" id="template_acomment">
    <div  class="wcs-comment-item">
        <span class="wcs-comment-flag"><i class="fas fa-flag"></i></span>
        <div class="wcs-comment-item-header">
            <a href="#!" class="wcs-user-trigger"><img class="wcs-avatar" src=""></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <a href="#!" data-userid="" class="wcs-user-trigger wcs-user-displayname"></a>
                    <i class="fas fa-share"></i>
                    <a data-userid="" class="wcs-user-trigger wcs-other-user" href="#!"></a>
                </span>
                <span class="wcs-comment-item-date">Seconds Ago</span>
            </div>
        </div>
        <div class="wcs-comment-item-text">
        </div>
        <div class="wcs-comment-item-footer">
            <a href="#!" class="wcs-like-btn wcs-like-trigger"><i class="fas fa-heart"></i></a>
            <a href="#!" class="wcs-reply-trigger"><i class="fas fa-comment-alt"></i> <span>Reply</span></a>
            <!-- <span class="wcs-popout-wrapper">
                <a href="#!" class="wcs-share-trigger"><i class="fas fa-share-alt"></i> <span>Share</span></a>
                <div class="wcs-popout">
                    <div class="wcs-popout-share">
    <a class="wcs-popout-share-btn wcs-popout-share-btn-facebook" target="_blank" href="javascript:void(0);">
    	<i class="fab fa-facebook-f"></i>
    </a>
    <a class="wcs-popout-share-btn wcs-popout-share-btn-twitter" target="_blank" href="javascript:void(0);">
    	<i class="fab fa-twitter"></i>
    </a>
    <a class="wcs-popout-share-btn wcs-popout-share-btn-email" href="javascript:void(0);">
    	<i class="far fa-envelope"></i>
    </a>
</div>                </div>
            </span> -->
            <a href="#!" class="wcs-delete-trigger"><i class="fas fa-trash-alt"></i> <span>Delete</span></a>
        </div>
    </div>
</script>

<script type="text/html" id="template_deleted_comment">
    <div data-replyinfo="" data-id="" id="" class="wcs-comment-item wcs-comment-item-parent">
        <div class="wcs-comment-item-header">
            <a data-userid="deleted" href="" class="wcs-user-trigger"><img class="wcs-avatar" src="/images/wcs_logged_out_user.gif"></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <span class="wcs-comment-item-username-removed">Deleted</span>
                </span>
                <span class="wcs-comment-item-date"></span>
            </div>
        </div>
        <span class="wcs-comment-item-text-removed">This comment has been removed.</span>
    </div>
</script>

<script type="text/html" id="template_loadinganimation">
 	<div class="wcs-loading-animation-overlay">
 		<div class="wcs-loading-animation">
			<div class="wcs-bounce1"></div>
			<div class="wcs-bounce2"></div>
			<div class="wcs-bounce3"></div>
		</div>
	</div>
</script>

<script type="text/html" id="template_listcomment">
    <div class="wcs-profile-comments-item">
        <h2 class="wcs-comment-post-title"><a href=""></a></h2>
        <div class="wcs-comment-item-header">
            <a href="#!" class="wcs-user-trigger"><img class="wcs-avatar wcs-avatar-img" src="http://placehold.it/50x50"></a>
            <div class="wcs-comment-item-header-meta">
                <span class="wcs-comment-item-username">
                    <a href="#!" class="wcs-user-trigger wcs-user-displayname wcs-verified-user"></a> <i class="fas fa-share"></i> <a class="wcs-user-trigger wcs-other-user wcs-verified-user" href="#!">Other User</a>
                </span>
                <span class="wcs-comment-item-date">3 hours ago</span>
            </div>
        </div>
        <div class="wcs-comment-item-text">
            Donec efficitur ut ligula suscipit vehicula. Morbi ut cursus est. Integer ligula lectus, fringilla sed commodo sed, laoreet et massa.
        </div>
                <div class="wcs-comment-item-footer">
            <a href="#!" class="wcs-view-in-discussion-trigger">
                <i class="fas fa-external-link-alt"></i> View in Discussion
            </a>
        </div>
            </div>
</script>

<script src="/js/reconnecting-websocket.min.js"></script>
<script type='text/javascript'>
    var WCS = WCS || {};
    WCS.SITE_URL = "//cbs58.com/";
    WCS.ONLY_CONTENT = false;
    WCS.THREAD_ID = 0;
    WCS.TALKUMS_SITE_ID = 8;
    WCS.REPLY_PARENT_ID = -1;
    WCS.REPLY_ANCESTOR_ID = -1;
    WCS.REPLY_PARENT_ADMIN = -1;
    WCS.REPLY_LEVEL = -1;
    WCS.FLAG_ID = -1;
    WCS.IS_POSTING = false;
    WCS.IS_LIKING = false;
    WCS.USER_ID = "-1";
    WCS.USER_EMAIL = "";
    WCS.USER = "";
    WCS.USER_DISPLAY_NAME = "";
    WCS.NOTIFICATION_SETTINGS_PAGE = false;
    WCS.socket = null;
    /*
    WCS.socketoptions = {
                  path: '/socketcluster/',
                  port: 3000,
                  hostname: '54.175.141.4'
          };
    */
    WCS.socketoptions = {
                  path: '/socketcluster/',
                  port: 8000,
                  hostname: '127.0.0.1'
          };
    WCS.errorMax = 2;
    WCS.errorCount = 0;
    WCS.TOTAL_COMMENTS = 0;
    WCS.termsAccepted = 0;
    WCS.emailConfirmed =  0;
    WCS.EMOJI_TARGET = 0;
    WCS.YOUTUBE_TARGET = 0;
    WCS.UPLOAD_TARGET = 0;
    WCS.DROP_FILE_NAME = "";
    WCS.DROP_FILE_TYPE = "";
    WCS.THREAD_URL = 'https://www.metv.com';
    WCS.BASE_THREAD_URL = '';
    WCS.THREAD_TITLE = '';
    WCS.SHARE_COMMENT_ID = '';
    WCS.FACEBOOK_SHARE = 'https://www.facebook.com/sharer/sharer.php?u=' + WCS.THREAD_URL;
    WCS.TWITTER_SHARE = 'https://twitter.com/home?status=' + WCS.THREAD_URL;
    WCS.PROFILE_OPEN = false;
    WCS.SIDEBAR_PAGE = "";
    WCS.POPUP_OPEN = false;
    WCS.CAPTCHA_SITE_KEY = '6LfwBUQUAAAAALPuABuclB4DSrMCClNMTn6204M7';
    WCS.REPLY_BOX = null;
    WCS.FILTER_TYPE = "newest"; //oldest, top
    WCS.FILTER_PAGE = 0;
    WCS.MODAL_CALLBACK = null;
    WCS.MODAL_OPEN = false;
    WCS.PROFILE_USER_ID = -1;
    WCS.RETURN_USER = false;
    WCS.SETTINGS_DATA = null;
    WCS.MAX_ID = 0;
    WCS.NEW_COMMENT_TOTAL = 0;
    WCS.LOADING_NEW_COMMENTS = false;
    WCS.PROFILE_COMMENT_PAGE = 0;
    WCS.PROFILE_COMMENT_USER = -1;
    WCS.IS_ONLYREGISTRATION = true;
    WCS.DESIRED_ACTION = "";
    WCS.DESIRED_TITLE = "";
    WCS.DESIRED_DESCRIPTION = "";
    WCS.SOCIAL_REGISTRATION_FORM = false;
    WCS.DEFAULT_SIGNUP_ZIPCODE = '';

    
WCS.OPEN_SIDEBAR = function(){
    $('#wcs-overlay-sidebar').addClass('wcs-overlay-open');
    $('#wcs-slideout-wrapper').addClass('wcs-slideout-open');
    $('body').addClass('wcs-no-scroll');

    //dont set WCS.PROFILE_OPEN yet...
    //sometimes have to wait for events to be done or it will close immediated
};

WCS.CLOSE_SIDEBAR = function(){
    $('#wcs-overlay-sidebar').removeClass('wcs-overlay-open');
    $('#wcs-slideout-wrapper').removeClass('wcs-slideout-open');
    $('#wcs-overlay-sidebar').removeClass('wcs-overlay-open');

    $('body').removeClass('wcs-no-scroll');
    WCS.PROFILE_USER_ID = -1;
    WCS.PROFILE_OPEN = false;
};




(function(){
    /****** USERNAME - SHOW SIDEBAR ********/
    $('body').on("mousedown", function(e) {
        if(WCS.PROFILE_OPEN){
            if ($(e.target).closest('#wcs-slideout-wrapper').length === 0 &&
                $(e.target).closest('#wcs-overlay-modal').length === 0) {
                //alert("closing because " + $(e.target).closest('#wcs-slideout-wrapper').length);
                //console.log(e.target);
                WCS.CLOSE_SIDEBAR();
            }
        }
        if(WCS.POPUP_OPEN){
            if(e.target && $(e.target).closest('.wcs-post-comment-media-btns').length <= 0 &&
                    $(e.target).closest('.wcs-profile-header-user-avatar').length <= 0 &&
                    $(e.target).closest('.wcs-popout-wrapper').length <= 0){
                $('.wcs-popout').removeClass('wcs-popout-active');
                WCS.POPUP_OPEN = false;
            }else{

            }
        }
        if(WCS.MODAL_OPEN){
            //close the modal if click is on background... meaning on wcs-overlay-modal
            if(e.target && e.target.id == 'wcs-overlay-modal'){
                if(WCS.MODAL_CALLBACK !== null){
                    WCS.MODAL_CALLBACK(false, true);
                }
                $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
                WCS.MODAL_OPEN = false;
            }
        }
    });

    $('body').on('click', '.wcs-user-trigger', function(e){
        //closes automatically if don't set this first
        e.preventDefault();
        var me = this;
        if($(this).data('userid') == 'deleted'){
            return false;
        }
        if(WEBVIEW.is_webview || WCS.ONLY_CONTENT){
            var userId = $(this).data('userid');
            if(WCS.USER_ID == userId){
                window.location.href = '/webview/?key=notification-settings&access_token=' + WEBVIEW.access_token;
            }else{
                window.location.href = '/webview/?key=comments&user_id=' + userId;
            }
            return false;
        }


        var openSettings = false;
        var hideSettings = false;
        var userId = parseInt($(this).data('userid'));
        if(userId == WCS.PROFILE_USER_ID){
            //do nothing because the same user
            return false;
        }
        if(isNaN(userId)){
            //shouldn't happen
            alert("User could not be found");
            return;
        }
        WCS.PROFILE_OPEN = false;
        WCS.loadSidebarTemplate('loading');



        if(!$('#wcs-overlay-sidebar').hasClass('wcs-overlay-open')){
            WCS.OPEN_SIDEBAR();
        }
        if($(me).hasClass('wcs-post-comment-user-settings')){
            openSettings = true;
        }else{
            if(parseInt(WCS.USER_ID) !== userId){
                hideSettings = true;
            }
        }
        var notifications_tab = false;
        if($(me).hasClass('wcs-post-comment-user-notifications')){
            notifications_tab = true;
        }else{
            if(parseInt(WCS.USER_ID) !== userId){
                hideSettings = true;
            }
        }
        var endpoint = 'get_user_public_profile';
        if(!hideSettings){
            endpoint = 'get_user_private_profile';
        }
        $.ajax({
            url: '/ajax_comments/' + endpoint,
            data: {
                 user_id: userId,
                 get_comments: 1
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {

                WCS.PROFILE_USER_ID = userId;
                WCS.PROFILE_OPEN = true;
                //if not logged in hide settings tab
                if($(me).hasClass('wcs-post-comment-user-settings')){
                    if(WCS.termsAccepted == 1){
                        WCS.loadSidebarTemplate('profile_user');
                    }else{
                        WCS.force_action('accept_terms', true);
                        return;
                    }
                }else{
                    if(parseInt(WCS.USER_ID) !== userId){
                        WCS.loadSidebarTemplate('profile_other');
                    }else{
                        if(WCS.termsAccepted == 1){
                            WCS.loadSidebarTemplate('profile_user');
                        }else{
                            WCS.force_action('accept_terms', true);
                            return;
                        }
                    }
                }
                setTimeout(function(){
                console.log(resp);
                var user = resp['user'];
                var comments = resp['comments'];                
                if(user['is_admin'] == 1){
                    $('.wcs-profile-header-fullname').text(user['short_name']);
                    $('.wcs-profile-header-fullname').addClass('wcs-verified-user');
                }else{
                    $('.wcs-profile-header-fullname').removeClass('wcs-verified-user');
                }
                //use profile_url because two people from different services could have same name, but not same profile url
                $('.wcs-profile-header-username').text("@" + user['first_name']);
                $('.wcs-profile-header-user-avatar .wcs-avatar').attr('src', user['profile_image']);
                $('.wcs-comment-count').text(user['comment_count']);
                $('.wcs-user-karma-number').text(user['karma']);

                //$('.wcs-profile-header-likes span').text(user['total_likes']);
                //$('.wcs-profile-nav a.wcs-comments-total span').text();
                $('.wcs-profile-comments-wrap .wcs-profile-comments-item').remove();
                WCS.appendProfileComments(comments, resp['has_more']);
                WCS.PROFILE_COMMENT_PAGE = 0;
                WCS.PROFILE_COMMENT_USER = userId;

                var settings_wrapper = document.getElementById('wcs_notifications_settings');
                //var notifications_settings = resp.notifications;
                
                if(resp['email_notifications'] == 1){
                    $("#enable_email_alerts").attr('checked', 'checked');
                }
                
                if(resp['app_notifications'] == 1){
                    $("#enable_app_alerts").attr('checked', 'checked');
                }
                
                if(resp['browser_notifications'] == 1){
                    $("#enable_browser_alerts").attr('checked', 'checked');
                }
                
                console.log("notification refresh comments");
                WCS.refreshNotifications(resp['email_notifications'], 
                    resp['app_notifications'], resp['browser_notifications'], 
                    resp['notification_settings']);   
                    
                WCS.refreshReminderList(resp['user_reminders']);
                
                $('.wcs-profile-nav-tab').removeClass('wcs-profile-nav-active');
                if(openSettings){
                    $('.wcs-profile-comments-wrap').hide();
                    $('.wcs-profile-notifications-wrap').hide();
                    $('.wcs-profile-settings-wrap').show();
                    $('.wcs-profile-nav-tab').eq(1).addClass('wcs-profile-nav-active');
                }else if(notifications_tab){
                            
                    $('.wcs-profile-comments-wrap').hide();
                    $('.wcs-profile-settings-wrap').hide();
                    $('.wcs-post-comment-user-notifications').show();
                    $('.wcs-profile-nav-tab').eq(2).addClass('wcs-profile-nav-active');
                }else{
                    //no comments anymore
                    /*
                    $('.wcs-profile-comments-wrap').show();
                    $('.wcs-profile-settings-wrap').hide();
                    $('.wcs-profile-notifications-wrap').hide();
                    $('.wcs-profile-nav-tab').eq(0).addClass('wcs-profile-nav-active');
                    */
                    $('.wcs-profile-comments-wrap').hide();
                    $('.wcs-profile-notifications-wrap').hide();
                    $('.wcs-profile-settings-wrap').show();
                    $('.wcs-profile-nav-tab').eq(1).addClass('wcs-profile-nav-active');                   
                }
                if(hideSettings){
                    $('.wcs-profile-nav-tab').eq( 1 ).hide();
                    $('.wcs-update-avatar-trigger').hide();
                }else{
                	$('.wcs-profile-header-logout').show();
                	$('.wcs-profile-header').addClass('wcs-profile-header-logged-in')
                    $('.wcs-profile-nav-tab').eq( 1 ).show();
                }
                var isSocial = false;
                if(user['service'] == 'google' || user['service'] == 'facebook' || user['service'] == 'twitter'){
                    isSocial = true;
                }

                WCS.setupProfileForm('settings', isSocial);
                if(!hideSettings){
                    //hide terms because registration is already done
                    $('.wcs-profile-settings-terms-container').hide();
                    $('input[name="is_update"]').val(1);
                    WCS.fillSettingsData(user);
                    //ugh, need to save this for the password update form
                    WCS.SETTINGS_DATA = user;
                }
                }, 50);
            },
            error: function(response)
            {
                console.log(response.responseText);
                console.log(response);
            }
        });

    });

    $('#wcs-main-wrapper').on('click', '.wcs-comment-flag', function(e){
        var me = this;
        if($(this).hasClass("wcs-comment-flag-active")){
            WCS.showModal("This comment is already flagged and will be reviewed by our staff.", "OK", function(){});
            return false;
        }
        e.preventDefault();
        WCS.showModal("Are you sure you want to flag this comment?", "Flag", function(doit){
            if(!doit){
                return false;
            }
            var $commentObj = $(me).closest('.wcs-comment-item');
            var commentId = $commentObj.data('id');

            $.ajax({
                url: '/ajax_comments/flag_comment',
                data: {
                     comment_id: commentId,
                     access_token: WEBVIEW.access_token
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    if(resp['success'] == 'true'){
                        $(me).addClass('wcs-comment-flag-active');
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                },
                error: function(response)
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);
                }
            });


        });


    });

    /** LIKE REPLY SHARE DELETE  **/
    $('#wcs-main-wrapper').on('click', '.wcs-like-trigger', function(e){
        e.preventDefault();
        var $commentObj = $(this).closest('.wcs-comment-item');
        var commentId = $commentObj.data('id');
        var replyInfo = $commentObj.data('replyinfo');
        var posterId = replyInfo.split('|')[0];
        var me = this;
        var isLike = 1;
        if($(this).text().trim().indexOf('Unlike') === 0){
            isLike = 0;
        }
        if(WCS.IS_LIKING){
            return;
        }
        WCS.IS_LIKING = true;

        $.ajax({
            url: '/ajax_comments/do_upvote',
            data: {
                 comment_id: commentId,
                 thread_id: WCS.THREAD_ID,
                 poster_id : posterId,
                 like_it : isLike,
                 access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {
                WCS.IS_LIKING = false;
                if(resp['success'] == 'false'){
                    if(resp['action']){
                        WCS.force_action(resp['action']);
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                    return;
                }
                var totalText = "";
                if(resp['total'] > 0){
                    totalText = " (" + resp['total'] + ')';
                }
                if(isLike == 1){
                    $(me).html('<i class="fas fa-heart"></i>' + " Unlike" + totalText);
                    $(me).addClass('wcs-like-btn-active');
                }else{
                    $(me).html('<i class="fas fa-heart"></i>' + " Like" + totalText);
                    $(me).removeClass('wcs-like-btn-active');
                }
            },
            error: function(response)
            {

            }
        });
    });


    //assumes reply comments are expanded
    var getLevel = function(cid, level){

        if($('#comment_' + cid).hasClass('wcs-comment-item-parent')){
            return level;
        }
        var replyInfo = $('#comment_' + cid).data('replyinfo');
        console.log("replyinfo");
        console.log(replyInfo);
        if(!replyInfo){
            return level;
        }
        var parentId = replyInfo.split('|')[2];
        level++;
        getLevel(parentId, level);
    };

    $('#wcs-main-wrapper').on('click', '.wcs-reply-trigger', function(e){
        //console.log(this);
        e.preventDefault();
        if(WCS.USER_ID < 0){
            WCS.showModal("Please login to reply to this comment", "OK", function(){});
            return false;
        }

        $('.wcs-reply-container').removeClass('wcs-reply-container-open');
        var $topComment = $(this).closest('.wcs-comment-item-parent');
        var $parentComment = $(this).closest('.wcs-comment-item');
        var replyInfo = $parentComment.data('replyinfo');
        var isAdmin = $parentComment.data('isadmin');
        var parentId =  $parentComment.data('id');
        var parentUserid = replyInfo.split('|')[0];
        var parentName = replyInfo.split('|')[1];
        var ancestorId = $topComment.data('id');
        var commentId = $parentComment.data('id');

        //var replyHtml = $('#template_reply_container').html();
        WCS.REPLY_ANCESTOR_ID = ancestorId;
        WCS.REPLY_PARENT_ID = commentId;
        WCS.REPLY_PARENT_NAME = parentName;
        WCS.REPLY_PARENT_ADMIN = isAdmin;
        //do we even need a level?  probably not unless we change the structure again
        WCS.REPLY_LEVEL = getLevel(commentId, 1);
        var $replyBox = $topComment.find('.wcs-reply-container');

        $replyBox.addClass('wcs-reply-container-open');

        // scroll to reply block
        var itemTop = $replyBox.offset().top;
        console.log('Scroll top: ', itemTop);
        $('html,body').stop().animate({
            scrollTop: itemTop-100
        }, 800, function(){
        	$replyBox.children('textarea').focus();
        });

        //$replyBox.children('textarea').focus();

        $replyBox.find('.wcs-reply-username').text(parentName);
        $replyBox.find('.wcs-reply-username').attr('data-userid', parentUserid);
        if(isAdmin == 1){
            $replyBox.find('.wcs-reply-username').addClass('wcs-verified-user');
        }
        else{
            $replyBox.find('.wcs-reply-username').removeClass('wcs-verified-user');
        }
        //WCS.REPLY_BOX = $replyBox;

    });


    $('#wcs-main-wrapper').on('click', '.wcs-share-trigger', function(e){
        e.preventDefault();
        $(this).next().addClass('wcs-popout-active');
        var $commentObj = $(this).closest('.wcs-comment-item');
        var shareId = $commentObj.data('id');
       // WCS.POPUP_OPEN = true;
        var text = $commentObj.find('.wcs-comment-item-text').text().trim();
        var cutString = function(s, n){
            var cut= s.indexOf(' ', n);
            if(cut== -1) return s;
            return s.substring(0, cut)
        }
        text = cutString(text, 150)
        WCS.FACEBOOK_SHARE = 'https://www.facebook.com/sharer/sharer.php?u=' + WCS.THREAD_URL + "#comment_" + shareId;
        WCS.TWITTER_SHARE = 'https://twitter.com/home?status=' + text + "... " + WCS.THREAD_URL + "#comment_" + shareId;
        $(this).next().find('.wcs-popout-share-btn-facebook').attr('href', WCS.FACEBOOK_SHARE);
        $(this).next().find('.wcs-popout-share-btn-twitter').attr('href', WCS.TWITTER_SHARE);

        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&#039;', "'");
        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&quot;', "'");
        WCS.THREAD_TITLE = WCS.THREAD_TITLE.replaceAll('&amp;', "&");

        var mailData = "subject=" + encodeURIComponent("Svengoolie - " + WCS.THREAD_TITLE) + "&body=" + encodeURIComponent(text);
        var mailShare = "mailto:?" + mailData;
        $(this).next().find('.wcs-popout-share-btn-email').attr('href', mailShare);

        $(this).next().find('.wcs-popout-share-btn-facebook').prop("target","_blank");
        $(this).next().find('.wcs-popout-share-btn-twitter').prop("target","_blank");

        WCS.POPUP_OPEN = true;
    });
    $('#wcs-main-wrapper').on('click', '.wcs-popout-share-btn', function(e){
        e.preventDefault();
        $('.wcs-popout').removeClass('wcs-popout-active');
        WCS.POPUP_OPEN = false;
    });


    $('#wcs-main-wrapper').on('click', '.wcs-delete-trigger', function(e){
        e.preventDefault();
        var me = this;
        WCS.showModal("Are you sure you want to delete this comment?", "Delete", function(doit){
            if(!doit){
                return false;
            }

            var $commentObj = $(me).closest('.wcs-comment-item');
            var deleteId = $commentObj.data('id');
            $.ajax({
                url: '/ajax_comments/delete_comment',
                data: {
                     comment_id: deleteId,
                     access_token: WEBVIEW.access_token
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    if(resp['success'] == 'true'){
                        if(resp['delete_type'] == 2){
                            var $elem = $('#comment_' + deleteId);
                            $elem.addClass('wcs-comment-item-deleted');
                            setTimeout(function(){
                                $elem.remove();
                            }, 500);
                        }else{
                            WCS.setDeleted(deleteId);
                        }
                    }else{
                        WCS.showModal(resp['msg'], "OK", function(){});
                    }
                },
                error: function(response)
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);
                }
            });
        });
    });

    /******** Profile Avatar Select Popup ***********/
    $('#wcs-main-wrapper').on('click', '.wcs-update-avatar-trigger', function(e){
        e.preventDefault();
        $(this).next().addClass('wcs-popout-active');
        WCS.POPUP_OPEN = true;
    });

    $('#wcs-main-wrapper').on('click', '.selectmoji', function(e){
        e.preventDefault();
        var currEmoji = $(this).data('emoji');
        $.ajax({
            url: '/ajax_comments/update_emoji',
            data: {
                 emoji_file: currEmoji,
                 access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(resp)
            {
                console.log("emokiji arespoinse");
                console.log(resp);
                if(resp['success'] == 'false'){
                    WCS.showModal(resp['msg'], "OK", function(){});
                }else{
                    $('.wcs-popout').removeClass('wcs-popout-active');
                    WCS.POPUP_OPEN = false;
                    //go through each comment, activate delete if user matches
                    $('.wcs-comment-item-reply').each(function(){
                        var replyInfo = $(this).data('replyinfo');
                        var userId = replyInfo.split('|')[0];
                        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                        if(WCS.USER_ID == userId){
                            //console.log("setting avatar1 " + resp['profile_image']);
                            $(this).find('.wcs-avatar').attr('src', resp['profile_image']);
                            //new Date().getTime()
                        }
                    });
                    $('.wcs-comment-item-parent').each(function(){
                        var replyInfo = $(this).data('replyinfo');
                        var userId = replyInfo.split('|')[0];
                        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                        if(WCS.USER_ID == userId){
                            //console.log("setting avatar2 " + resp['profile_image']);
                            $(this).find('.wcs-avatar').first().attr('src', resp['profile_image']);
                        }
                    });
                    //loggedinDisplay(resp);
                    loginSuccess(resp, true, true);
                }
            },
            error: function(response)
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);
            }
        });
    });
    /******** emoji, youtube, image embed **********/

    $('#wcs-main-wrapper').on('click', '.wcs-post-comment-media-emoji,.wcs-post-comment-media-video,.wcs-post-comment-media-image', function(e){

        //add wcs-selected-textarea to the area we want to insert emoji
        var $topComment = $(this).closest('.wcs-comment-item-parent');
        $('.wcs-selected-textarea').removeClass('wcs-selected-textarea');
        var $textarea = $('#topcomment_text');
        if($topComment.length > 0){
            $textarea = $topComment.find('.wcs-reply-textarea');
        }
        $textarea.addClass('wcs-selected-textarea');
        //display the popup
        $('.wcs-popout').removeClass('wcs-popout-active');
        $(this).next().addClass('wcs-popout-active');
        WCS.POPUP_OPEN = true;
        console.log("this is");
        console.log(this);
        var me = this;
        //only add these events when popup is open
        if($(this).hasClass('wcs-post-comment-media-image')){
            var holder = $(this).next().find('.wcs-popout-file-upload-dropzone').get(0);

            holder.ondragenter = function(e) { holder.textContent = 'Or drag a file here to upload';
                         e.stopPropagation(); e.preventDefault();};
            holder.ondragover = function (e) { e.stopPropagation(); e.preventDefault(); return false; };
            holder.ondragend = function () {
                //this.className = '';
                return false;
            };
            holder.ondrop = function (e) {
              //this.className = '';
              e.preventDefault();
              e.stopPropagation();
              $(this).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('<i class="fa fa-sync fa-spin fa-3x"></i>');

              WCS.readfiles(e.dataTransfer.files, function(theid, msg){
                if(theid === null){
                    WCS.showModal(msg, "OK", function(){});
                    return;
                }
                var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;
                $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[image=" + imageUrl + "]");
                $(me).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('Or drag a file here to upload');
                $('.wcs-popout').removeClass('wcs-popout-active');
                WCS.POPUP_OPEN = false;
              });
            }
        }

        e.preventDefault();
        return false;
    });

    $('#wcs-main-wrapper').on('click', '.selectemoji', function(e){
        e.preventDefault();
        var elem =$('#talkums_text').get(0);
        var theEmoji = $(this).data('emoji');
        $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + ":" + theEmoji + ":");

        $('.wcs-popout').removeClass('wcs-popout-active');
        WCS.POPUP_OPEN = false;
    });

    $('#wcs-main-wrapper').on('click', '.youtube-add', function(e){
        e.preventDefault();
       var theUrl = $(this).closest('.wcs-post-comment-media-btns').find('.youtube_url').val();
        var regExp = /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        var youtubeId = "";
        var match = theUrl.match(regExp);
        if (match && match[2].length == 11) {
          youtubeId = match[2];
        } else {
            WCS.showModal("Please enter a valid youtube url", "OK", function(){});
            return false;
        }
        var myUrl = "https://www.youtube.com/watch?v=" + youtubeId;
       $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[youtube=" + myUrl + "]");
       $('.wcs-popout').removeClass('wcs-popout-active');
       WCS.POPUP_OPEN = false;
    });

    $('#wcs-main-wrapper').on('change', '.image_uploader', function(){
        var me = this;
        $(this).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('<i class="fa fa-sync fa-spin fa-3x"></i>');
        WCS.doS3Upload(null, function(theid, msg){
            if(theid === null){
                WCS.showModal(msg, "OK", function(){});
                return;
            }
            var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;
            $('.wcs-selected-textarea').val($('.wcs-selected-textarea').val() + "[image=" + imageUrl + "]");
            $(me).closest('.wcs-post-comment-media-btns').find('.wcs-popout-file-upload-dropzone').html('Or drag a file here to upload');
            $('.wcs-popout').removeClass('wcs-popout-active');
            WCS.resetFormElement($(me));

            WCS.POPUP_OPEN = false;
        });
    });
    $('#wcs-main-wrapper').on('change', '#avatar_uploader', function(){
        $(this).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('<i class="fa fa-sync fa-spin"></i>');
        var me = this;
        WCS.doS3Upload('avatar', function(theid, msg){
            if(theid === null){
                WCS.resetFormElement($(me));
                $(me).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('');
                WCS.CLOSE_SIDEBAR();
                WCS.showModal(msg, "OK", function(){});
                return;
            }
            var imageUrl = 'https://weigel-comments.s3.us-east-1.amazonaws.com/' + theid;

            console.log(imageUrl);
            $.ajax({
                url: '/ajax_comments/update_avatar',                
                data: {
                     user_upload: imageUrl,
                     access_token: WEBVIEW.access_token
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    WCS.resetFormElement($(me));
                    $(me).closest('.wcs-popout-avatar').find('#avatar_upload_notice').html('');
                    if(resp['success'] == 'true'){
                        //close avatar window
                        //go through each comment, activate delete if user matches
                        $('.wcs-comment-item-reply').each(function(){
                            var replyInfo = $(this).data('replyinfo');
                            var userId = replyInfo.split('|')[0];
                            //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                            if(WCS.USER_ID == userId){
                                $(this).find('.wcs-avatar').attr('src', resp['profile_image'] + "?" + new Date().getTime());
                            }
                        });
                        $('.wcs-comment-item-parent').each(function(){
                            var replyInfo = $(this).data('replyinfo');
                            var userId = replyInfo.split('|')[0];
                            //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
                            if(WCS.USER_ID == userId){
                                $(this).find('.wcs-avatar').first().attr('src', resp['profile_image'] + "?" + new Date().getTime());
                            }
                        });
                        //loggedinDisplay(resp);
                        loginSuccess(resp, true, true);
                    }else{
                        if(resp['msg']){
                            WCS.showModal(resp['msg'], "OK", function(){});
                        }
                    }
                },
                error: function(response)
                {
                    alert("Error");
                    console.log(response.responseText);
                    console.log(response);
                }
            });

        });

    });

    $('#wcs-main-wrapper').on('click', '.wcs-post-comment-button', function(e){
        var text = $('#topcomment_text').val();
        var isReply = $(this).closest('.wcs-reply-container').length > 0 ? true : false;
        if(isReply){
            var $textarea = $(this).closest('.wcs-reply-container').find('.wcs-reply-textarea');
            text = $textarea.val();
            $textarea.addClass('wcs-reply-textarea-submitting');
        }
        WCS.doComment(isReply, text);
        e.preventDefault();
        return;
    });

    $('#wcs-main-wrapper').on('click', '.wcs-login-google', function(e){
        e.preventDefault();
        WCS.doAuthWindow('google');
        return false;

    });
    $('#wcs-main-wrapper').on('click', '.wcs-login-twitter', function(e){
        e.preventDefault();
        WCS.doAuthWindow('twitter');
        return false;
    });
    $('#wcs-main-wrapper').on('click', '.wcs-login-facebook', function(e){
        e.preventDefault();
        WCS.doAuthWindow('facebook');
        return false;
    });
    $('.wcs-login-email').on('click', function(e){
        if(WCS.RETURN_USER){
            WCS.loadSidebarTemplate('login')
            WCS.setupProfileForm('login');
        }else{
            WCS.loadSidebarTemplate('register')
            WCS.setupProfileForm('register');
        }
    });    
    
    $('.wcs-force-login').on('click', function(e){
        if(WEBVIEW.is_webview){
            var isValid = WEBVIEW.is_invalid_user("add-user-tag", "to add a favorite show");
            if(isValid){
                $('.wcs-favorites-login').html("Thank you for logging in.  Click 'Add to Favorites' to receive personalized content related to that show.")
            }
        }else{            
            WCS.loadSidebarTemplate('login')
            WCS.setupProfileForm('login');
        }
    });    
    
    $('.wcs-login-app').on('click', function(e){  
        WEBVIEW.is_invalid_user('comment', "to make a comment");
    });
    
    $('.wcs-login-app-personalize').on('click', function(e){  
        WEBVIEW.is_invalid_user('personalize', "to see personalized news content");
    });    

    $('.wcs-comment-filter-trigger').on('click', function(e){
        e.preventDefault();
        $('.wcs-comment-filter-trigger').removeClass('wcs-comments-filter-active');
        var newFilterType = this.id.split('-')[2];
        if(newFilterType == WCS.FILTER_TYPE){
            //do nothing, we're using the same filter
            $(this).addClass('wcs-comments-filter-active');
            return false;
        }
        WCS.FILTER_TYPE = newFilterType;
        WCS.FILTER_PAGE = 0;

        $(this).addClass('wcs-comments-filter-active');

        WCS.refreshAllComments();
    });

     $('#wcs-main-wrapper').on('click', '.view-more-btn', function(e){
         e.preventDefault();
         if($(this).hasClass('view-more-topcomment')){
            WCS.FILTER_PAGE++;
            WCS.refreshAllComments();
         }else if($(this).hasClass('view-more-newcomment')){
            WCS.LOADING_NEW_COMMENTS = true;
            WCS.loadNewComments();
            var html = $('#template_loadinganimation').html();
            $('.view-more-newcomment').after(html);
            $('.view-more-newcomment').hide();
         }else if($(this).hasClass('view-more-profilecomment')){
            WCS.PROFILE_COMMENT_PAGE++;
            //WCS.PROFILE_COMMENT_USER = userId;
            WCS.loadMoreProfileComments();
         }
     });

     if(!WCS.IS_ONLYREGISTRATION){
        var comCheckInterval;
        function startCheck(){
            console.log("focus");
            WCS.checkNewComments();
            comCheckInterval = window.setInterval(WCS.checkNewComments,120000);
        }
        function stopCheck(){
           console.log('blur');
           window.clearInterval(comCheckInterval);
        }

        window.addEventListener('focus', startCheck);
        window.addEventListener('blur', stopCheck);

        comCheckInterval = setInterval(function(){
           WCS.checkNewComments();
        }, 120000);
     }

     $('#wcs-main-wrapper').on('click', '.view-prev-replies', function(e){
        e.preventDefault();
        var ancestorId = $(this).data('ancestorid');
        var $container = $('#comment_' + ancestorId);
        var loadingHtml = $('#template_loadinganimation').html();

        $container.find('.view-more-subcomment').before(loadingHtml);
        $container.find('.view-more-subcomment').remove();
        $.ajax({
            url: '/ajax_comments/get_all_children_comments',
            data: {
                 ancestor_id: ancestorId,
                 thread_id: WCS.THREAD_ID,
            },
            type: 'POST',
            dataType: 'json',
            success: function(data)
            {
                if(data.length <= 0){
                    return;
                }
                $container.find('.wcs-loading-animation-overlay').remove();
                console.log("children");

                //alert("adding child to " + '#comment_' + resp['parent_id']);
                var $futureComment = $container.find('.wcs-comment-item-reply').first();

                $(data).each(function(i, resp){
                    console.log("adding child ");
                    console.log(resp);
                    var $comment = $($('#template_acomment').html());

                    $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                    $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                    $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                    $comment.attr('data-replyinfo', resp['parent_id'] + "|" + resp['parent_username']);
                    $comment.attr('data-isadmin', resp['is_admin']);

                    $comment.find('.wcs-other-user').html(resp['parent_username']);
                    $comment.find('.wcs-user-displayname').html(resp['first_name']);
                    $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                    $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                    var totalText = "";
                    if(resp['upvotes'] > 0){
                        totalText = " (" + resp['upvotes'] + ')';
                    }
                    var html = "";
                    if(resp['upvoted']){
                        html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                        $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                    }else{
                        html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                    }
                    $comment.find('.wcs-like-trigger').html(html);

                    $comment.attr('data-id', resp['id']);
                    $comment.attr('id',  "comment_" + resp['id']);
                    if(WCS.USER_ID != resp['user_id']){
                        $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                    }
                    $comment.addClass('wcs-comment-item-reply');
                    $futureComment.before($comment);
                });
            },
            error: function(response)
            {
                alert("Error");
                console.log(response.responseText);
                console.log(response);
            }
        });
     });
     setTimeout(function(){
        if(window.location.href.indexOf('#') > 0){
           var possibleComment = window.location.href.split('#')[1];
           if(possibleComment.indexOf('comment_') === 0){
              var commentId = parseInt(possibleComment.split('_')[1]);

              WCS.loadNewComments(commentId, function(){
                  setTimeout(function(){
                      //so we can add the hash here... otherwise it will be same and not move to location
                      var elem = document.getElementById(possibleComment);
                      elem.scrollIntoView();
                      //hash doesn't work if you already have the hash
                      //window.location.href = origUrl + "#" + possibleComment;
                  }, 2000);
              });
           }
           else if(possibleComment == 'settings'){
               $('.wcs-post-comment-user-notifications').trigger('click');
               //alert("show settings");
           }
       }
       
        if(WEBVIEW.is_webview && WCS.NOTIFICATION_SETTINGS_PAGE){

            $.ajax({
                url: '/ajax_comments/get_user_private_profile',
                data: {
                     access_token: WEBVIEW.access_token,
                     get_comments: 0
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    //alert("email  " + resp['email_notifications']);
                    //alert("app " + resp['app_notifications']);
                    var enableEmail = 0;
                   
                    if(resp['email_notifications'] == 1){
                        enableEmail = 1;
                        DG.switches['#enable_email_alerts'].check();     
                    }else{
                        DG.switches['#enable_email_alerts'].uncheck();                             
                    }
                    
                    var enablePush = 0;
                    if(resp['app_push_notifications'] == 1){
                        //alert("enabling check");
                        enablePush = 1;                        
                        DG.switches['#enable_app_alerts'].check();   
                    }else{                        
                        DG.switches['#enable_app_alerts'].uncheck(); 
                    }
                    console.log("notification refreshwebviewstart");

                    WCS.refreshNotifications(enableEmail, 
                        enablePush, 0, 
                        resp['notification_settings']);

                    WCS.refreshReminderList(resp['user_reminders']);    
                },
                error: function(err){

                }
            });        

        }       
       
       

     }, 1000);
})();

WCS.loadSidebarTemplate = function(theType, isSocial){
    $('#wcs-slideout-wrapper').empty();
   if(theType == 'register'){
        var $container = $('<div class="wcs-profile-registration-wrap wcs-profile-settings-wrap">');
        var innerHtml = $('#template_registration_header_email').html() + $('#template_profile_form').html();
        if(isSocial){
            WCS.SOCIAL_REGISTRATION_FORM = true;
            innerHtml = $('#template_registration_header_social').html() + $('#template_profile_form').html();
        }

        $container.append(innerHtml);

        $('#wcs-slideout-wrapper').append($container);
        if(WCS.DESIRED_ACTION !== ""){
            setTimeout(function(){
                $('.desired_action').html(WCS.DESIRED_ACTION);
            }, 20);
        }
        if(WCS.DESIRED_TITLE !== ""){
            setTimeout(function(){
                $('.desired_title').html(WCS.DESIRED_TITLE);
            }, 30);
        }       
        if(WCS.DESIRED_DESCRIPTION !== ""){
            setTimeout(function(){
                $('.desired_description').html(WCS.DESIRED_DESCRIPTION);
            }, 40);
        }     
        if(WCS.DESIRED_TITLE == "" && WCS.DESIRED_DESCRIPTION == ""){
            setTimeout(function(){
                $('.desired_title').html("Create an Account");
                $('.desired_description').html("");
            });
        }
   }
   else if(theType == 'login'){
       var $container = $('<div class="wcs-profile-settings-wrap">');
       var innerHtml = $('#template_login_header').html() + $('#template_login_form').html();
       $container.append(innerHtml);
       $('#wcs-slideout-wrapper').append($container);
       if(WCS.DESIRED_ACTION !== ""){
            setTimeout(function(){
                $('.desirect_action').html(WCS.DESIRED_ACTION);
            }, 20);
       }
       if(WCS.DESIRED_TITLE !== ""){
        setTimeout(function(){
            $('.desired_title').html(WCS.DESIRED_TITLE);
        }, 30);
       }       
        if(WCS.DESIRED_DESCRIPTION !== ""){
            setTimeout(function(){
                $('.desired_description').html(WCS.DESIRED_DESCRIPTION);
            }, 40);
        }       
        if(WCS.DESIRED_TITLE == "" && WCS.DESIRED_DESCRIPTION == ""){
            setTimeout(function(){
                $('.desired_title').html("Login");
                $('.desired_description').html("");
            });
        }        
   }
   else if(theType == 'profile_user'){
       var headerHtml = $('#template_profile_header').html();
       var formHtml = $('#template_profile_form').html();
       var notificationsHtml = $('#template_notifications').html();
       var $settingsBody = $($('#template_profile_display_wrapper').html());
       $settingsBody.find('.wcs-profile-settings-wrap').append(formHtml);
       $settingsBody.find('.wcs-profile-notifications-wrap').append(notificationsHtml);

       $('#wcs-slideout-wrapper').append(headerHtml);

       $('#wcs-slideout-wrapper').append($settingsBody);
   }
   else if(theType == 'profile_other'){
       var headerHtml = $('#template_profile_header').html();
       var wrapper = $('#template_profile_display_wrapper').html();


       $('#wcs-slideout-wrapper').append(headerHtml + wrapper);
   }
   else if(theType == 'forgot_password'){
       var wrapper = $('#template_forgotpass_form').html();
       $('#wcs-slideout-wrapper').append(wrapper);
   }
   else if(theType == 'update_password'){
       var wrapper = $('#template_update_password').html();
       $('#wcs-slideout-wrapper').append(wrapper);
   }
   else if(theType == 'loading'){
        var html = $('#template_loadinganimation').html();
       $('#wcs-slideout-wrapper').append(html);
   }
   else if(theType == 'reminders'){
        var html = $('#template_reminder_form').html();
        //console.log("template");
        //console.log(html);
       $('#wcs-slideout-wrapper').append(html);       
   }
};


WCS.doAuthWindow  = function(authType){
    var windowWidth = 600;
    var windowHeight = 360;
    if(authType == 'facebook'){
        windowWidth = 800;
        windowHeight = 480;
    }else if(authType == 'twitter'){
        windowWidth = 500;
        windowHeight = 700;
    }
    var authWindow = window.open(WCS.SITE_URL + 'iframelogin/social_login?service=' + authType, '_blank', 'toolbars=0,width=' + windowWidth + ',height=' + windowHeight + ',left=200,top=200,scrollbars=1,resizable=1,location=no');
};

WCS.doComment = function(isReply, theText){

    var parentId = 0;
    var parentAdmin = 0;
    var ancestorId = 0;
    var replyLevel = 0;
    if(isReply){
        parentId = WCS.REPLY_PARENT_ID;
        parentAdmin = WCS.REPLY_PARENT_ADMIN;
        ancestorId = WCS.REPLY_ANCESTOR_ID;
        replyLevel = parseInt(WCS.REPLY_LEVEL);
        replyLevel++;
    }

    if(WCS.IS_POSTING){
        return false;
    }
    //Decrement counter, so user's own comment doesn't show up as 'new'
    newCommentCount = newCommentCount - 1;

    WCS.IS_POSTING = true;
    $.ajax({
        url: '/ajax_comments/post_comment',
        data: {
             thread_id: WCS.THREAD_ID,
             thread_url: WCS.THREAD_URL,
             site_id: WCS.TALKUMS_SITE_ID,
             ancestor_id : ancestorId,
             parent_id : parentId,
             parent_admin: parentAdmin,
             level : replyLevel,
             post_text: theText,
             access_token: WEBVIEW.access_token
        },
        type: 'POST',
        dataType: 'json',
        success: function(resp)
        {
            console.log("post comment data");
            console.log(resp);
            if(resp['success'] == 'false'){
                if(resp['action']){
                    WCS.force_action(resp['action']);
                }
                else if(resp['msg']){
                    WCS.showModal(resp['msg'], "OK", function(){});
                }
                WCS.IS_POSTING = false;
                return;
            }
            if(parentId > 0){
                $('.subcomment_text').val("");
            }else{
                $('#topcomment_text').val("");
            }
            //$('.wcs-reply-container').remove();
            WCS.IS_POSTING = false;
            var $comment = $($('#template_acomment').html());


            $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
            $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

            if(resp['parent_userid']){
                $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['first_name'] + "|" + parentId);
                $comment.attr('data-isadmin', resp['is_admin']);
                if(resp['parent_admin'] == 1){
                    $comment.find('.wcs-other-user').addClass('wcs-verified-user');
                }else{
                    $comment.find('.wcs-other-user').removeClass('wcs-verified-user');
                }
                $comment.find('.wcs-other-user').html(resp['parent_username']);
            }else{
                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['first_name'] + "|" + parentId);
                $comment.attr('data-isadmin', resp['is_admin']);

                $comment.addClass('wcs-comment-item-parent');
                $comment.find('.wcs-other-user').remove();
                $comment.find('.wcs-comment-item-username i').remove();
                //need to add reply box
                var replyBox = $('#template_reply_container').html();
                $comment.append(replyBox);
            }
            $comment.find('.wcs-user-displayname').html(resp['first_name']);
            if(resp['is_admin'] == 1){
                $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
            }else{
                $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
            }
            $comment.find('.wcs-user-displayname').attr('data-userid', WCS.USER_ID);
            $comment.find('.wcs-user-displayname').attr('data-isadmin', resp['is_admin']);
            $comment.find('.wcs-comment-item-date').html('Just Now');
            $comment.find('.wcs-comment-item-text').html(resp['post_html']);
            $comment.find('.wcs-like-trigger').html('<i class="fas fa-heart"></i>' + " Like ");
            $comment.attr('data-id', resp['insert_id']);
            $comment.attr('id',  "comment_" + resp['insert_id']);

            if(parentId > 0){
                $comment.addClass('wcs-comment-item-reply');
                var $container = $('#comment_' + ancestorId);
                $container.find('.wcs-reply-container').before($comment);
            }
            else{
                $('.wcs-comment-container').prepend($comment);
            }

            // adds/removes class to animate entrance
            $comment.addClass('wcs-comment-item-added');
            setTimeout(function() {
            	$comment.removeClass('wcs-comment-item-added');
            }, 500);

            if($('.wcs-comments-no-comments').length > 0){
                $('.wcs-comments-no-comments').remove();
            }
            WEBVIEW.log_stats('comment_posted', WCS.THREAD_URL + "#comment_" + resp['insert_id']);
            if(WCS.socket !== null){
                WCS.socket.publish('thread' + WCS.TALKUMS_THREADID, {user: 'user456',
                    message: 'Hi!'});
            }
        },
        error: function(response)
        {
            //Set new comment count back up if error (no actual commment)
            newCommentCount++;
            alert("Error");
            console.log(response.responseText);
            console.log(response);
        }
    });



};

WCS.setupProfileForm = function(formType, isSocial){
    WCS.SIDEBAR_PAGE = formType;

    //bind evends
    if(formType == 'register' || formType == 'settings'){
        $('#wcs-zipcode').on('keypress', function(ev) {
            var keyCode = window.event ? ev.keyCode : ev.which;
            //codes for 0-9
            if (keyCode < 48 || keyCode > 57) {
                //codes for backspace, delete, enter
                if (keyCode != 0 && keyCode != 8 && keyCode != 13 && !ev.ctrlKey) {
                    ev.preventDefault();
                }
            }
        });

        if(formType == 'register'){
        
        }

    }
    if(formType == "register"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-registration-form');
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });
        $('.wcs-profile-settings-email-username').hide();
    }else if(formType == "settings"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-edit-form');
        $('input[name="social_username"]').attr('readonly', 'readonly');
        $('input[name="social_username"]').addClass("wcs-profile-settings-form-readonly");
        $('input[name="username1"]').attr('readonly', 'readonly');
        $('input[name="username1"]').addClass("wcs-profile-settings-form-readonly");
        $('input[name="password"]').attr('readonly', 'readonly');
        $('input[name="password"]').addClass("wcs-profile-settings-form-readonly");
        if(isSocial){
            $('input[name="social_username"]').after('<span class="wcs-settings-form-disclaimer">Your username can' +
                    "'" + 't be edited</span>');
        }else{
            $('input[name="username1"]').after('<span class="wcs-settings-form-disclaimer">Your username can' +
                    "'" + 't be edited</span>');

            $('.wcs-settings-form-password-container').remove();
            $('.wcs-settings-form-password-updater').show();
            //$('.wcs-settings-form-password-updater').hide();

        }
        if(WCS.termsAccepted == 1){
            $('.wcs-profile-registration-terms').remove();
        }
        
        WCS.setupNotificationHandlers(false);

    }else if(formType == "login"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-login-form');
    }
    else if(formType == "forgot_password"){
        $('.wcs-profile-settings-form').attr('id', 'wcs-forgotpass-form');
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });
    }
    else if(formType == 'update_password'){
        $('.wcs-profile-settings-form').attr('id', 'wcs-updatepass-form');
        grecaptcha.render('recaptcha_site', {
            'sitekey' : WCS.CAPTCHA_SITE_KEY
        });
    }else if(formType == 'set_reminder'){
        $('.wcs-profile-settings-form').attr('id', 'wcs-reminder-form');
    }

    $('.wcs-cancel-btn').on('click', function(e){
        e.preventDefault();
        if(WCS.SOCIAL_REGISTRATION_FORM){
            window.location.href = '/social_auth/logout';
        }
        WCS.CLOSE_SIDEBAR();
    });


    //ugly - delay to allow dom to update, so can bind events
    setTimeout(function(){
        if(formType == "register"){
            WCS.setupRegistrationForm();
        }else if (formType == "login"){
            WCS.setupLoginForm();
        }else if(formType == "settings"){
            WCS.setupSettingsForm();
        }
        else if(formType == "forgot_password"){
            WCS.setupForgotPass();
        }
        else if(formType == 'update_password'){
            WCS.setupUpdatePass();
        }else if(formType == 'reminder_form'){
             WCS.setupSetReminder();
        }
        if(!$('#wcs-overlay-sidebar').hasClass('wcs-overlay-open')){
            WCS.OPEN_SIDEBAR();
            WCS.PROFILE_OPEN = true;
        }

    }, 10);
};

    WCS.refreshReminderList = function(userReminders){
        console.log("in refresh reminders ");
        console.log(userReminders);
        $('.reminders-list').empty();
        if(!userReminders || userReminders.length <= 0){
            $('.reminders-list').append("<li style='padding-left:0px;margin-left:0px;'><p >You have no reminders set.</p></li>");
            return;
        }
        console.log(userReminders);
        for(var x = 0; x < userReminders.length; x++){
            var rem = userReminders[x];
            var textSelected = "";
            var emailSelected = "";
            var browserSelected = "";
            var appSelected = "";
            
            if(rem['alert_type'] == 'text'){
                textSelected = "selected='selected'";
            }
            if(rem['alert_type'] == 'email'){
                emailSelected = "selected='selected'";                
            }
            if(rem['alert_type'] == 'browser'){
                browserSelected = "selected='selected'";                
            }
            if(rem['alert_type'] == 'apppush'){
                appSelected = "selected='selected'";         
            }
            console.log(rem);
            //alert("alert type " + rem['alert_type']);
            var selectControl = '<select  data-remindid="' + rem['id'] + '" data-remindtype="' + rem['type'] + 
                        '" id="notifications_reminder_type" class="reminder-changetype">';                     
            if(WEBVIEW.is_webview || rem['alert_type'] == 'apppush'){
                selectControl += '<option value="apppush" ' + appSelected + '>Push Notification</option>';
            }  
            if(!WEBVIEW.is_webview || rem['alert_type'] == 'text'){
                selectControl += '<option value="text" ' + textSelected + '>Text</option>';
            }
            selectControl += '<option value="email" ' + emailSelected + '>Email</option>';
            if(!WEBVIEW.is_webview || rem['alert_type'] == 'browser'){
                  selectControl += '<option value="browser" ' + browserSelected + '>Browser Notification</option>';                
            }
            selectControl += '</select>';
            
            var remHtml = '<li id="uremind_' + rem['id'] + '">' + 
                    '<button data-remindid="' + rem['id'] + '" data-remindtype="' + rem['type'] + '" class="reminder-remove">' +                     
                        'Remove</button>' +                    
                    selectControl + 
                     '<div>' + rem['display'] + '</div>' + 
                    '</li>';
            
            $('.reminders-list').append(remHtml);
                    
        }
    };

    WCS.refreshNotifications = function(enableEmail, enableBrowser, enableApp, notificationSettings){
        
        if(notificationSettings == null){
            console.log("empty data for notficationsettings update");
            return;
        }
        console.log("refreshing notification settings...");
        console.log(notificationSettings);
        for(var notificationId in notificationSettings){
            
            var notificationVal = notificationSettings[notificationId];
            
            
            if(notificationId == 'noteworthy_send_time'){
                $('#noteworthy_send_time').val(notificationVal);
                continue;                
            }
            
            
            var disabledType = false;           
            if(notificationId.indexOf('_email_') >= 0){
                if(enableEmail == 0){
                    disabledType = true;
                }
            }
            if(notificationId.indexOf('_app_') >= 0){
                if(enableBrowser == 0){
                    disabledType = true;
                }
            }
            if(notificationId.indexOf('_browser_') >= 0){
                if(enableApp == 0){
                    disabledType = true;
                }
            }
            
            if(notificationVal == 'yes' && !disabledType){
                $('#' + notificationId).attr('checked', 'checked');   
                $('#' + notificationId).removeAttr('disabled');   
                $('#' + notificationId).parent().removeClass("disabled_check");
            }else if(!disabledType){
                $('#' + notificationId).removeAttr('disabled');         
                $('#' + notificationId).removeAttr('checked');    
                $('#' + notificationId).parent().removeClass("disabled_check");
            }
            else{            
                $('#' + notificationId).removeAttr('checked');       
                $('#' + notificationId).attr('disabled', true);     
                $('#' + notificationId).parent().addClass("disabled_check");
            }
            
        }
        
        
        
    };

WCS.setupRegistrationForm = function(){
    //WCS.PROFILE_OPEN = true;
    $('#wcs-signin-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');

        return false;
    });

    $('#wcs-registration-form').submit(function(e){
       // alert("submitting");
       e.preventDefault();
        var html = $('#template_loadinganimation').html();
        $('#wcs-overlay-sidebar').append(html);

       //lets try HTML5 formdata object...
       var formData = new FormData(document.getElementById("wcs-registration-form"));

       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/register_update_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                    //do modal
                   // alert("do modal close");
                  var successHtml = $('#template_registration_header_success').html();
                  $('.wcs-profile-registration-wrap').empty();
                  $('.wcs-profile-registration-wrap').html(successHtml);
                  loginSuccess(result, true, true);
                  WCS.termsAccepted = 1;
                    var defaultComment = $('#topcomment_text').val();
                    if(defaultComment.trim().length > 0)
                    $.ajax({
                        url: '/ajax_comments/set_default_comment_text',
                        data: {
                             default_comment: defaultComment
                        },
                        type: 'POST',
                        dataType: 'json',
                        success: function(resp)
                        {
                        },
                        error: function(response)
                        {
                        }
                    });


                  /*
                  setTimeout(function(){
                     WCS.CLOSE_SIDEBAR();
                  }, 10000);
                  */
              }
              else{
                  grecaptcha.reset();
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };

                  setError('full-name');
                  setError('email');
                  setError('dob');
                  //setError('terms-of-service');
                  setError('captcha');
                  if(result['msg']){
                      alert(result['msg']);
                  }

              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);
   });

}
WCS.setupForgotPass = function(){
    $('#wcs-login-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');
        return false;
    });

    $('#wcs-forgotpass-form').submit(function(e){
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);
       var formData = new FormData(document.getElementById("wcs-forgotpass-form"));
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/reset_password/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              console.log("results")
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                var successHtml = $('#template_forgotpass_success').html();
                $('.wcs-profile-settings-wrap').empty();
                $('.wcs-profile-settings-wrap').html(successHtml);
              }
              else{
                  grecaptcha.reset();
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };
                  setError('email');
                  setError('captcha');
              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);

       return false;
    });

};

WCS.setupUpdatePass = function(){
    $('.wcs-update-password-settings-link').on('click', function(e){
        e.preventDefault();
        //Just reload with ajax call - otherwise this would get really messy
        WCS.PROFILE_USER_ID = -1;
        $('.wcs-post-comment-user-settings').trigger('click');
        return false;
    });   

    $('#wcs-updatepass-form').submit(function(e){
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);
       var formData = new FormData(document.getElementById("wcs-updatepass-form"));
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/update_password/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              console.log("results")
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                var successHtml = $('#template_updatepass_success').html();
                $('.wcs-profile-settings-wrap').empty();
                $('.wcs-profile-settings-wrap').html(successHtml);
              }
              else{
                  grecaptcha.reset();
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };
                  setError('password');
                  setError('password1');
                  setError('captcha');
              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);

       return false;
    });

};

WCS.setupSetReminder = function(){
    
};



WCS.setupLoginForm = function(){

    $('#wcs-register-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('register');
        WCS.setupProfileForm('register');
        return false;
    });

    $('.wcs-login-forgot-un-pw').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('forgot_password');
        WCS.setupProfileForm('forgot_password');
        return false;
    });

    $('#wcs-login-form').submit(function(e){
       e.preventDefault();
       var html = $('#template_loadinganimation').html();
       $('#wcs-overlay-sidebar').append(html);

       var formData = new FormData(document.getElementById("wcs-login-form"));
       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/login_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              console.log("result");
              console.log(result);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();

              if(result['success'] == "true"){
                  //make user do the things
                  loginSuccess(result, true, false);
                    //do modal
                  //$('#wcs-edit-form').after("<h1 class='wcs-edit-success'>Thank you for updating your information!</h1>");
              }
              else{
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };

                  setError('email');
                  //if(result['msg']){
                  //   WCS.showModal(result['msg'], "OK", function(){});
                  //}
              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);

       return false;
    });


}

WCS.setupSettingsForm = function(){

    $('.wcs-profile-nav-tab').on('click', function(e){
        e.preventDefault();
        $('.wcs-profile-nav-tab').removeClass('wcs-profile-nav-active');
        $(this).addClass('wcs-profile-nav-active');
        if($(this).text() == 'Settings'){
            $('.wcs-profile-settings-wrap').show();
            $('.wcs-profile-comments-wrap').hide();
            $('.wcs-profile-notifications-wrap').hide();
        }else if($(this).text() == 'Notifications'){
            $('.wcs-profile-notifications-wrap').show();
            $('.wcs-profile-comments-wrap').hide();
            $('.wcs-profile-settings-wrap').hide();
        }else{
            $('.wcs-profile-comments-wrap').show();
            $('.wcs-profile-settings-wrap').hide();
            $('.wcs-profile-notifications-wrap').hide();
        }
    });

    $('.wcs-view-in-discussion-trigger').on('click', function(e){
        e.preventDefault();
        var viewUrl = $(this).data('url');
        var vus = viewUrl.split('#');
        var baseUrl = vus[0];
        var commentDomId = vus[1];
        if(WCS.BASE_THREAD_URL == baseUrl && $('#' + commentDomId).length <= 0){
            var commentParts = commentDomId.split('_');
            var commentId = commentParts[1];
            var ancestorId = parseInt($(this).data('ancestorid'));
            if(ancestorId > 0){
                //fetch ancestor and it will pull in child
                commentId = ancestorId;
            }
            WCS.loadNewComments(commentId, function(){
                setTimeout(function(){
                    var elem = document.getElementById(commentDomId);
                    elem.scrollIntoView();
                    WCS.CLOSE_SIDEBAR();
                }, 100);
            });

        }else{

            window.location.href = viewUrl;

            setTimeout(function(){
                WCS.CLOSE_SIDEBAR();
            }, 250);
        }
    });

    //WCS.PROFILE_OPEN = true;
    $('#wcs-signin-link').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('login');
        WCS.setupProfileForm('login');

        return false;
    });

    $('.wcs-profile-settings-update-password').on('click', function(e){
        e.preventDefault();
        WCS.loadSidebarTemplate('update_password');
        WCS.setupProfileForm('update_password');

        return false;
    });

    //alert("setting up settings form");
    $('#wcs-edit-form').submit(function(e){
       e.preventDefault();
       //lets try HTML5 formdata object...
       var formData = new FormData(document.getElementById("wcs-edit-form"));

        var html = $('#template_loadinganimation').html();
        $('#wcs-overlay-sidebar').append(html);


       var xhr = new XMLHttpRequest();
       xhr.open('POST', '/ajax_comments/register_update_site_user/', true);
       xhr.onload = function () {
          if (xhr.status === 200)
          {
              var result = JSON.parse(xhr.responseText);
              $('#wcs-overlay-sidebar').find('.wcs-loading-animation-overlay').remove();
              if(result['success'] == "true"){
                    //do modal
                   // alert("do modal close");
                  //alert("Some success message will display in some location");
                  $('.wcs-profile-settings-edit-message').html("<div class='wcs-profile-settings-edit-success'>Your settings have updated successfully!</div>");
              }
              else{
                  //alert("failure: " + );
                  var setError = function(errorName){
                      if(result['errors'][errorName]){
                          $('.wcs-settings-form-err-' + errorName).html(result['errors'][errorName]);
                      }
                      else{
                          $('.wcs-settings-form-err-' + errorName).html("");
                      }

                  };

                  setError('full-name');
                  setError('email');
                  setError('username');
                  setError('password');
                  setError('social-username');
                  setError('dob');
                  setError('gender');
                  setError('zipcode');
                  setError('provider');
                  setError('other-provider');
                  //setError('terms-of-service');
                  setError('captcha');
                  if(result['errors']['msg']){
                      alert(result['errors']['msg']);
                  }

              }
          }
          else
          {
             alert('An error occurred!');
          }
       };

       xhr.send(formData);
    });

    $('.manage-notifications').on('change', 'input', function(e){


        //manage notification checkboxs here
    });

};


WCS.force_action = function(theAction, skipQuestion){
   if(theAction == 'accept_terms'){
       var res = false;
       if(!skipQuestion){
           WCS.showModal("You have not completed registration.  Do you want to complete registration to perform this action?", "Yes",
           function(doit)
           {
               if(!doit){
                   return false;
               }

               WCS.loadSidebarTemplate('register', true);
                WCS.setupProfileForm('register', true);
                $.ajax({
                     url: '/ajax_comments/get_user_private_profile',
                     data: {
                          private: 'true'
                     },
                     type: 'POST',
                     dataType: 'json',
                     success: function(resp)
                     {
                         var user = resp['user'];
                         user['newsletter_signup'] = 1;
                         WCS.fillSettingsData(user);
                     }
                });
           });
       }else{
           //it must be social registration... because you can't be logged in otherwise
           WCS.loadSidebarTemplate('register', true);
           WCS.setupProfileForm('register', true);
           $.ajax({
                url: '/ajax_comments/get_user_private_profile',
                data: {
                     private: 'true'
                },
                type: 'POST',
                dataType: 'json',
                success: function(resp)
                {
                    var user = resp['user'];
                    user['newsletter_signup'] = 1;
                    WCS.fillSettingsData(user);
                }
           });

       }
   }
   else if(theAction == 'confirm_email'){
        WCS.showModal("You have not confirmed your email.  Do you want to resend the registration email?", "Yes", function(doit)
        {
            if(doit){
                $.ajax({
                    url: '/ajax_comments/resend_registration_email',
                    data: {
                        send: 1,
                        access_token: WEBVIEW.access_token
                    },
                    type: 'POST',
                    dataType: 'json',
                    success: function(resp)
                    {

                    },
                    error: function(response)
                    {

                    }
                });
            }
        });
   }
};

WCS.fillSettingsData = function(user){
    $('input[name="wcs_email"]').val(user['email']);
    $('input[name="fullName"]').val(user['name']);

    $('input[name="wcs_email"]').addClass("wcs-profile-settings-form-readonly");
    if(user['email'] && user['email'].length > 3){
        $('input[name="wcs_email"]').attr('readonly', 'readonly');
        $('input[name="wcs_email"]').after('<span class="wcs-settings-form-disclaimer">This email address is tied to your ' + user['service'] +
                ' account and can' + "'" + 't be edited</span>');
    }



    if(user['newsletter_signup'] == 1){
        $('#wcs_newsletter_signup').attr('checked', 'checked');
    }else{
        $('#wcs_newsletter_signup').removeAttr('checked');
    }
    //WCS.load_providers(option);

    $('select[name="gender"]').val(user['gender']);

    if(user['dob']){
        var dobSplit = user['dob'].split('-');
        if(dobSplit.length == 3){
            var year = parseInt(dobSplit[0].replace(/\b0+/g, '')).toString();
            var month = parseInt(dobSplit[1].replace(/\b0+/g, '')).toString();
            var day = parseInt(dobSplit[2].replace(/\b0+/g, '')).toString();
            $('select[name="dobYear"]').val(year);
            $('select[name="dobMonth"]').val(month);
            $('select[name="dobDay"]').val(day);
        }
    }
};

WCS.showModal = function(msg, buttonText, callback, hasInput){

        $('#wcs-overlay-modal').addClass('wcs-overlay-open');
        var cancelText = "Cancel";
        if(buttonText.indexOf("|") >= 0){
            var buttonParts = buttonText.split('|');
            buttonText = buttonParts[0];
            cancelText = buttonParts[1];        
        }
        var getInput = hasInput;
        if(hasInput){
            msg += '<br><br><input type="text" id="showmodal_input" value="" />';
        }
        
        $('.wcs-modal-innertext').html(msg);
        $('.wcs-modal-btns-cancel').off('click');
        $('.wcs-modal-btns-cancel').on('click', function(){
            callback(false);
            $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
            WCS.MODAL_OPEN = false;
        });

        $('.wcs-modal-btns-submit').html(buttonText);
        $('.wcs-modal-btns-submit').off('click');
        $('.wcs-modal-btns-submit').on('click', function(){
            if(getInput){
               var retVal = $('#showmodal_input').val(); 
               callback(retVal);
            }else{
                callback(true);
            }
            $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
            WCS.MODAL_OPEN = false;
        });
        WCS.MODAL_CALLBACK = callback;
        setTimeout(function(){
            WCS.MODAL_OPEN = true;
        }, 500);
        
    $('.wcs-modal-btns-submit').html(buttonText);
    if(cancelText == ''){
        $('#wcs-overlay-modal .wcs-modal-btns-cancel').hide();
    }else{
        $('#wcs-overlay-modal .wcs-modal-btns-cancel').show();        
        $('#wcs-overlay-modal .wcs-modal-btns-cancel').html(cancelText);
    }
    /*
    $('.wcs-modal-btns-submit').off('click');
    $('.wcs-modal-btns-submit').on('click', function(){
        callback(true);
        $('#wcs-overlay-modal').removeClass('wcs-overlay-open');
        WCS.MODAL_OPEN = false;
    });
    WCS.MODAL_CALLBACK = callback;
    setTimeout(function(){
        WCS.MODAL_OPEN = true;
    }, 500);
      */  

};

WCS.setDeleted = function(commentId){
    var $comment = $('#comment_' + commentId);
    var dateHtml = $comment.find('.wcs-comment-item-date').html();
    $comment.find('.wcs-comment-flag').first().remove();
    $comment.find('.wcs-comment-item-header').first().remove();
    $comment.find('.wcs-comment-item-text').first().remove();
    $comment.find('.wcs-comment-item-footer').first().remove();

    var $deleteHeader = $($('#template_deleted_comment').html()).find('.wcs-comment-item-header').unwrap();
    var $deleteText = $($('#template_deleted_comment').html()).find('.wcs-comment-item-text-removed').unwrap();
    $comment.prepend($deleteText);
    $comment.prepend($deleteHeader);
    setTimeout(function(){
        $comment.find('.wcs-comment-item-date').html(dateHtml);
    }, 10);
};

var newCommentCount = 0;
var conn;
if (window["WebSocket"]) {
    conn = new ReconnectingWebSocket("wss://socket2me.weigelbroadcasting.com:8080/metvthread/"+WCS.THREAD_ID);
    conn.onmessage = function (evt) {
        newCommentCount++;
        if(newCommentCount>0){
            $('.view-more-newcomment').html("Load " + newCommentCount + " new comments <i class='fas fa-angle-down'></i>");
            $('.view-more-newcomment').show();
        }
        //var data = JSON.parse(evt.data);
        //var song = data[0];
    };
} else {
    var item = document.createElement("div");
    item.innerHTML = "<b>Your browser does not support WebSockets.</b>";
    appendLog(item);
}

var commentsLastChecked = Date.now();

WCS.checkNewComments = function(){
    //console.log("checking");
    return;
    nownow = Date.now();
    timediff = nownow - commentsLastChecked;
    if(timediff < 60000){
        //console.log("too soon");
        return;
    }
    commentsLastChecked = nownow;
   $.ajax({
        url: '/ajax_comments/get_new_comment_count',
        data: {
             max_id: WCS.MAX_ID,
             thread_id: WCS.THREAD_ID
        },
        type: 'POST',
        dataType: 'json',
        success: function(data)
        {
            var newTotal = parseInt(data['new_total']);
            if(newTotal > 0){
                //already updated button
                if(WCS.NEW_COMMENT_TOTAL == newTotal){
                    return;
                }
                WCS.NEW_COMMENT_TOTAL = newTotal;
                //alert("has new comments");
                $('.view-more-newcomment').html("Load " + newTotal + " new comments <i class='fas fa-angle-down'></i>");
                $('.view-more-newcomment').show();
            }
        },
        error: function(response)
        {
            console.log(response.responseText);
            console.log(response);
        }
    });

};

WCS.loadNewComments = function(specificId, callback){
    var requestUrl = '/ajax_comments/get_specific_topcomment';
    if(!specificId){
        requestUrl = '/ajax_comments/get_new_comments';
    }
    $.ajax({
        url: requestUrl,
        data: {
             max_id: WCS.MAX_ID,
             thread_id: WCS.THREAD_ID,
             comment_id : specificId
        },
        type: 'POST',
        dataType: 'json',
        success: function(data)
        {
            var total = parseInt(data['new_total']);
            if(total > 0){
                if(data['new_max'] > 0){
                    WCS.MAX_ID = parseInt(data['new_max']);
                    WCS.NEW_COMMENT_TOTAL = 0;
                }


                var topComments = data['topcomments'];
                var subComments = data['subcomments'];

                $(topComments).each(function(i, resp){
                    var $comment = $($('#template_acomment').html());
                    if(resp['active'] == 0){
                        $comment = $($('#template_deleted_comment').html());
                        if(!resp['has_children']){
                            return;
                        }
                    }

                    $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                    $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                    $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['first_name'] + "|" + resp['parent_id']);
                    $comment.attr('data-isadmin', resp['is_admin']);

                    $comment.addClass('wcs-comment-item-parent');
                    //need to add reply box
                    var replyBox = $('#template_reply_container').html();
                    $comment.append(replyBox);
                    $comment.find('.wcs-user-displayname').html(resp['first_name']);
                    $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                    if(resp['active'] == 0){
                        $comment.find('.wcs-comment-item-text').html('<span class="wcs-comment-item-text-removed">This comment has been removed.</span>');
                    }else{
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                    }
                    if(WCS.USER_ID != resp['user_id']){
                        $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                    }
                    if(resp.parent_id == 0){
                        $comment.find('.wcs-other-user').remove();
                        $comment.find('.wcs-comment-item-username i').remove();
                    }else{
                        $comment.find('.wcs-other-user').attr('data-userid', resp.parent_userid);
                        $comment.find('.wcs-other-user').html(resp.parent_username);
                    }

                    //xxxxxxxxxxxxxxxx
                    if(resp.is_admin == 1){
                       $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
                    }else{
                        $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
                    }

                    var totalText = "";
                    if(resp['upvotes'] > 0){
                        totalText = " (" + resp['upvotes'] + ')';
                    }
                    var html = "";
                    if(resp['upvoted']){
                        html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                        $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                    }else{
                        html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                    }


                    $comment.find('.wcs-like-trigger').html(html);
                    $comment.attr('data-id', resp['id']);
                    $comment.attr('id',  "comment_" + resp['id']);
                    if($('.wcs-comment-container').find('#comment_' + resp['id']).length <= 0){
                        if(data['new_max'] > 0){
                            $('.wcs-comment-container').prepend($comment);
                        }else{
                            $('.wcs-comment-container').append($comment);
                        }
                    }
                });
                setTimeout(function(){

                    $(subComments).each(function(i, resp){
                        console.log("adding child ");
                        console.log(resp);
                        var $comment = $($('#template_acomment').html());

                        $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                        $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);


                        $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                        $comment.attr('data-replyinfo', resp['parent_id'] + "|" + resp['parent_username']);
                        $comment.attr('data-isadmin', resp['is_admin']);

                        $comment.find('.wcs-other-user').html(resp['parent_username']);
                        $comment.find('.wcs-user-displayname').html(resp['first_name']);
                        $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                        if(resp.is_admin == 1){
                           $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
                        }else{
                            $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
                        }

                        var totalText = "";
                        if(resp['upvotes'] > 0){
                            totalText = " (" + resp['upvotes'] + ')';
                        }
                        var html = "";
                        if(resp['upvoted']){
                            html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                        }else{
                            html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                        }
                        $comment.find('.wcs-like-trigger').html(html);

                        $comment.attr('data-id', resp['id']);
                        $comment.attr('id',  "comment_" + resp['id']);
                        if(WCS.USER_ID != resp['user_id']){
                            $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                        }

                        $comment.addClass('wcs-comment-item-reply');
                        var $container = $('#comment_' + resp['ancestor_id']);

                        if($('.wcs-comment-container').find('#comment_' + resp['id']).length <= 0){
                            $container.find('.wcs-reply-container').before($comment);
                        }
                    });
                    setTimeout(function(){
                        callback();
                    }, 50);
                }, 500);
                WCS.LOADING_NEW_COMMENTS = false;
                $('.wcs-comments .wcs-loading-animation-overlay').remove();
            }
        },
        error: function(response)
        {
            console.log(response.responseText);
            console.log(response);
        }
    });
};


WCS.loadMoreProfileComments = function(){
    $.ajax({
        url:'/ajax_comments/load_more_profile_comments/',
        data:{
            page: WCS.PROFILE_COMMENT_PAGE,
            user_id: WCS.PROFILE_COMMENT_USER
        },
        dataType:'json',
        type:'POST',
        success:function(resp){
            var comments = resp['comments'];
            var hasMore = resp['has_more'];
            WCS.appendProfileComments(comments, hasMore);
        },
        error: function(response)
        {
            console.log(response.responseText);
            console.log(response);
        }
    });
}

WCS.appendProfileComments = function(comments, has_more){
    $(comments).each(function(){
        console.log("comment");
        console.log(this);
        //{"op":"do_navigation","key":"favorites",
        //"type":"quiz","fullurl":"https://local.metv.com//quiz/do-you-know-who-sings-these-flintstones-songs?contentview=2",
        //"itemurl":"do-you-know-who-sings-these-flintstones-songs",
        //"services":"https://services.weigelbroadcasting.com/metv/quiz/1717"}        
        
        var $comment = $($('#template_listcomment').html());
        $comment.find('.wcs-comment-post-title a').attr('href', this.thread_url);
        $comment.find('.wcs-comment-post-title a').html(this.thread_title);

        
        
        $comment.find('.wcs-avatar-img').attr('src', this.profile_image);
        $comment.find('.wcs-user-displayname').html(this.first_name);
        $comment.find('.wcs-user-displayname').attr('data-userid', this.user_id);
        if(this.parent_id == 0){
            $comment.find('.wcs-other-user').remove();
            $comment.find('.wcs-comment-item-username i').remove();
        }else{
            $comment.find('.wcs-other-user').attr('data-userid', this.parent_userid);
            $comment.find('.wcs-other-user').html(this.parent_username);
            if(this.parent_admin == 1){
                $comment.find('.wcs-other-user').addClass('wcs-verified-user');
            }else{
                $comment.find('.wcs-other-user').removeClass('wcs-verified-user');
            }
        }
        $comment.find('.wcs-comment-item-date').html(this.timeago);
        $comment.find('.wcs-comment-item-text').html(this.generated_comment);
        $comment.find('.wcs-view-in-discussion-trigger').attr('data-url', this.thread_viewurl);
        $comment.find('.wcs-view-in-discussion-trigger').attr('data-ancestorid', this.ancestor_id);
        
        if(WEBVIEW.is_webview){
            var contentId = "";
            var theType = 'stories';
            if(this.thread_url.indexOf('quiz') > 0){
                theType = 'quiz';
            }
            else if(this.thread_url.indexOf('list') > 0){
                theType = 'lists';                
            }
            $comment.find('.wcs-view-in-discussion-trigger').attr('href', 'javascript:void(0);');
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-key', 'comment-profile');
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-type', theType);
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-fullurl', 'https://www.metv.com' + this.thread_url + '?contentview=2#comment_' + this.id);
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-itemurl', this.thread_url + '#comment_' + this.id);
            $comment.find('.wcs-view-in-discussion-trigger').attr('data-services', 'https://services.weigelbroadcasting.com/metv/' + theType + '/' + this.parent_id);   

            $comment.find('.wcs-comment-post-title a').attr('href', 'javascript:void(0);');
            $comment.find('.wcs-comment-post-title a').attr('data-key', 'comment-profile');
            $comment.find('.wcs-comment-post-title a').attr('data-type', theType);
            $comment.find('.wcs-comment-post-title a').attr('data-fullurl', 'https://www.metv.com' + this.thread_url + '?contentview=2');
            $comment.find('.wcs-comment-post-title a').attr('data-itemurl', this.thread_url);
            $comment.find('.wcs-comment-post-title a').attr('data-services', 'https://services.weigelbroadcasting.com/metv/' + theType + '/' + this.parent_id);            
        }        
        if(this.is_liked){
            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
        }
        if(this.is_admin == 1){
            $comment.find('.wcs-user-displayname').addClass('wcs-verified-user');
        }else{
            $comment.find('.wcs-user-displayname').removeClass('wcs-verified-user');
        }

        //actually prepend so before loadmore
        $('.wcs-profile-comments-wrap .wcs-profile-comments-load-more').before($comment);
    });
    if(has_more){
        $('.wcs-profile-comments-load-more').show();
    }else{
        $('.wcs-profile-comments-load-more').hide();
    }

};

WCS.refreshAllComments = function(){
    if(WCS.FILTER_PAGE == 0){
        var html = $('#template_loadinganimation').html();
        $('.wcs-comment-container').html(html);
        $('.view-more-topcomment').hide();
    }

    $.ajax({
        url:'/ajax_comments/reload_comments/?' + new Date().getTime(),
        data:{
            filter_type: WCS.FILTER_TYPE,
            filter_page: WCS.FILTER_PAGE,
            thread_id: WCS.THREAD_ID
        },
        dataType:'json',
        type:'POST',
        success:function(allData){
            if(WCS.FILTER_PAGE == 0){
                $('.wcs-comment-container').html("");
            }
            var data = allData['comments'];
            var totalTop = allData['total_topcomments'];
            var hasMore = allData['has_more'];
            var hasExtraMore = allData['has_extra_more'];
            var commentsLeft = allData['comments_left'];
            //just do top comments for now
            $(data).each(function(i, resp){
                var $comment = $($('#template_acomment').html());
                if(resp['active'] == 0){
                    $comment = $($('#template_deleted_comment').html());
                    if(!resp['has_children']){
                        return;
                    }
                }

                $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);

                $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['first_name'] + "|" + resp['parent_id']);
                $comment.attr('data-isadmin', resp['is_admin']);

                $comment.addClass('wcs-comment-item-parent');
                //need to add reply box
                var replyBox = $('#template_reply_container').html();
                $comment.append(replyBox);
                $comment.find('.wcs-user-displayname').html(resp['first_name']);
                $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                if(resp['active'] == 0){
                    $comment.find('.wcs-comment-item-text').html('<span class="wcs-comment-item-text-removed">This comment has been removed.</span>');
                }else{
                    $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                }
                if(WCS.USER_ID != resp['user_id']){
                    $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                }
                if(resp.parent_id == 0){
                    $comment.find('.wcs-other-user').remove();
                    $comment.find('.wcs-comment-item-username i').remove();
                }else{
                    $comment.find('.wcs-other-user').attr('data-userid', resp.parent_userid);
                    $comment.find('.wcs-other-user').html(resp.parent_username);
                }

                var totalText = "";
                if(resp['upvotes'] > 0){
                    totalText = " (" + resp['upvotes'] + ')';
                }
                var html = "";
                if(resp['upvoted']){
                    html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                    $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                }else{
                    html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                }


                $comment.find('.wcs-like-trigger').html(html);
                $comment.attr('data-id', resp['id']);
                $comment.attr('id',  "comment_" + resp['id']);
                $('.wcs-comment-container').append($comment);

            });
            setTimeout(function(){


                $(data).each(function(i, parentComment){

                    if(parentComment['has_more']){
                        var moreHtml = '<a class="view-prev-replies view-more-subcomment" data-ancestorid="' + parentComment['id'] + '" href="#!">Load previous comments <i class="fas fa-angle-down"></i></a>';
                        var $container = $('#comment_' + parentComment['id']);
                        $container.find('.wcs-reply-container').before(moreHtml);
                    }
                    console.log("parent comment " + parentComment['id']);
                    console.log("has children " + parentComment['children'].length);
                    $(parentComment['children']).each(function(i, resp){
                        console.log("adding child ");
                        console.log(resp);
                        var $comment = $($('#template_acomment').html());

                        $comment.find('.wcs-user-trigger img').attr('src', resp['profile_image']);
                        $comment.find('.wcs-user-trigger').attr('data-userid', resp['user_id']);


                        $comment.find('.wcs-other-user').attr('data-userid', resp['parent_userid']);
                        $comment.attr('data-replyinfo', resp['user_id'] + "|" + resp['parent_username'] + "|" + resp['parent_id']);
                        $comment.attr('data-isadmin', resp['is_admin']);

                        $comment.find('.wcs-other-user').html(resp['parent_username']);
                        $comment.find('.wcs-user-displayname').html(resp['first_name']);
                        $comment.find('.wcs-comment-item-date').html(resp['timeago']);
                        $comment.find('.wcs-comment-item-text').html(resp['generated_comment']);
                        var totalText = "";
                        if(resp['upvotes'] > 0){
                            totalText = " (" + resp['upvotes'] + ')';
                        }
                        var html = "";
                        if(resp['upvoted']){
                            html = '<i class="fas fa-heart"></i>' + " Unlike" + totalText;
                            $comment.find('.wcs-like-trigger').addClass('wcs-like-btn-active');
                        }else{
                            html = '<i class="fas fa-heart"></i>' + " Like" + totalText;
                        }
                        $comment.find('.wcs-like-trigger').html(html);

                        $comment.attr('data-id', resp['id']);
                        $comment.attr('id',  "comment_" + resp['id']);
                        if(WCS.USER_ID != resp['user_id']){
                            $comment.find('.wcs-delete-trigger').attr('style', 'display:none');
                        }

                        $comment.addClass('wcs-comment-item-reply');
                        var $container = $('#comment_' + resp['ancestor_id']);
                        //alert("adding child to " + '#comment_' + resp['parent_id']);
                        $container.find('.wcs-reply-container').before($comment);
                    });
                });
            }, 500);

            if(hasMore && commentsLeft > 0){
                if(hasExtraMore){
                    var text = "Load more comments <i class='fas fa-angle-down'></i>"; //"Load next 10 out of " + commentsLeft + " comments left ";
                    $('.view-more-topcomment').html(text);
                     $('.view-more-topcomment').show();
                }else{
                    var text = "Load more comments <i class='fas fa-angle-down'></i>"; //"Load next " + commentsLeft + " comments";
                    $('.view-more-topcomment').html(text);
                     $('.view-more-topcomment').show();
                }
            }else{
                //hide button completely
                $('.view-more-topcomment').hide();
            }

        }, error : function(data){

        }
    });

};

WCS.resetFormElement = function(e) {
  e.wrap('<form>').closest('form').get(0).reset();
  e.unwrap();

  // Prevent form submission
};


String.prototype.replaceAll = function(str1, str2, ignore)
{
    return this.replace(new RegExp(str1.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(ignore?"gi":"g")),(typeof(str2)=="string")?str2.replace(/\$/g,"$$$$"):str2);
};

WCS.load_providers = function(exactText)
{
    var zipcode = $("#wcs_zipcode").val();
    var selbox = $("#wcs_provider");
    //$('#dk_container_channel').remove();

    if(zipcode.length > 4){
        WCS.provider_status("Searching providers...");

        $.ajax({
            url:'/ajax_comments/zipsearch/',
            data:{zipcode:zipcode},
            dataType:'json',
            type:'POST',
            success:function(data){
                var locators = data.channels;
                var count = data.count;
                console.log(locators);
                var val;
                if(count){
                    WCS.provider_status("");

                    selbox.empty();
                    selbox.append('<option value="">-- Select from this list --</option>');
                    //$("#provider_input_select").fadeIn();

                    if(exactText){
                        exactText = exactText.replaceAll(" ","_").replaceAll('/','').replaceAll('\/','');
                        exactText = exactText.replaceAll(" ", '').replaceAll('_', '');
                        exactText = exactText.replace(/(?:\r\n|\r|\n)/g, '');
                    }else{
                        exactText = "";
                    }
                    $.each(locators,function(index,channels){
                        if(index){
                            var key = index.replaceAll(" ","_").replaceAll('/','');
                            key = key.replace(" ", '');
                            key = key.replace(/(?:\r\n|\r|\n)/g, '');
                            selbox.append('<optgroup label="'+index+'" id="wcs-'+key+'"></optgroup>');
                            $.each(channels,function(c,channel){
                                if(channel.position.indexOf('-') !== -1){
                                    channel.position = channel.position.split('-')[0];
                                }
                                val = channel.id+'|' + index + '|' +channel.name+'|'+channel.position;
                                val = val.replaceAll(" ","").replaceAll('/','');
                                val = val.replaceAll(" ", '').replaceAll('_', '');
                                val = val.replace(/\//g, '');
                                val = val.replace(/(?:\r\n|\r|\n)/g, '');
                                var displayChannel = channel.broadcaster + " " + channel.position;
                                if(exactText != '' && exactText == val){
                                   $("#wcs-"+key).append('<option data-display="' + displayChannel + '" value="'+val+'" selected>'+channel.name+': '+channel.position+'</option>');
                                   $('#wcs_provider_display').val(displayChannel);
                                }else{
                                   $("#wcs-"+key).append('<option data-display="' + displayChannel + '" value="'+val+'">'+channel.name+': '+channel.position+'</option>');
                                }
                             });
                        }
                    });

                    if(exactText == 'provider not listed'){
                        selbox.append('<option selected="selected" value="provider not listed">Provider not listed</option>');
                    }else{
                        selbox.append('<option value="provider not listed">Provider not listed</option>');
                    }
                } else {
                    WCS.provider_status("");
                    selbox.empty();
                    selbox.append('<option value=""></option>');
                    if(exactText == 'provider not listed'){
                        selbox.append('<option selected="selected" value="provider not listed">Provider not listed</option>');
                    }else{
                        selbox.append('<option value="provider not listed">Provider not listed</option>');
                    }
                }
            },
            error:function(packet){


            }
        });
    }
}

WCS.provider_status = function(){

}

WCS.changeNotificationEnabled = function(theType, setDisabled){
    if(theType == 'app_push'){
        if(!WEBVIEW.is_webview){
            
            //SHOULD UNCHECK HERE...
            
            WCS.showModal("Please Download the CBS58 app on iOS or Android to receive notifications as push alerts!", "OK", function(){});            
        }else{
            //alert("name is " + name);
            //Do some message
            if(setDisabled == 1){
                //SHOULD UNCHECK NOW
                WEBVIEW.change_push_notifications(false);
                
            }else{
                appUpdatePushNotifications(true);
                WEBVIEW.change_push_notifications(true);                                
            }
            $.ajax({
                url: '/ajax_comments/manage_notification_settings',
                data: {
                     is_disabled: setDisabled,
                     is_single: false,
                     name: 'enable_app_alerts',
                     access_token: WEBVIEW.access_token
                },
                type: 'POST',
                dataType: 'json',
                success: function(data)
                {
                    //WCS.enable_notification_type(data.id, data.name, data.disabled);    
                    console.log("notification refresh app_update");

                    WCS.refreshNotifications(data['enable_email_alerts'], 
                        data['enable_push_alerts'], data['enable_browser_alerts'], 
                        data['notification_settings']);
                },
                error: function(response)
                {
                    alert("Error - updating notification settings");
                    console.log(response.responseText);
                    console.log(response);
                }

            });              
            
        }    
    }
    else if(theType == 'email'){
        
    }
    else if(theType == 'browser_push'){
        
    }
}

WCS.setupNotificationHandlers = function(isApp){

        var switches = document.querySelectorAll('.custom-switch');
        for(let i = 0; i < switches.length; i++){
            var switchId = switches[i].id;
            //var use_this_class = switches[i].className.split(" ")[2];
            //use_this_class = "." + use_this_class;

            new DG.OnOffSwitchAuto({
                cls: '#' + switchId,
                height: 24,
                trackColorOn:'#F9F9F9',
                trackColorOff:'#222',
                textColorOn: '#222',
                textColorOff: '#222',
                textOn:'On',
                textOff:'Off',
                listener:function(name, checked){
                    var setDisabled = 0;
                    if(!checked){
                        setDisabled = 1;
                    }
                    var activateNotification = function(name){
                        $.ajax({
                            url: '/ajax_comments/manage_notification_settings',
                            data: {
                                 is_disabled: setDisabled,
                                 is_single: false,
                                 name: name,
                                 access_token: WEBVIEW.access_token
                            },
                            type: 'POST',
                            dataType: 'json',
                            success: function(data)
                            {
                                //console.log("refreshing notifications with ");
                                //console.log(data);
                                //WCS.enable_notification_type(data.id, data.name, data.disabled);  
                                console.log("notification refresh setup");

                                WCS.refreshNotifications(data['enable_email_alerts'], 
                                    data['enable_push_alerts'], data['enable_browser_alerts'], 
                                    data['notification_settings']);
                            },
                            error: function(response)
                            {
                                alert("Error - updating notification settings");
                                console.log(response.responseText);
                                console.log(response);
                            }

                        });

                    }
                    if(name == 'enable_email_alerts'){
                        //check email is confirmed... if not show
                        if(WCS.emailConfirmed == 0){
                            WCS.force_action('confirm_email');
                            return false;
                        }
                        activateNotification(name);
                    }else if(name == 'enable_browser_alerts'){
                        if(setDisabled == 0){
                            console.log("requesting permission");
                            if ("Notification" in window) {
                                WCS.requestBrowserNotificationPermission(function(success){
                                    if(!success){
                                        DG.switches['#' + name].uncheck();
                                    }else{
                                        //it worked?
                                        //this turns on browser notifications
                                        activateNotification(name);   
                                    }
                                });
                            }else{
                                WCS.showModal("We're sorry, you're browser doesn't seem to allow browser notifications!", "OK", function(){});
                                DG.switches['#' + name].uncheck();                                        
                            }
                        }else{
                            //this turns off browser notifications
                            activateNotification(name);                                
                        }
                        console.log("done");

                    }else if(name == 'enable_app_alerts'){
                        if(!WEBVIEW.is_webview){
                            WCS.showModal("Please Download the MeTV app on iOS or Android to receive notifications as push alerts!", "OK", function(){});
                            DG.switches['#' + name].uncheck();
                        }else{
                            //alert("name is " + name);
                            //Do some message
                            if(setDisabled == 1){
                                DG.switches['#' + name].uncheck();
                                WEBVIEW.change_push_notifications(false);
                            }else{
                                appUpdatePushNotifications(true);
                                WEBVIEW.change_push_notifications(true);                                
                            }
                        }
                    }
                }
            });

        }

    $('.manage-notifications').on('change', 'input', function(e){

        var id = $(this).data('id');
        var name = $(this).data('name');
        var val = "no";
        if($(this).is(':checked')){
            val = "yes";
        }

        $.ajax({
            url: '/ajax_comments/manage_notification_settings',
            data: {
                id: id,
                name: name,
                is_single: true,
                value: val,
                access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){

            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });

    });

    $('#noteworthy_send_time').on('change', function(e){

        var id = $(this).data('id');
        var name = $(this).data('name');
        var value = $(this).val();

        $.ajax({
            url: '/ajax_comments/manage_notification_settings',
            data: {
                id: id,
                name: name,
                is_single: true,                
                value: value               
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){

            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });

    });
    
    $('.reminders-list').on('click', '.reminder-remove', function(){
         var remindId = $(this).data('remindid');
         var remindType = $(this).data('remindtype');
        $.ajax({
            url: '/ajax_comments/remove_user_reminder',
            data: {
                reminder_id: remindId,
                remind_type: remindType,
                access_token: WEBVIEW.access_token
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){
                if(data['success'] == 'true'){
                    $('#uremind_' + remindId).remove();
                    WCS.showModal("Your reminder has been deleted", "OK", function(){});                    
                }else{
                    WCS.showModal(data['msg'], "OK", function(){});
                }
            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });         
    });
    
    $('.reminders-list').on('change', '.reminder-changetype', function(){
         var remindId = $(this).data('remindid');
         var remindType = $(this).data('remindtype');
         var alertType = $(this).val();
         
        $.ajax({
            url: '/ajax_comments/changetype_user_reminder',
            data: {
                reminder_id: remindId,
                remind_type: remindType,
                alert_type:  alertType
            },
            type: 'POST',
            dataType: 'json',
            success: function(data){
                console.log("change result");
                console.log(data);
                if(data['success'] == 'true'){
                    if(data['needs_phone']){
                       WCS.showModal("Please Enter your Phone Number", "OK", function(val){
                            $.ajax({
                                url: '/ajax_comments/update_user_reminder_phone',
                                data: {
                                    reminder_id: remindId,
                                    remind_type: remindType,
                                    reminder_phone: val
                                },        
                                type: 'POST',
                                dataType: 'json',
                                success: function(data){
                                    
                                },
                                error: function(response){
                                    alert('Error updating settings');
                                    console.log(response.responseText);
                                }
                            });   
                       }, true);
                    }
                }else{
                    WCS.showModal("The reminder could not be updated", "OK", function(){});                                   
                }                
            },
            error: function(response){
                alert('Error updating settings');
                console.log(response.responseText);
            }
        });         
    });        
    
}

WCS.is_invalid_user = function(msg, title, desc){

    WCS.DESIRED_ACTION = msg;
    WCS.DESIRED_TITLE = title;
    WCS.DESIRED_DESCRIPTION = desc;
    if(WCS.USER_ID <= 0){
        if(WCS.RETURN_USER){
            WCS.loadSidebarTemplate('login')
            WCS.setupProfileForm('login');
        }else{
            WCS.loadSidebarTemplate('register')
            WCS.setupProfileForm('register');
        }
        return true;
    }
    if(WCS.termsAccepted == 0){
        WCS.force_action('accept_terms', true);
        return true;
    }else if(WCS.emailConfirmed == 0){
        WCS.force_action('confirm_email');
        return true;
    }

    return false;
}


function loginSuccess(loggeduser, noParse, skipDialogs){

    //need to have
    //id, first_name, profile_image, terms_accepted, email_confirmed

    var userData;
    if(noParse){
        userData = loggeduser;
    }else{
        userData = JSON.parse(loggeduser);
    }
    //console.log("user data");
    //console.log(userData);
    WCS.USER_ID = userData['id'];

    //if just registered shouldn't close the sidebar
    //could be on login page...
    if(WCS.SIDEBAR_PAGE != 'register'){
        WCS.CLOSE_SIDEBAR();
    }
    $('.wcs-post-comment-header .wcs-user-displayname').html(userData['first_name']);
    $('.wcs-post-comment-header .wcs-user-displayname').data('userid', WCS.USER_ID);
    $('.wcs-post-comment-user-settings').data('userid', WCS.USER_ID);
    $('.wcs-post-comment-header .wcs-avatar').attr('src', userData['profile_image']);
    $('.wcs-post-comment-header .wcs-avatar').data('userid', WCS.USER_ID);
    $('.wcs-profile-header-user-avatar .wcs-avatar').attr('src', userData['profile_image']);
    $('.wcs-post-comment-login').hide();
    $('.wcs-post-comment-header').show();

    //go through each comment, activate delete if user matches
    $('.wcs-comment-item-reply').each(function(){
        var replyInfo = $(this).data('replyinfo');
        var userId = replyInfo.split('|')[0];
        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
        if(WCS.USER_ID == userId){
            //console.log("activating delete for subcomment " + this.id);
            $(this).find('.wcs-delete-trigger').show();
        }
    });
    $('.wcs-comment-item-parent').each(function(){
        var replyInfo = $(this).data('replyinfo');
        var userId = replyInfo.split('|')[0];
        //console.log("comment userid " + userId + " vs " + WCS.USER_ID);
        if(WCS.USER_ID == userId){
            //console.log("activating delete for topcomment " + this.id);
            $(this).find('.wcs-delete-trigger').first().show();
        }
    });

    //header login / notifications
    $('#header-login-avatar').attr('src', userData['profile_image']);
    $('#header-login-avatar').data('userid', WCS.USER_ID);    
    $('.logged-in').css('display', 'flex');
    $('.logged-out').css('display', 'none');
    $('.logged-in .user-login').data('userid', WCS.USER_ID);
    $('.logged-in .user-login').html('<a href="javascript:void(0);">' + userData['first_name'] + '</a>');
    
    //should hide the other one
    //    $('.wcs-post-comment-header').show();
    $('.wcs-post-comment-header-loggedout').hide();

    $('.wcs-post-comment-logged-in-btns').show();

    if(userData['new_notifications'] == 1){

        $('.no-notifications').html('');
        $('.no-notifications').append('<a href="/notifications"><span class="notifications"><img class="" src="images/notifications.svg" width="27"></a></span></a>');
        /*
        var notification_type;

        if(userData['notification']['notification_type'] == 'metv_original'){

            notification_type = 'MeTV Original';

        }else if(userData['notification']['notification']['type'] == 'blog' && userData['notification']['notification_type'] == 'favorited_content') {

            notification_type = userData['notification']['notification']['show_name'] + ' Story';

        }else if(userData['notification']['notification']['type'] == 'lists' && userData['notification']['notification_type'] == 'favorited_content'){

            notification_type = userData['notification']['notification']['show_name'] + ' Story';

        }else if(userData['notification']['notification']['type'] == 'quizzes' && userData['notification']['notification_type'] == 'favorited_content'){

            notification_type = userData['notification']['notification']['show_name'] + ' Quiz';

        }else if(userData['notification']['notification']['type'] == 'video' && userData['notification']['notification_type'] == 'favorited_content'){

            notification_type = userData['notification']['notification']['show_name'] + ' Video';
        }

        if(userData['notification']['notification_type'] == 'favorited_content' || userData['notification']['notification_type'] == 'metv_original'){

            $('.popup-notification').html('');
            $('.popup-notification').append(
                '<div class="popup-notification-show">' +
                    '<div class="popup-notification-icon">' +
                        '<a href="/notifications">' +
                            '<p class="popup-notification-headline">' +
                                '<span>' +
                                    '<i class="fas fa-bell"></i>' +
                                '</span>' +
                                'New ' + notification_type +
                            '</p>' +
                            '<p class="popup-notification-timestamp">' +
                                 userData['notification']['notification']['timeago'] +
                            '</p>' +
                        '</a>' +
                    '</div>' +
                '</div>');

            }

            if(userData['notification']['notification_type'] == 'comment_reply'){

                $('.popup-notification').html('');
                $('.popup-notification').append(
                    '<div class="popup-notification-show">' +
                        '<div class="popup-notification-icon">' +
                            '<a href="/notifications">' +
                                '<p class="popup-notification-text-comment">' +
                                    '<span>' +
                                        '<i class="fas fa-comment"></i>' +
                                    '</span>' +
                                    userData['notification']['notification']['first_name'] + ' responded to your comment' +
                                '</p>' +
                                '<p class="popup-notification-timestamp">' +
                                 userData['notification']['notification']['timeago'] +
                                '</p>' +
                            '</a>' +
                        '</div>' +
                    '</div>');

            }

            if(userData['notification']['notification_type'] == 'comment_like'){

                $('.popup-notification').html('');
                $('.popup-notification').append(
                    '<div class="popup-notification-show">' +
                        '<div class="popup-notification-icon">' +
                            '<a href="/notifications">' +
                                '<p class="popup-notification-text-comment">' +
                                    '<span>' +
                                        '<i class="fas fa-heart"></i>' +
                                    '</span>' +
                                    userData['notification']['notification']['first_name'] + ' liked your comment' +
                                '</p>' +
                                '<p class="popup-notification-timestamp">' +
                                    userData['notification']['notification']['timeago'] +
                                '</p>' +
                            '</a>' +
                        '</div>' +
                    '</div>');

            }

            if(userData['notification']['notification_type'] == 'noteworthy_episode'){

                $('.popup-notification').html('');
                $('.popup-notification').append(
                    '<div class="popup-notification-show">' +
                        '<div class="popup-notification-icon">' +
                            '<a href="/notifications">' +
                                '<p class="popup-notification-headline noteworthy">' +
                                    '<span>' +
                                        '<i class="far fa-star"></i>' +
                                    '</span>' +
                                    'Fan favorite coming up!' +
                                '</p>' +
                                '<p class="popup-notification-headline">' +
                                    userData['notification']['notification']['title'] +
                                '</p>' +
                                '<p class="popup-notification-timestamp">' +
                                    userData['notification']['notification']['timeago'] +
                                '</p>' +
                            '</a>' +
                        '</div>' +
                    '</div>');

            }

            var notification = document.getElementsByClassName('popup-notification')[0];

            setTimeout(function(){

                notification.classList.add('show-notification');

            }, 1000);

            setTimeout(function(){

                    notification.classList.add('remove-notification');

                    setTimeout(function(){

                        notification.parentNode.removeChild(notification);

                    }, 1000);

            }, 5000);
            */

    } else {

        $('.no-notifications').html('');
        $('.no-notifications').append('<a href="/notifications"><i class="fas fa-bell"></i></a>');

    }

    WCS.termsAccepted = userData['terms_accepted'];
    WCS.emailConfirmed = userData['email_confirmed'];
    if(!skipDialogs){
        if(WCS.termsAccepted == 0){
            WCS.force_action('accept_terms', true);
            return false;
        }else if(WCS.emailConfirmed == 0){
            WCS.force_action('confirm_email');
            return false;
        }
    }
};

function appUpdatePushNotifications(isActive){
    
    var setDisabled = 0;
    if(!isActive){
        setDisabled = 1;
        $('#app_alerts_check').removeAttr('checked');
    }else{
        $("#app_alerts_check").attr('checked', 'checked');        
    }
    
    $.ajax({
        url: '/ajax_comments/manage_notification_settings',
        data: {
             is_disabled: setDisabled,
             is_single: false,
             name: 'enable_app_alerts',
             access_token: WEBVIEW.access_token
        },
        type: 'POST',
        dataType: 'json',
        success: function(data)
        {
            //WCS.enable_notification_type(data.id, data.name, data.disabled);    
            console.log("notification refresh app_update");
            
        },
        error: function(response)
        {
            alert("Error - updating notification settings");
            console.log(response.responseText);
            console.log(response);
        }

    });        
}


    

</script>
</section>


<script src="/js/wcs-comments.js"></script>
            
        
    
 

</body>
</html>
